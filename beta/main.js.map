{"version":3,"file":"main.js","sources":["../src/core/logger.ts","../node_modules/bondage-club-mod-sdk/dist/bcmodsdk.js","../src/types/definitions.ts","../src/types/types.ts","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_baseFor.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/merge.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/_isIterateeCall.js","../src/core/settings.ts","../src/core/utils.ts","../src/core/pendingRequest.ts","../src/core/player/ui.ts","../src/core/player/player.ts","../src/core/player/diaper.ts","../src/core/player/playerUtils.ts","../src/core/hooks.ts","../src/core/bcUI.ts","../src/screens/Settings/index.ts","../src/screens/styles/css.ts","../src/core/data/activities-data.ts","../src/core/activities.ts","../src/core/minigames.ts","../src/core/globalExpose.ts","../src/main.ts","../src/screens/index.ts"],"sourcesContent":["class Logger {\r\n  private logs: Array<{\r\n    level: string;\r\n    timestamp: string;\r\n    message: any;\r\n  }> = [];\r\n  private maxLogSize: number = 100;\r\n\r\n  private log(\r\n    level: string,\r\n    message: any,\r\n    logFunction: (...args: any[]) => void\r\n  ) {\r\n    const timestamp = new Date().toISOString();\r\n    const logEntry = {\r\n      message,\r\n      level,\r\n      version: modVersion,\r\n      timestamp,\r\n    };\r\n\r\n    logFunction(\r\n      `%c${modIdentifier}:`,\r\n      `font-weight: bold; color: #f6cbde;`,\r\n      logEntry\r\n    );\r\n\r\n    this.logs.push(logEntry);\r\n\r\n    if (this.logs.length > this.maxLogSize) {\r\n      this.logs.shift();\r\n    }\r\n  }\r\n\r\n  info(message: any) {\r\n    this.log(\"INFO\", message, console.log);\r\n  }\r\n\r\n  debug(message: any) {\r\n    this.log(\"DEBUG\", message, console.debug);\r\n  }\r\n\r\n  warn(message: any) {\r\n    this.log(\"WARN\", message, console.warn);\r\n  }\r\n\r\n  error(message: any) {\r\n    this.log(\"ERROR\", message, console.error);\r\n  }\r\n\r\n  getLogs() {\r\n    return this.logs;\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n","// Bondage Club Mod Development Kit (1.2.0)\n// For more info see: https://github.com/Jomshir98/bondage-club-mod-sdk\n/** @type {ModSDKGlobalAPI} */\nvar bcModSdk=function(){\"use strict\";const o=\"1.2.0\";function e(o){alert(\"Mod ERROR:\\n\"+o);const e=new Error(o);throw console.error(e),e}const t=new TextEncoder;function n(o){return!!o&&\"object\"==typeof o&&!Array.isArray(o)}function r(o){const e=new Set;return o.filter((o=>!e.has(o)&&e.add(o)))}const i=new Map,a=new Set;function c(o){a.has(o)||(a.add(o),console.warn(o))}function s(o){const e=[],t=new Map,n=new Set;for(const r of f.values()){const i=r.patching.get(o.name);if(i){e.push(...i.hooks);for(const[e,a]of i.patches.entries())t.has(e)&&t.get(e)!==a&&c(`ModSDK: Mod '${r.name}' is patching function ${o.name} with same pattern that is already applied by different mod, but with different pattern:\\nPattern:\\n${e}\\nPatch1:\\n${t.get(e)||\"\"}\\nPatch2:\\n${a}`),t.set(e,a),n.add(r.name)}}e.sort(((o,e)=>e.priority-o.priority));const r=function(o,e){if(0===e.size)return o;let t=o.toString().replaceAll(\"\\r\\n\",\"\\n\");for(const[n,r]of e.entries())t.includes(n)||c(`ModSDK: Patching ${o.name}: Patch ${n} not applied`),t=t.replaceAll(n,r);return(0,eval)(`(${t})`)}(o.original,t);let i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookChainExit)||void 0===i?void 0:i.call(t,o.name,n),c=r.apply(this,e);return null==a||a(),c};for(let t=e.length-1;t>=0;t--){const n=e[t],r=i;i=function(e){var t,i;const a=null===(i=(t=m.errorReporterHooks).hookEnter)||void 0===i?void 0:i.call(t,o.name,n.mod),c=n.hook.apply(this,[e,o=>{if(1!==arguments.length||!Array.isArray(e))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof o}`);return r.call(this,o)}]);return null==a||a(),c}}return{hooks:e,patches:t,patchesSources:n,enter:i,final:r}}function l(o,e=!1){let r=i.get(o);if(r)e&&(r.precomputed=s(r));else{let e=window;const a=o.split(\".\");for(let t=0;t<a.length-1;t++)if(e=e[a[t]],!n(e))throw new Error(`ModSDK: Function ${o} to be patched not found; ${a.slice(0,t+1).join(\".\")} is not object`);const c=e[a[a.length-1]];if(\"function\"!=typeof c)throw new Error(`ModSDK: Function ${o} to be patched not found`);const l=function(o){let e=-1;for(const n of t.encode(o)){let o=255&(e^n);for(let e=0;e<8;e++)o=1&o?-306674912^o>>>1:o>>>1;e=e>>>8^o}return((-1^e)>>>0).toString(16).padStart(8,\"0\").toUpperCase()}(c.toString().replaceAll(\"\\r\\n\",\"\\n\")),d={name:o,original:c,originalHash:l};r=Object.assign(Object.assign({},d),{precomputed:s(d),router:()=>{},context:e,contextProperty:a[a.length-1]}),r.router=function(o){return function(...e){return o.precomputed.enter.apply(this,[e])}}(r),i.set(o,r),e[r.contextProperty]=r.router}return r}function d(){for(const o of i.values())o.precomputed=s(o)}function p(){const o=new Map;for(const[e,t]of i)o.set(e,{name:e,original:t.original,originalHash:t.originalHash,sdkEntrypoint:t.router,currentEntrypoint:t.context[t.contextProperty],hookedByMods:r(t.precomputed.hooks.map((o=>o.mod))),patchedByMods:Array.from(t.precomputed.patchesSources)});return o}const f=new Map;function u(o){f.get(o.name)!==o&&e(`Failed to unload mod '${o.name}': Not registered`),f.delete(o.name),o.loaded=!1,d()}function g(o,t){o&&\"object\"==typeof o||e(\"Failed to register mod: Expected info object, got \"+typeof o),\"string\"==typeof o.name&&o.name||e(\"Failed to register mod: Expected name to be non-empty string, got \"+typeof o.name);let r=`'${o.name}'`;\"string\"==typeof o.fullName&&o.fullName||e(`Failed to register mod ${r}: Expected fullName to be non-empty string, got ${typeof o.fullName}`),r=`'${o.fullName} (${o.name})'`,\"string\"!=typeof o.version&&e(`Failed to register mod ${r}: Expected version to be string, got ${typeof o.version}`),o.repository||(o.repository=void 0),void 0!==o.repository&&\"string\"!=typeof o.repository&&e(`Failed to register mod ${r}: Expected repository to be undefined or string, got ${typeof o.version}`),null==t&&(t={}),t&&\"object\"==typeof t||e(`Failed to register mod ${r}: Expected options to be undefined or object, got ${typeof t}`);const i=!0===t.allowReplace,a=f.get(o.name);a&&(a.allowReplace&&i||e(`Refusing to load mod ${r}: it is already loaded and doesn't allow being replaced.\\nWas the mod loaded multiple times?`),u(a));const c=o=>{let e=g.patching.get(o.name);return e||(e={hooks:[],patches:new Map},g.patching.set(o.name,e)),e},s=(o,t)=>(...n)=>{var i,a;const c=null===(a=(i=m.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(i,o,g.name);g.loaded||e(`Mod ${r} attempted to call SDK function after being unloaded`);const s=t(...n);return null==c||c(),s},p={unload:s(\"unload\",(()=>u(g))),hookFunction:s(\"hookFunction\",((o,t,n)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);\"number\"!=typeof t&&e(`Mod ${r} failed to hook function '${o}': Expected priority number, got ${typeof t}`),\"function\"!=typeof n&&e(`Mod ${r} failed to hook function '${o}': Expected hook function, got ${typeof n}`);const s={mod:g.name,priority:t,hook:n};return a.hooks.push(s),d(),()=>{const o=a.hooks.indexOf(s);o>=0&&(a.hooks.splice(o,1),d())}})),patchFunction:s(\"patchFunction\",((o,t)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const i=l(o),a=c(i);n(t)||e(`Mod ${r} failed to patch function '${o}': Expected patches object, got ${typeof t}`);for(const[n,i]of Object.entries(t))\"string\"==typeof i?a.patches.set(n,i):null===i?a.patches.delete(n):e(`Mod ${r} failed to patch function '${o}': Invalid format of patch '${n}'`);d()})),removePatches:s(\"removePatches\",(o=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof o}`);const t=l(o);c(t).patches.clear(),d()})),callOriginal:s(\"callOriginal\",((o,t,n)=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to call a function: Expected function name string, got ${typeof o}`);const i=l(o);return Array.isArray(t)||e(`Mod ${r} failed to call a function: Expected args array, got ${typeof t}`),i.original.apply(null!=n?n:globalThis,t)})),getOriginalHash:s(\"getOriginalHash\",(o=>{\"string\"==typeof o&&o||e(`Mod ${r} failed to get hash: Expected function name string, got ${typeof o}`);return l(o).originalHash}))},g={name:o.name,fullName:o.fullName,version:o.version,repository:o.repository,allowReplace:i,api:p,loaded:!0,patching:new Map};return f.set(o.name,g),Object.freeze(p)}function h(){const o=[];for(const e of f.values())o.push({name:e.name,fullName:e.fullName,version:e.version,repository:e.repository});return o}let m;const y=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:o,apiVersion:1,registerMod:g,getModsInfo:h,getPatchingInfo:p,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return m=e,Object.freeze(e)}():(n(window.bcModSdk)||e(\"Failed to init Mod SDK: Name already in use\"),1!==window.bcModSdk.apiVersion&&e(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==o&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);return\"undefined\"!=typeof exports&&(Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=y),y}();\n","export const ModVersion = modVersion;\r\nexport const ModName = modName;\r\nexport const ModRepo = modRepo;\r\nexport const ModIdentifier = modIdentifier;\r\nexport const PublicURL = publicURL;\r\n","import { PendingRequest } from \"../core/pendingRequest\";\r\n\r\nexport type PartialDeep<T> = {\r\n  [P in keyof T]?: PartialDeep<T[P]>;\r\n};\r\n\r\nexport type SyncEntry = {\r\n  type: \"sync\";\r\n  settings: ModSettings;\r\n  stats: ModStats;\r\n  target?: number;\r\n};\r\nexport type InitEntry = {\r\n  type: \"init\";\r\n};\r\nexport type RequestEntry = {\r\n  type: \"pendingRequest\";\r\n  state: typeof PendingRequest.prototype.state;\r\n  identifier: typeof PendingRequest.prototype.type;\r\n  id: typeof PendingRequest.prototype.id;\r\n};\r\nexport type ChangeDiaperRequestEntry = Omit<RequestEntry, \"type\"> & {\r\n  type: \"changeDiaper\";\r\n};\r\nexport type MessageEntry =\r\n  | SyncEntry\r\n  | InitEntry\r\n  | RequestEntry\r\n  | ChangeDiaperRequestEntry;\r\n\r\nexport interface PluginServerChatRoomMessage extends ServerChatRoomMessageBase {\r\n  /** The character to target the message at. null means it's broadcast to the room. */\r\n  Target?: number;\r\n  Content: ServerChatRoomMessageContentType;\r\n  Type: ServerChatRoomMessageType;\r\n  Dictionary?: {\r\n    message: MessageEntry;\r\n  }[];\r\n  Timeout?: number;\r\n}\r\nexport type PreferenceActivity = {\r\n  self: number;\r\n  other: number;\r\n  isSelfExclusive: boolean;\r\n};\r\n\r\nexport type ModScreen = {\r\n  id: string;\r\n  module: string;\r\n  functions: ScreenFunctions;\r\n};\r\n\r\nexport enum PermissionLevels {\r\n  Anyone = 0,\r\n  ItemPermission = 1,\r\n  Friends = 2,\r\n  Lovers = 3,\r\n  // TODO: Mistress = 4 Perhaps counts mistress as BCX Mistresses, BCC Caretakers, etc\r\n  Owner = 5, // TODO: Consider BCX owners, BCC Mommies, etc\r\n  Self = 6,\r\n}\r\n\r\n/** Overall structure for additional data */\r\nexport type AbclData = {\r\n  DiaperSizeScale: {\r\n    [key: string]: number;\r\n  };\r\n  Diapers: {\r\n    [key: string]: {\r\n      primaryColor?: number;\r\n      secondaryColor?: number;\r\n      size: number;\r\n    };\r\n  };\r\n  DiaperColors: {\r\n    [key: string]: string;\r\n  };\r\n  BabyClothes: string[];\r\n};\r\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import { merge } from \"lodash-es\";\r\nimport { PartialDeep, PermissionLevels } from \"../types/types\";\r\nimport { sendUpdateMyData as sendUpdateMyData } from \"./hooks\";\r\nimport { logger } from \"./logger\";\r\n\r\nexport const defaultSettings: ModSettings = {\r\n  Metabolism: {\r\n    value: \"Normal\",\r\n    permission: {\r\n      canView: PermissionLevels.Anyone,\r\n      canModify: PermissionLevels.Owner,\r\n    },\r\n  },\r\n  DisableWetting: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner, // maybe it could be used to signal to other players that this player does not like wetting\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  DisableSoiling: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner,\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  CaregiverIDs: {\r\n    value: [],\r\n    permission: {\r\n      canView: PermissionLevels.Anyone, // if this is not set to anyone then it would mean only those that fit the permission level could be caregivers, however it could be a good thing\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  OpenRemoteSettings: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Anyone, // this should probably always be visible\r\n      canModify: PermissionLevels.Self,\r\n    },\r\n  },\r\n  LockedOutOfSettings: {\r\n    value: false,\r\n    permission: {\r\n      canView: PermissionLevels.Owner,\r\n      canModify: PermissionLevels.Self, // if value becomes true then the player wouldn't be able to turn it off, we should warn for this\r\n    },\r\n  },\r\n};\r\n\r\nexport const defaultStats: ModStats = {\r\n  Bladder: {\r\n    value: 0, // in ml\r\n    size: 300, // in ml, quite arbitrary\r\n  },\r\n  Bowel: {\r\n    value: 0, // in ml\r\n    size: 200, // in ml\r\n  },\r\n  Soiliness: {\r\n    value: 0, // in ml\r\n  },\r\n  Wetness: {\r\n    value: 0, // in ml\r\n  },\r\n  WaterIntake: {\r\n    value: 300 / 20, // accident every 20 minutes\r\n  },\r\n  FoodIntake: {\r\n    value: 200 / 60,\r\n  },\r\n  Incontinence: {\r\n    value: 0,\r\n  },\r\n  MentalRegression: {\r\n    value: 0,\r\n  },\r\n};\r\nconst defaultData: ModStorageModel = {\r\n  Settings: defaultSettings,\r\n  Stats: defaultStats,\r\n};\r\n\r\nexport const mutateData = (newData: PartialDeep<ModStorageModel>) => {\r\n  Player[modIdentifier] = merge(Player[modIdentifier] || defaultData, newData);\r\n  saveData();\r\n};\r\n\r\nlet dataSaveTimeout: number | null = null;\r\n/**\r\n * Saves the data by compressing and storing them in the Player object and sending an update to the server.\r\n *\r\n * @remarks\r\n * This function compresses the data using LZString and stores them in the Player object.\r\n * It also sets a timeout to synchronize the extension data with the server and send an update if necessary.\r\n */\r\nexport const saveData = () => {\r\n  const compressed = LZString.compressToBase64(\r\n    JSON.stringify(Player[modIdentifier])\r\n  );\r\n  Player.ExtensionSettings[modIdentifier] = compressed;\r\n\r\n  if (dataSaveTimeout) {\r\n    logger.debug(\"Clearing existing data save timeout\");\r\n    clearTimeout(dataSaveTimeout);\r\n  }\r\n  dataSaveTimeout = setTimeout(() => {\r\n    ServerPlayerExtensionSettingsSync(modIdentifier);\r\n    logger.debug({\r\n      message: \"Data saved, sending update to server\",\r\n      data: compressed,\r\n    });\r\n    sendUpdateMyData();\r\n  }, 1000);\r\n};\r\n\r\nconst devMode = false; // Manually toggle during local development if needed to clear settings\r\nexport const loadOrGenerateData = () => {\r\n  if (devMode) {\r\n    Player.ExtensionSettings[modIdentifier] = \"N4XyA===\"; // Empty object compressed\r\n    ServerPlayerExtensionSettingsSync(modIdentifier);\r\n    logger.warn(\"Dev mode enabled, cleared data\");\r\n  }\r\n\r\n  let Settings, Stats;\r\n  const dataString = LZString.decompressFromBase64(\r\n    Player.ExtensionSettings[modIdentifier]\r\n  );\r\n  if (!dataString) {\r\n    logger.info(`Generating new settings`);\r\n    Settings = {};\r\n    Stats = {};\r\n  } else {\r\n    logger.info(`Loaded settings from server`);\r\n    Settings = JSON.parse(dataString).Settings as ModSettings;\r\n    Stats = JSON.parse(dataString).Stats as ModStats;\r\n  }\r\n\r\n  const modStorageObject = merge(\r\n    {\r\n      Settings: defaultSettings, // Start with default settings, so if new settings are added they are added to all players\r\n      Stats: defaultStats,\r\n      ModVersion: modVersion,\r\n    },\r\n    { Settings, Stats } // Merge in the user's existing data\r\n  );\r\n\r\n  logger.debug({ message: \"Merged settings object\", modStorageObject });\r\n\r\n  Player[modIdentifier] = modStorageObject;\r\n};\r\n\r\nexport const clearData = () => {\r\n  Player.ExtensionSettings[modIdentifier] = \"N4XyA===\"; // Empty object compressed\r\n  ServerPlayerExtensionSettingsSync(modIdentifier);\r\n  logger.warn(\"cleared data\");\r\n};\r\n","import bcModSdkRef from \"bondage-club-mod-sdk\";\r\nimport { ModName, ModRepo, ModVersion } from \"../types/definitions\";\r\nimport { PermissionLevels } from \"../types/types\";\r\nimport { saveData } from \"./settings\";\r\n\r\nexport const bcModSDK = bcModSdkRef.registerMod({\r\n  name: ModName,\r\n  fullName: ModName,\r\n  version: ModVersion,\r\n  repository: ModRepo,\r\n});\r\n\r\nexport function isObject(obj: unknown): obj is Record<string, any> {\r\n  return !!obj && typeof obj === \"object\" && !Array.isArray(obj);\r\n}\r\n\r\nexport async function waitFor(\r\n  func: { (): any; (): boolean; (): any },\r\n  cancelFunc = () => false\r\n) {\r\n  while (!func()) {\r\n    if (cancelFunc()) return false;\r\n    await new Promise((resolve) => setTimeout(resolve, 10));\r\n  }\r\n  return true;\r\n}\r\n\r\nexport const sendChatLocal = (message: string): void => {\r\n  if (!ServerPlayerIsInChatRoom()) return;\r\n  const msgElement = document.createElement(\"div\");\r\n  msgElement.innerHTML = message\r\n    .split(\"\\n\")\r\n    .map((line) => line.trim())\r\n    .join(\"<br/>\");\r\n  msgElement.classList.add(`${modIdentifier}LocalMessage`);\r\n  document.querySelector(\"#TextAreaChatLog\")?.appendChild(msgElement);\r\n  ElementScrollToEnd(\"TextAreaChatLog\");\r\n};\r\n\r\nexport const getMyMaxPermissionLevel = (target: Character) => {\r\n  if (target.MemberNumber === Player.MemberNumber) return PermissionLevels.Self;\r\n  if (target.IsOwnedByPlayer()) return PermissionLevels.Owner;\r\n  if (target.IsLoverOfPlayer()) return PermissionLevels.Lovers;\r\n\r\n  if (target.MemberNumber && Player.FriendList?.includes(target.MemberNumber))\r\n    return PermissionLevels.Friends;\r\n\r\n  if (ServerChatRoomGetAllowItem(Player, target))\r\n    return PermissionLevels.ItemPermission;\r\n\r\n  return PermissionLevels.Anyone;\r\n};\r\n\r\n// might be useful\r\nexport class Saver {\r\n  private lastSaveTime: number = 0;\r\n  private allowedSaveInterval: number;\r\n  constructor(allowedSaveInterval: number) {\r\n    this.allowedSaveInterval = allowedSaveInterval;\r\n  }\r\n  save() {\r\n    if (Date.now() - this.lastSaveTime > this.allowedSaveInterval) {\r\n      saveData();\r\n      this.lastSaveTime = Date.now();\r\n    }\r\n  }\r\n}\r\n\r\nexport const waitForElement = async (\r\n  selector: string,\r\n  options: { childCheck?: boolean } = {}\r\n): Promise<Element> => {\r\n  return new Promise((resolve) => {\r\n    const element = document.querySelector(selector);\r\n    if (element) {\r\n      resolve(element);\r\n      return;\r\n    }\r\n\r\n    const observer = new MutationObserver(() => {\r\n      const target = document.querySelector(selector);\r\n      if (target && (!options.childCheck || target.childElementCount > 0)) {\r\n        observer.disconnect();\r\n        resolve(target);\r\n      }\r\n    });\r\n\r\n    observer.observe(document.body, { childList: true, subtree: true });\r\n  });\r\n};\r\nexport const generateUniqueID = (identifier?: string) => {\r\n  identifier = identifier || modIdentifier;\r\n  return `${identifier}_${Date.now()}_${Math.random()\r\n    .toString(36)\r\n    .substr(2, 9)}`;\r\n};\r\n// similar to saver but limits how often a function can be called\r\nexport class Debouncer {\r\n  private lastCallTime: number = 0;\r\n  private allowedCallInterval: number;\r\n  constructor(allowedCallInterval: number) {\r\n    this.allowedCallInterval = allowedCallInterval;\r\n  }\r\n  check(): boolean {\r\n    if (Date.now() - this.lastCallTime > this.allowedCallInterval) {\r\n      this.lastCallTime = Date.now();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  reset() {\r\n    this.lastCallTime = 0;\r\n  }\r\n  isReady() {\r\n    return Date.now() - this.lastCallTime > this.allowedCallInterval;\r\n  }\r\n}\r\n","import {\r\n  ChangeDiaperRequestEntry,\r\n  PluginServerChatRoomMessage,\r\n} from \"../types/types\";\r\nimport { generateUniqueID } from \"./utils\";\r\n\r\nexport const pendingRequests: Map<string, PendingRequest> = new Map();\r\nexport class PendingRequest {\r\n  target: number;\r\n  state: \"pending\" | \"accepted\" | \"rejected\" | \"timedout\" | \"cancelled\";\r\n  type: string;\r\n  id: string;\r\n  timeout: number;\r\n  requestTime: number = Date.now();\r\n  constructor(target: number, type: string, timeout: number = 10000) {\r\n    this.target = target;\r\n    this.state = \"pending\";\r\n    this.type = type;\r\n    this.id = generateUniqueID(type);\r\n    this.timeout = timeout;\r\n    pendingRequests.set(this.id, this);\r\n    setTimeout(() => {\r\n      if (this.state !== \"pending\") return;\r\n      this.state = \"timedout\";\r\n      this.sync();\r\n    }, timeout);\r\n    this.sync();\r\n  }\r\n  sync() {\r\n    const message: PluginServerChatRoomMessage = {\r\n      Type: \"Hidden\",\r\n      Content: `${modIdentifier}Msg`,\r\n      Sender: Player.MemberNumber,\r\n      Target: this.target,\r\n      Dictionary: [\r\n        {\r\n          message: {\r\n            type: this.type,\r\n            state: this.state,\r\n            id: this.id,\r\n          } as ChangeDiaperRequestEntry,\r\n        },\r\n      ],\r\n    };\r\n    ServerSend(\"ChatRoomChat\", message as ServerChatRoomMessage);\r\n  }\r\n  cancel() {\r\n    this.state = \"cancelled\";\r\n    this.sync();\r\n  }\r\n}\r\n","import { bcModSDK, generateUniqueID } from \"../utils\";\r\nimport { abclPlayer } from \"./player\";\r\n\r\nexport class ABCLStatsWindow {\r\n  statsWindow: HTMLElement;\r\n  minimizeButton: HTMLButtonElement;\r\n  closeButton: HTMLButtonElement;\r\n  openButton: HTMLButtonElement;\r\n  folded: boolean = false;\r\n  constructor() {\r\n    document.addEventListener(\"click\", () => {\r\n      if (CurrentScreen !== \"ChatRoom\") {\r\n        this.close();\r\n        this.openButton.style.display = \"none\";\r\n      } else {\r\n        this.openButton.style.display = \"block\";\r\n      }\r\n    });\r\n    this.openButton = document.createElement(\"button\");\r\n    this.openButton.classList.add(`${modIdentifier}OpenStatsButton`);\r\n    this.openButton.textContent = \"ABCL Stats\";\r\n    overlay.appendChild(this.openButton);\r\n\r\n    this.statsWindow = document.createElement(\"div\");\r\n    new MovableElement(this.statsWindow);\r\n\r\n    this.statsWindow.classList.add(`${modIdentifier}StatsWindow`);\r\n    this.statsWindow.innerHTML = `\r\n    <div class=\"${modIdentifier}WindowHeader\">\r\n    <p class=\"${modIdentifier}WindowHeaderTitle\">Stats</p>\r\n    <button class=\"${modIdentifier}WindowMinimize\"></button>\r\n    <button class=\"${modIdentifier}WindowClose\">X</button>\r\n    </div>\r\n\t\t<div class=\"${modIdentifier}StatsWindowContent\">\r\n\t\t\t<ol class=\"${modIdentifier}StatsWindowList\">  \r\n      ${this.getStatsListElement(\"SoilinessPercentage\", \"Soiled-ness\")}\r\n      ${this.getStatsListElement(\"WetnessPercentage\", \"Wetness\")} \r\n      ${this.getStatsListElement(\"BowelFullness\", \"Bowel\")}\r\n      ${this.getStatsListElement(\"BladderFullness\", \"Bladder\")}\r\n      ${this.getStatsListElement(\"Incontinence\", \"Incontinence\")}\r\n      ${this.getStatsListElement(\"MentalRegression\", \"Mental Regression\")}\r\n      </ol>\r\n\t\t</div>\r\n\t`;\r\n\r\n    this.minimizeButton = this.statsWindow.querySelector(\r\n      `.${modIdentifier}WindowMinimize`\r\n    )!;\r\n    this.closeButton = this.statsWindow.querySelector(\r\n      `.${modIdentifier}WindowClose`\r\n    )!;\r\n\r\n    this.minimizeButton.addEventListener(\"click\", () => this.fold());\r\n    overlay.appendChild(this.statsWindow);\r\n    this.openButton.addEventListener(\"click\", () => {\r\n      if (this.statsWindow.classList.contains(`${modIdentifier}Hidden`)) {\r\n        this.open();\r\n      } else {\r\n        this.close();\r\n      }\r\n    });\r\n    this.closeButton.addEventListener(\"click\", () => this.close());\r\n    this.update();\r\n  }\r\n  close() {\r\n    this.statsWindow.classList.add(`${modIdentifier}Hidden`);\r\n  }\r\n  open() {\r\n    this.statsWindow.classList.remove(`${modIdentifier}Hidden`);\r\n    this.statsWindow.style.top = \"0px\";\r\n    this.statsWindow.style.left = \"0px\";\r\n  }\r\n  fold() {\r\n    this.statsWindow.classList.toggle(`${modIdentifier}StatsWindowFolded`);\r\n    this.minimizeButton.textContent = this.folded ? \"\" : \"\";\r\n    this.folded = !this.folded;\r\n  }\r\n  getStatsListElement(className: string, title: string): string {\r\n    return `\r\n\t\t\t\t<li class=\"${modIdentifier}StatsWindowListItem ${modIdentifier}${className}\"> ${title}\r\n        <p></p>\r\n        <input type=\"range\" min=\"0\" max=\"100\" class=\"${modIdentifier}StatsWindowSlider ${modIdentifier}${className}Slider\" readonly>\r\n        </li>\r\n      `;\r\n  }\r\n  async update() {\r\n    const updateInput = (className: string, value: number) => {\r\n      this.statsWindow\r\n        .querySelector<HTMLInputElement>(`.${modIdentifier}${className} input`)\r\n        ?.setAttribute(\"value\", `${value * 100}`);\r\n      const paragraphElement =\r\n        this.statsWindow.querySelector<HTMLParagraphElement>(\r\n          `.${modIdentifier}${className} p`\r\n        );\r\n      if (paragraphElement) {\r\n        paragraphElement.textContent = `${Math.floor(value * 1000) / 10}%`;\r\n      }\r\n    };\r\n\r\n    updateInput(\"SoilinessPercentage\", abclPlayer.stats.SoilinessPercentage);\r\n    updateInput(\"WetnessPercentage\", abclPlayer.stats.WetnessPercentage);\r\n    updateInput(\"BowelFullness\", abclPlayer.stats.BowelFullness);\r\n    updateInput(\"BladderFullness\", abclPlayer.stats.BladderFullness);\r\n    updateInput(\"Incontinence\", abclPlayer.stats.Incontinence);\r\n    updateInput(\"MentalRegression\", abclPlayer.stats.MentalRegression);\r\n  }\r\n}\r\nclass MovableElement {\r\n  newX: number = 0;\r\n  newY: number = 0;\r\n  oldX: number = 0;\r\n  oldY: number = 0;\r\n  element: HTMLElement;\r\n  isDragging: boolean = false;\r\n  isResizing: boolean = false;\r\n  resizeDirection: string | null = null;\r\n  edgeThreshold: number = 10; // Distance from the edge to trigger resizing\r\n  resizable: boolean = true;\r\n\r\n  constructor(element: HTMLElement, resizable: boolean = false) {\r\n    this.element = element;\r\n    this.resizable = resizable;\r\n    // Bind methods to the instance\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onMouseEnter = this.onMouseEnter.bind(this);\r\n    this.onMouseLeave = this.onMouseLeave.bind(this);\r\n    this.onMouseMoveForCursor = this.onMouseMoveForCursor.bind(this);\r\n\r\n    this.element.addEventListener(\"mousedown\", this.onMouseDown);\r\n\r\n    this.element.addEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n    this.element.style.position = \"fixed\";\r\n\r\n    if (!this.resizable) {\r\n      return;\r\n    }\r\n    this.element.style.resize = \"none\";\r\n    this.element.addEventListener(\"mouseenter\", this.onMouseEnter);\r\n    this.element.addEventListener(\"mouseleave\", this.onMouseLeave);\r\n  }\r\n\r\n  onMouseEnter(event: MouseEvent) {\r\n    // Add mousemove listener for cursor updates\r\n    this.element.addEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n  }\r\n\r\n  onMouseLeave(event: MouseEvent) {\r\n    // Remove mousemove listener and reset cursor\r\n    this.element.removeEventListener(\"mousemove\", this.onMouseMoveForCursor);\r\n    this.element.style.cursor = \"default\";\r\n  }\r\n\r\n  onMouseMoveForCursor(event: MouseEvent) {\r\n    // Update cursor based on mouse position\r\n    const { offsetX, offsetY } = event;\r\n    const { offsetWidth, offsetHeight } = this.element;\r\n    if (!this.resizable) return;\r\n    if (offsetX < this.edgeThreshold) {\r\n      this.element.style.cursor = \"ew-resize\"; // Left edge\r\n    } else if (offsetX > offsetWidth - this.edgeThreshold) {\r\n      this.element.style.cursor = \"ew-resize\"; // Right edge\r\n    } else if (offsetY < this.edgeThreshold) {\r\n      this.element.style.cursor = \"ns-resize\"; // Top edge\r\n    } else if (offsetY > offsetHeight - this.edgeThreshold) {\r\n      this.element.style.cursor = \"ns-resize\"; // Bottom edge\r\n    } else {\r\n      this.element.style.cursor = \"default\";\r\n    }\r\n  }\r\n\r\n  onMouseDown(event: MouseEvent) {\r\n    const { offsetX, offsetY } = event;\r\n    const { offsetWidth, offsetHeight } = this.element;\r\n\r\n    // Determine if resizing or dragging\r\n    if (this.resizable) {\r\n      if (offsetX < this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"left\";\r\n      } else if (offsetX > offsetWidth - this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"right\";\r\n      } else if (offsetY < this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"top\";\r\n      } else if (offsetY > offsetHeight - this.edgeThreshold) {\r\n        this.isResizing = true;\r\n        this.resizeDirection = \"bottom\";\r\n      } else {\r\n        this.isDragging = true;\r\n      }\r\n    } else {\r\n      this.isDragging = true;\r\n    }\r\n\r\n    if (this.isDragging || this.isResizing) {\r\n      event.preventDefault();\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n      document.addEventListener(\"mousemove\", this.onMouseMove);\r\n      document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    }\r\n  }\r\n\r\n  onMouseMove(event: MouseEvent) {\r\n    if (this.isDragging) {\r\n      // Dragging logic\r\n      this.newX = this.oldX - event.clientX;\r\n      this.newY = this.oldY - event.clientY;\r\n\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n\r\n      this.element.style.top = `${this.element.offsetTop - this.newY}px`;\r\n      this.element.style.left = `${this.element.offsetLeft - this.newX}px`;\r\n    } else if (this.isResizing) {\r\n      // Resizing logic\r\n      const deltaX = event.clientX - this.oldX;\r\n      const deltaY = event.clientY - this.oldY;\r\n\r\n      const style = getComputedStyle(this.element);\r\n      const left = parseInt(style.left, 10);\r\n      const top = parseInt(style.top, 10);\r\n      const width = parseInt(style.width, 10);\r\n      const height = parseInt(style.height, 10);\r\n\r\n      switch (this.resizeDirection) {\r\n        case \"left\":\r\n          this.element.style.width = `${width - deltaX}px`;\r\n          this.element.style.left = `${left + deltaX / 2}px`;\r\n          break;\r\n        case \"right\":\r\n          this.element.style.width = `${width + deltaX}px`;\r\n          this.element.style.left = `${left + deltaX / 2}px`;\r\n          break;\r\n        case \"top\":\r\n          this.element.style.height = `${height - deltaY}px`;\r\n          this.element.style.top = `${top + deltaY / 2}px`;\r\n          break;\r\n        case \"bottom\":\r\n          this.element.style.height = `${height + deltaY}px`;\r\n          this.element.style.top = `${top + deltaY / 2}px`;\r\n          break;\r\n      }\r\n\r\n      this.oldX = event.clientX;\r\n      this.oldY = event.clientY;\r\n    }\r\n  }\r\n\r\n  onMouseUp(event: MouseEvent) {\r\n    event.preventDefault();\r\n    // Clean up\r\n    this.isDragging = false;\r\n    this.isResizing = false;\r\n    this.resizeDirection = null;\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  }\r\n}\r\n\r\nexport class ABCLNotification {\r\n  message: string;\r\n  duration: number;\r\n  constructor(message: string, duration: number = 3000) {\r\n    this.message = message;\r\n    this.duration = duration;\r\n    this.show();\r\n  }\r\n\r\n  show() {\r\n    const notification = document.createElement(\"div\");\r\n    notification.classList.add(`${modIdentifier}Notification`);\r\n    notification.textContent = this.message;\r\n\r\n    const closeButton = document.createElement(\"button\");\r\n    closeButton.classList.add(\"ABCLClose\");\r\n    closeButton.textContent = \"X\";\r\n    closeButton.addEventListener(\"click\", () => notification.remove());\r\n\r\n    notification.appendChild(closeButton);\r\n    overlay.appendChild(notification);\r\n\r\n    setTimeout(() => {\r\n      notification.remove();\r\n    }, this.duration);\r\n  }\r\n}\r\n\r\nexport class ABCLYesNoPrompt {\r\n  message: string;\r\n  onAccept: (...args: any) => void;\r\n  onDeny: (...args: any) => void;\r\n  id: string;\r\n  prompt: HTMLElement = document.createElement(\"div\");\r\n  constructor(\r\n    message: string,\r\n    onAccept: () => void,\r\n    onDeny: () => void,\r\n    timeout: number = -1\r\n  ) {\r\n    new MovableElement(this.prompt);\r\n    this.id = generateUniqueID();\r\n    this.message = message;\r\n    this.onAccept = onAccept;\r\n    this.onDeny = onDeny;\r\n    this.show();\r\n    if (timeout === -1) return;\r\n    setTimeout(() => {\r\n      this.prompt.remove();\r\n    }, timeout);\r\n  }\r\n\r\n  show() {\r\n    this.prompt.classList.add(`${modIdentifier}Prompt`);\r\n    this.prompt.id = this.id;\r\n    this.prompt.innerHTML = `<p>${this.message}</p><button class=\"${modIdentifier}PromptNo ${modIdentifier}Button\">Deny</button><button class=\"${modIdentifier}PromptYes ${modIdentifier}Button\">Accept</button>`;\r\n    overlay.appendChild(this.prompt);\r\n    this.prompt\r\n      .querySelector(`#${this.id} .${modIdentifier}PromptYes`)\r\n      ?.addEventListener(\"click\", () => {\r\n        this.onAccept();\r\n        this.prompt.remove();\r\n      });\r\n    this.prompt\r\n      .querySelector(`#${this.id} .${modIdentifier}PromptNo`)\r\n      ?.addEventListener(\"click\", () => {\r\n        this.onDeny();\r\n        this.prompt.remove();\r\n      });\r\n  }\r\n}\r\n\r\n// like in cookie clicker how numbers float up\r\nexport class ABCLTextParticle {\r\n  element: HTMLElement = document.createElement(\"div\");\r\n  color: string = \"white\";\r\n  size: number = 1;\r\n  speed: number = 1;\r\n  x: number = 0;\r\n  y: number = 0;\r\n\r\n  constructor(\r\n    element: HTMLElement | string,\r\n    options: { size?: number; speed?: number; x: number; y: number } = {\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n    color: string = \"white\"\r\n  ) {\r\n    if (typeof element === \"string\") {\r\n      this.element.innerHTML = element;\r\n    } else {\r\n      this.element = element;\r\n    }\r\n    this.speed = options.speed || 1;\r\n    this.size = options.size || 1;\r\n    this.x = options.x;\r\n    this.y = options.y;\r\n    this.element.classList.add(`${modIdentifier}TextParticle`);\r\n    this.element.style.color = color;\r\n    this.element.style.fontSize = `${options.size}px`;\r\n    this.element.style.left = `${options.x}px`;\r\n    this.element.style.top = `${options.y}px`;\r\n    overlay.appendChild(this.element);\r\n    setInterval(() => this.render(), 1000 / 30);\r\n  }\r\n  render() {\r\n    this.element.style.top = `${\r\n      parseInt(this.element.style.top) - this.speed\r\n    }px`;\r\n    if (parseInt(this.element.style.top) < 0) {\r\n      this.element.remove();\r\n    }\r\n  }\r\n}\r\n\r\nexport const overlay = document.createElement(\"div\");\r\nexport let abclStatsWindow: ABCLStatsWindow;\r\noverlay.classList.add(`${modIdentifier}Overlay`);\r\n\r\nexport const initOverlay = () => {\r\n  setTimeout(() => {\r\n    abclStatsWindow = new ABCLStatsWindow();\r\n\r\n    bcModSDK.hookFunction(\r\n      \"ChatRoomCharacterViewDrawOverlay\",\r\n      1,\r\n      (args, next) => {\r\n        next(args);\r\n        const [C, CharX, CharY, Zoom] = args;\r\n        if (C.MemberNumber === Player.MemberNumber) {\r\n          const [X, Y] = [CharX + 150 * Zoom, CharY + 400 * Zoom];\r\n\r\n          abclStatsWindow.openButton.style.top = `${Y}px`;\r\n          abclStatsWindow.openButton.style.left = `${X}px`;\r\n        }\r\n      }\r\n    );\r\n    document.body.appendChild(overlay);\r\n  }, 1500);\r\n};\r\n","import { merge } from \"lodash-es\";\r\nimport { mutateData } from \"../settings\";\r\nimport { Debouncer, Saver, sendChatLocal } from \"../utils\";\r\nimport {\r\n  getAccidentThreshold,\r\n  getPlayerDiaperSize,\r\n  mentalRegressionOnAccident,\r\n  mentalRegressionOvertime,\r\n  updateDiaperColor,\r\n} from \"./diaper\";\r\nimport { abclStatsWindow } from \"./ui\";\r\nimport { PermissionLevels } from \"../../types/types\";\r\n\r\nconst metabolismValues: Map<MetabolismSettingValues, number> = new Map([\r\n  [\"Slow\", 0.5], // 40 min\r\n  [\"Normal\", 1], // 20 min\r\n  [\"Fast\", 1.5], // 13.3 min\r\n  [\"Faster\", 2], // 10 min\r\n  [\"Fastest\", 3], // 6.6 min\r\n]);\r\n\r\nexport const abclPlayer = {\r\n  onAccident: () => {\r\n    abclPlayer.stats.MentalRegression += mentalRegressionOnAccident();\r\n  },\r\n  update: () => {\r\n    // once per minute\r\n    abclPlayer.stats.MentalRegression += mentalRegressionOvertime();\r\n    abclPlayer.stats.BladderValue +=\r\n      abclPlayer.stats.WaterIntake * abclPlayer.settings.MetabolismValue;\r\n    abclPlayer.stats.BowelValue +=\r\n      abclPlayer.stats.FoodIntake * abclPlayer.settings.MetabolismValue;\r\n\r\n    abclPlayer.attemptWetting();\r\n    abclPlayer.attemptSoiling();\r\n    playerSaver.save();\r\n  },\r\n  attemptWetting: () => {\r\n    if (\r\n      !abclPlayer.settings.DisableWetting &&\r\n      ((incontinenceCheck.check() &&\r\n        getAccidentThreshold(\r\n          abclPlayer.stats.Incontinence,\r\n          abclPlayer.stats.BladderFullness\r\n        ) > Math.random()) ||\r\n        abclPlayer.stats.BladderFullness >=\r\n          getAccidentThreshold(abclPlayer.stats.Incontinence, 1))\r\n    ) {\r\n      MiniGameStart(\r\n        \"WetMinigame\",\r\n        20 *\r\n          getAccidentThreshold(\r\n            abclPlayer.stats.Incontinence,\r\n            abclPlayer.stats.BladderFullness\r\n          ),\r\n        \"noOp\"\r\n      );\r\n    }\r\n  },\r\n  attemptSoiling: () => {\r\n    if (\r\n      !abclPlayer.settings.DisableSoiling &&\r\n      ((incontinenceCheck.check() &&\r\n        getAccidentThreshold(\r\n          abclPlayer.stats.Incontinence,\r\n          abclPlayer.stats.BowelFullness\r\n        ) > Math.random()) ||\r\n        abclPlayer.stats.BowelFullness >=\r\n          getAccidentThreshold(abclPlayer.stats.Incontinence, 1))\r\n    ) {\r\n      MiniGameStart(\r\n        \"MessMinigame\",\r\n        20 *\r\n          getAccidentThreshold(\r\n            abclPlayer.stats.Incontinence,\r\n            abclPlayer.stats.BowelFullness\r\n          ),\r\n        \"noOp\"\r\n      );\r\n    }\r\n  },\r\n  releaseBladder: () => {\r\n    const isTooEarly = abclPlayer.stats.BladderFullness < 0.3;\r\n    const isPossible = !isTooEarly;\r\n    const isGood = abclPlayer.stats.BladderFullness > 0.6;\r\n    if (isTooEarly) {\r\n      sendChatLocal(\"You try to pee, but it doesn't seem to be working.\");\r\n      return;\r\n    }\r\n    if (isPossible) {\r\n      abclPlayer.stats.WetnessValue += abclPlayer.stats.BladderValue;\r\n      abclPlayer.stats.BladderFullness = 0;\r\n      sendChatLocal(\"You feel a sense of release as you let go.\");\r\n    }\r\n    if (isGood) {\r\n      abclPlayer.stats.Incontinence -= 0.02;\r\n    } else {\r\n      abclPlayer.stats.Incontinence += 0.02;\r\n    }\r\n  },\r\n  releaseBowel: () => {\r\n    const isTooEarly = abclPlayer.stats.BowelFullness < 0.3;\r\n    const isPossible = !isTooEarly;\r\n    const isGood = abclPlayer.stats.BowelFullness > 0.6;\r\n    if (isTooEarly) {\r\n      sendChatLocal(\"You try to let go, but nothing seems to happen.\");\r\n      return;\r\n    }\r\n    if (isPossible) {\r\n      abclPlayer.stats.SoilinessValue += abclPlayer.stats.BowelValue;\r\n      abclPlayer.stats.BowelFullness = 0;\r\n      sendChatLocal(\"You feel a little relief as you let go.\");\r\n    }\r\n    if (isGood) {\r\n      abclPlayer.stats.Incontinence -= 0.02;\r\n    } else {\r\n      abclPlayer.stats.Incontinence += 0.02;\r\n    }\r\n  },\r\n\r\n  stats: {\r\n    set MentalRegression(value: number) {\r\n      if (value < 0) value = 0;\r\n      if (value > 1) value = 1;\r\n      Player[modIdentifier].Stats.MentalRegression.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get MentalRegression() {\r\n      return Player[modIdentifier].Stats.MentalRegression.value;\r\n    },\r\n    set Incontinence(value: number) {\r\n      if (value < 0) value = 0;\r\n      if (value > 1) value = 1;\r\n      Player[modIdentifier].Stats.Incontinence.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get Incontinence() {\r\n      return Player[modIdentifier].Stats.Incontinence.value;\r\n    },\r\n\r\n    // intake\r\n    set WaterIntake(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.WaterIntake.value = value;\r\n    },\r\n    get WaterIntake() {\r\n      return Player[modIdentifier].Stats.WaterIntake.value;\r\n    },\r\n    set FoodIntake(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.FoodIntake.value = value;\r\n    },\r\n    get FoodIntake() {\r\n      return Player[modIdentifier].Stats.FoodIntake.value;\r\n    },\r\n\r\n    // bladder\r\n\r\n    set BladderValue(value: number) {\r\n      if (abclPlayer.settings.DisableWetting) return;\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bladder.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderValue() {\r\n      return Player[modIdentifier].Stats.Bladder.value;\r\n    },\r\n    set BladderSize(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bladder.size = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderSize(): number {\r\n      return Player[modIdentifier].Stats.Bladder.size;\r\n    },\r\n    set WetnessValue(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Wetness.value = value;\r\n      updateDiaperColor();\r\n      abclStatsWindow.update();\r\n    },\r\n    get WetnessValue() {\r\n      return Player[modIdentifier].Stats.Wetness.value;\r\n    },\r\n    // computed\r\n    set BladderFullness(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.BladderValue = value * this.BladderSize;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BladderFullness(): number {\r\n      return this.BladderValue / this.BladderSize;\r\n    },\r\n\r\n    // bowel\r\n    set BowelValue(value: number) {\r\n      if (abclPlayer.settings.DisableSoiling) return;\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bowel.value = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelValue() {\r\n      return Player[modIdentifier].Stats.Bowel.value;\r\n    },\r\n\r\n    set BowelSize(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Bowel.size = value;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelSize(): number {\r\n      return Player[modIdentifier].Stats.Bowel.size;\r\n    },\r\n    set SoilinessValue(value: number) {\r\n      if (value < 0) value = 0;\r\n      Player[modIdentifier].Stats.Soiliness.value = value;\r\n      updateDiaperColor();\r\n      abclStatsWindow.update();\r\n    },\r\n    get SoilinessValue() {\r\n      return Player[modIdentifier].Stats.Soiliness.value;\r\n    },\r\n    // computed\r\n    set BowelFullness(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.BowelValue = value * this.BowelSize;\r\n      abclStatsWindow.update();\r\n    },\r\n    get BowelFullness(): number {\r\n      return this.BowelValue / this.BowelSize;\r\n    },\r\n\r\n    get SoilinessPercentage(): number {\r\n      return this.SoilinessValue / getPlayerDiaperSize();\r\n    },\r\n    set SoilinessPercentage(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.SoilinessValue = value * getPlayerDiaperSize();\r\n    },\r\n    get WetnessPercentage(): number {\r\n      return this.WetnessValue / getPlayerDiaperSize();\r\n    },\r\n    set WetnessPercentage(value: number) {\r\n      if (value < 0) value = 0;\r\n      this.WetnessValue = value * getPlayerDiaperSize();\r\n    },\r\n  },\r\n  settings: {\r\n    set Metabolism(value: MetabolismSettingValues) {\r\n      Player[modIdentifier].Settings.Metabolism.value = value;\r\n      playerSaver.save();\r\n    },\r\n    set DisableWetting(value: boolean) {\r\n      Player[modIdentifier].Settings.DisableWetting.value = value;\r\n      playerSaver.save();\r\n    },\r\n    set DisableSoiling(value: boolean) {\r\n      Player[modIdentifier].Settings.DisableSoiling.value = value;\r\n      playerSaver.save();\r\n    },\r\n    addCaregiver(id: number) {\r\n      Player[modIdentifier] = merge(Player[modIdentifier], {\r\n        Settings: {\r\n          CaregiverIDs: {\r\n            value: [...Player[modIdentifier].Settings.CaregiverIDs.value, id],\r\n          },\r\n        },\r\n      });\r\n      playerSaver.save();\r\n    },\r\n    removeCaregiver(id: number) {\r\n      Player[modIdentifier] = merge(Player[modIdentifier], {\r\n        Settings: {\r\n          CaregiverIDs: {\r\n            value: Player[modIdentifier].Settings.CaregiverIDs.value.filter(\r\n              (x) => x !== id\r\n            ),\r\n          },\r\n        },\r\n      });\r\n      playerSaver.save();\r\n    },\r\n    set OpenRemoteSettings(value: boolean) {\r\n      Player[modIdentifier].Settings.OpenRemoteSettings.value = value;\r\n      playerSaver.save();\r\n    },\r\n    get Metabolism(): MetabolismSettingValues {\r\n      return Player[modIdentifier].Settings.Metabolism.value;\r\n    },\r\n    get MetabolismValue(): number {\r\n      const metabolism = metabolismValues.get(\r\n        Player[modIdentifier].Settings.Metabolism.value\r\n      );\r\n      if (typeof metabolism == \"undefined\") {\r\n        throw new Error(\"Invalid metabolism value\");\r\n      }\r\n      return metabolism;\r\n    },\r\n    get DisableWetting(): boolean {\r\n      return Player[modIdentifier].Settings.DisableWetting.value;\r\n    },\r\n    get DisableSoiling(): boolean {\r\n      return Player[modIdentifier].Settings.DisableSoiling.value;\r\n    },\r\n    get CaregiverIDs(): number[] {\r\n      return Player[modIdentifier].Settings.CaregiverIDs.value;\r\n    },\r\n    get OpenRemoteSettings(): boolean {\r\n      return Player[modIdentifier].Settings.OpenRemoteSettings.value;\r\n    },\r\n  },\r\n};\r\n\r\nconst playerSaver = new Saver(2 * 60 * 1000);\r\n\r\nconst incontinenceCheck = new Debouncer(2 * 60 * 1000);\r\n\r\n(window as any).abclPlayer = abclPlayer;\r\n","import { ABCLdata } from \"../../main\";\r\nimport { PendingRequest } from \"../pendingRequest\";\r\nimport { abclPlayer } from \"./player\";\r\n\r\n// Is/Has\r\nexport const isLeaking = (type: \"pee\" | \"poop\" | \"any\" = \"any\") => {\r\n  const diaperSize = getPlayerDiaperSize();\r\n  if (type === \"pee\") {\r\n    return abclPlayer.stats.WetnessValue >= diaperSize;\r\n  }\r\n  if (type === \"poop\") {\r\n    return abclPlayer.stats.SoilinessValue >= diaperSize;\r\n  }\r\n  return (\r\n    abclPlayer.stats.SoilinessValue >= diaperSize ||\r\n    abclPlayer.stats.WetnessValue >= diaperSize\r\n  );\r\n};\r\nexport const isDiaperDirty = () => {\r\n  const diaperSize = getPlayerDiaperSize();\r\n  return (\r\n    abclPlayer.stats.SoilinessValue + abclPlayer.stats.WetnessValue >=\r\n    diaperSize / 2\r\n  );\r\n};\r\nexport const isDiaper = (item: Item): boolean => {\r\n  return (\r\n    item.Asset.Description.toLowerCase().includes(\"diaper\") &&\r\n    item.Asset.Description in ABCLdata.Diapers\r\n  );\r\n};\r\nexport function hasDiaper(player: Character = Player): boolean {\r\n  if (!player) return false;\r\n  const pelvisItem = InventoryGet(player, \"ItemPelvis\");\r\n  const panties = InventoryGet(player, \"Panties\");\r\n  return Boolean(\r\n    (pelvisItem && isDiaper(pelvisItem)) || (panties && isDiaper(panties))\r\n  );\r\n}\r\nexport const isWearingBabyClothes = () => {\r\n  return Player.Appearance.some((clothing) => {\r\n    return ABCLdata.BabyClothes.includes(clothing.Asset.Description);\r\n  });\r\n};\r\n\r\n// Color\r\nexport function averageColor(\r\n  color_1: HexColor,\r\n  color_2: HexColor,\r\n  ratio: number = 0.5\r\n): HexColor {\r\n  let rgb_1 = DrawHexToRGB(color_1);\r\n  let rgb_2 = DrawHexToRGB(color_2);\r\n  let avgRgb: RGBColor = {\r\n    r: Math.round(rgb_1.r * ratio + rgb_2.r * (1 - ratio)),\r\n    g: Math.round(rgb_1.g * ratio + rgb_2.g * (1 - ratio)),\r\n    b: Math.round(rgb_1.b * ratio + rgb_2.b * (1 - ratio)),\r\n  };\r\n  return DrawRGBToHex([avgRgb.r, avgRgb.g, avgRgb.b]);\r\n}\r\nexport function mixLevels(\r\n  level: number,\r\n  highLevel: string,\r\n  midLevel: string,\r\n  lowLevel: string\r\n): string {\r\n  if (level > 0.75) {\r\n    return level > 0.9\r\n      ? highLevel\r\n      : averageColor(highLevel, midLevel, level - 0.75);\r\n  } else {\r\n    return averageColor(midLevel, lowLevel, level);\r\n  }\r\n}\r\n\r\nexport const setDiaperColor = (\r\n  slot: AssetGroupName,\r\n  primaryColor: string,\r\n  secondaryColor: string,\r\n  player: PlayerCharacter = Player\r\n) => {\r\n  const item = InventoryGet(player, slot);\r\n  if (item && isDiaper(item)) {\r\n    const type = typeof item.Asset.DefaultColor;\r\n    const diaper =\r\n      ABCLdata.Diapers[item.Asset.Description as keyof typeof ABCLdata.Diapers];\r\n\r\n    if (type !== typeof item.Color) {\r\n      item.Color = item.Asset.DefaultColor as ItemColor;\r\n    }\r\n    if (type === \"object\" && JSON.stringify(item.Color).includes('\"Default\"')) {\r\n      item.Color = JSON.parse(\r\n        JSON.stringify(item.Color).replaceAll(/\"Default\"/g, '\"#FFFFFF\"')\r\n      );\r\n    }\r\n    const color: string[] = (item.Color ?? item.Asset.DefaultColor) as string[];\r\n    if (\"primaryColor\" in diaper) {\r\n      color[diaper.primaryColor] = primaryColor;\r\n    }\r\n    if (\"secondaryColor\" in diaper) {\r\n      color[diaper.secondaryColor] = secondaryColor;\r\n    }\r\n    item.Color = color;\r\n  }\r\n};\r\nexport const updateDiaperColor = () => {\r\n  const messLevel = abclPlayer.stats.SoilinessValue / getPlayerDiaperSize();\r\n  const wetLevel = abclPlayer.stats.WetnessValue / getPlayerDiaperSize();\r\n\r\n  const messColor = mixLevels(\r\n    messLevel,\r\n    ABCLdata.DiaperColors[\"maximummess\"],\r\n    ABCLdata.DiaperColors[\"middlemess\"],\r\n    ABCLdata.DiaperColors[\"clean\"]\r\n  );\r\n  const wetColor = mixLevels(\r\n    wetLevel,\r\n    ABCLdata.DiaperColors[\"maximumwet\"],\r\n    ABCLdata.DiaperColors[\"middlewet\"],\r\n    ABCLdata.DiaperColors[\"clean\"]\r\n  );\r\n\r\n  const primaryColor = averageColor(messColor, wetColor, 0.7);\r\n  const secondaryColor = averageColor(messColor, wetColor, 0.9);\r\n\r\n  setDiaperColor(\"ItemPelvis\", primaryColor, secondaryColor, Player);\r\n  setDiaperColor(\"Panties\", primaryColor, secondaryColor, Player);\r\n  CharacterRefresh(Player, true);\r\n  ChatRoomCharacterUpdate(Player);\r\n};\r\n\r\n// Size\r\nexport function getPlayerDiaperSize(player: PlayerCharacter = Player): number {\r\n  const pelvisItem = InventoryGet(player, \"ItemPelvis\");\r\n  const panties = InventoryGet(player, \"Panties\");\r\n  let size = 0;\r\n  if (pelvisItem && isDiaper(pelvisItem)) {\r\n    size += getDiaperSize(pelvisItem);\r\n  }\r\n  if (panties && isDiaper(panties)) {\r\n    size += getDiaperSize(panties);\r\n  }\r\n  return size;\r\n}\r\nexport function getDiaperSize(diaper: Item): number {\r\n  if (\r\n    diaper.Asset.Description === \"Poofy Chastity Diaper\" &&\r\n    diaper.Property?.TypeRecord?.typed === 1\r\n  ) {\r\n    return ABCLdata.DiaperSizeScale.heavy_adult;\r\n  }\r\n  return ABCLdata.DiaperSizeScale[\r\n    ABCLdata.Diapers[diaper.Asset.Description as keyof typeof ABCLdata.Diapers]\r\n      .size as keyof typeof ABCLdata.DiaperSizeScale\r\n  ];\r\n}\r\n\r\nexport const getPlayerDiaper = (): {\r\n  ItemPelvis: Item | null;\r\n  Panties: Item | null;\r\n} => {\r\n  const pelvisItem = InventoryGet(Player, \"ItemPelvis\");\r\n  const panties = InventoryGet(Player, \"Panties\");\r\n  let diapers: { ItemPelvis: Item | null; Panties: Item | null } = {\r\n    ItemPelvis: null,\r\n    Panties: null,\r\n  };\r\n  if (pelvisItem && isDiaper(pelvisItem)) {\r\n    diapers[\"ItemPelvis\"] = pelvisItem;\r\n  }\r\n  if (panties && isDiaper(panties)) {\r\n    diapers[\"Panties\"] = panties;\r\n  }\r\n  return diapers;\r\n};\r\n\r\n// incontinence\r\nexport function getAccidentThreshold(\r\n  incontinence: number,\r\n  fullness: number,\r\n  stressLevel: number = 0,\r\n  timeSinceLastAccident: number = 1\r\n): number {\r\n  const incontinenceWeight = 0.6;\r\n  const fullnessWeight = 0.8;\r\n  const stressWeight = 0.3;\r\n  const timeWeight = 0.2;\r\n\r\n  const baseThreshold =\r\n    incontinenceWeight * Math.pow(incontinence, 2) +\r\n    fullnessWeight * Math.pow(fullness, 3) +\r\n    stressWeight * stressLevel;\r\n\r\n  const timeFactor = 1 / (1 + timeSinceLastAccident * timeWeight);\r\n  const threshold = baseThreshold * timeFactor;\r\n\r\n  return Math.min(Math.max(threshold, 0), 1);\r\n}\r\n\r\n// mental regression\r\nexport const mentalRegressionBonus = () => {\r\n  const assetDescriptions = Player.Appearance.map(\r\n    (clothing) => clothing.Asset.Description\r\n  );\r\n  const matches = ABCLdata.BabyClothes.concat([\r\n    \"milk\",\r\n    \"pacifier\",\r\n    \"bib\",\r\n  ]).filter((description) =>\r\n    assetDescriptions.some((assetDescription) =>\r\n      assetDescription.toLocaleLowerCase().includes(description)\r\n    )\r\n  );\r\n  return Math.min(matches.length * 0.25, 1);\r\n};\r\nexport const mentalRegressionOvertime = () => {\r\n  // if wearing baby clothes, mental regression goes up\r\n  // if wet diaper, mental regression goes up\r\n  // if leaking, mental regression goes up a lot\r\n  let modifier = 0 + mentalRegressionBonus();\r\n  if (isWearingBabyClothes()) modifier += 1;\r\n  if (isDiaperDirty()) modifier += 0.25;\r\n  if (isLeaking()) modifier += 0.5;\r\n  return modifier / (150 * 60); // 150 hours till 100%\r\n};\r\n\r\nexport function incontinenceOnAccident(minutes: number) {\r\n  const stages = [\r\n    { time: 60 * 20, start: 0, end: 0.25 },\r\n    { time: 60 * 40, start: 0.25, end: 0.5 },\r\n    { time: 60 * 80, start: 0.5, end: 0.75 },\r\n    { time: 60 * 160, start: 0.75, end: 1 },\r\n  ];\r\n  for (const { time, start, end } of stages) {\r\n    if (\r\n      abclPlayer.stats.Incontinence >= start &&\r\n      abclPlayer.stats.Incontinence < end\r\n    ) {\r\n      return minutes / time;\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport const mentalRegressionOnAccident = () => {\r\n  const modifier = 1 + mentalRegressionBonus();\r\n  if (abclPlayer.stats.MentalRegression < 0.25) return modifier / 500;\r\n  if (\r\n    0.25 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 0.5 &&\r\n    isDiaperDirty()\r\n  )\r\n    return modifier / 500;\r\n  if (\r\n    0.5 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 0.75 &&\r\n    isLeaking()\r\n  )\r\n    return modifier / 1000;\r\n  if (\r\n    0.75 > abclPlayer.stats.MentalRegression &&\r\n    abclPlayer.stats.MentalRegression < 1 &&\r\n    isLeaking()\r\n  )\r\n    return modifier / 1500;\r\n  return 0;\r\n};\r\n\r\nexport const changeDiaper = (player: Character = Player) => {\r\n  const isSomeoneElse = player.MemberNumber !== Player.MemberNumber;\r\n  console.log(\"isSomeoneElse\", isSomeoneElse, player.MemberNumber);\r\n  if (isSomeoneElse && player.MemberNumber) {\r\n    new PendingRequest(player.MemberNumber, \"changeDiaper\", 999999);\r\n    return;\r\n  }\r\n\r\n  abclPlayer.stats.SoilinessValue = 0;\r\n  abclPlayer.stats.WetnessValue = 0;\r\n  updateDiaperColor();\r\n};\r\n","export function getCharacter(memberNumber: number): Character | null {\r\n  const character = ChatRoomCharacter.find(\r\n    (c) => c.MemberNumber === memberNumber\r\n  );\r\n\r\n  if (!character) {\r\n    return null;\r\n  }\r\n\r\n  if (character?.IsPlayer()) {\r\n    return character as PlayerCharacter;\r\n  }\r\n\r\n  return character as Character;\r\n}\r\n\r\nexport function getCharacterName(memberNumber: number | undefined): string {\r\n  if (!memberNumber) {\r\n    return \"Unknown\";\r\n  }\r\n  const character = getCharacter(memberNumber);\r\n\r\n  if (!character) {\r\n    return \"Unknown\";\r\n  }\r\n  return character.Nickname ? character.Nickname : character.Name;\r\n}\r\n","import {\r\n  SyncEntry,\r\n  PluginServerChatRoomMessage,\r\n  MessageEntry,\r\n  ChangeDiaperRequestEntry,\r\n} from \"../types/types\";\r\nimport { logger } from \"./logger\";\r\nimport { pendingRequests } from \"./pendingRequest\";\r\nimport { changeDiaper, updateDiaperColor } from \"./player/diaper\";\r\nimport { getCharacter, getCharacterName } from \"./player/playerUtils\";\r\nimport { ABCLYesNoPrompt } from \"./player/ui\";\r\nimport {\r\n  bcModSDK,\r\n  getMyMaxPermissionLevel,\r\n  sendChatLocal,\r\n  waitFor,\r\n} from \"./utils\";\r\n\r\nconst filterRestrictedSettings = (settings: ModSettings, target: Character) => {\r\n  const myHighestPermission = getMyMaxPermissionLevel(target);\r\n\r\n  return Object.entries(settings).reduce((acc, [key, value]) => {\r\n    if (value.permission.canView <= myHighestPermission) {\r\n      acc[key as keyof ModSettings] = value;\r\n    }\r\n    return acc;\r\n  }, {} as ModSettings);\r\n};\r\n\r\nexport const sendServerChatRoomMessage = (\r\n  message: MessageEntry\r\n): PluginServerChatRoomMessage => {\r\n  const ChatRoomMessage: PluginServerChatRoomMessage = {\r\n    Type: \"Hidden\",\r\n    Content: `${modIdentifier}Msg`,\r\n    Sender: Player.MemberNumber,\r\n    Dictionary: [\r\n      {\r\n        message: message,\r\n      },\r\n    ],\r\n  };\r\n\r\n  ServerSend(\"ChatRoomChat\", ChatRoomMessage as ServerChatRoomMessage);\r\n  return ChatRoomMessage;\r\n};\r\n/**\r\n * Sends an update of the player's settings to the specified target or to everyone in the chat room.\r\n *\r\n * @param {number} [target] - The MemberNumber of the target player. If not specified, the update is sent to all players.\r\n */\r\nexport const sendUpdateMyData = (target?: number) => {\r\n  const syncDataMessage: PluginServerChatRoomMessage =\r\n    sendServerChatRoomMessage({\r\n      type: \"sync\",\r\n      settings: Player[modIdentifier].Settings,\r\n      stats: Player[modIdentifier].Stats,\r\n      target,\r\n    });\r\n\r\n  logger.debug({\r\n    message: `Sending updated data to ${target ?? \"everyone\"}`,\r\n    data: syncDataMessage,\r\n  });\r\n};\r\n\r\n/**\r\n * Sends a request packet to other players in the chat room to retrieve their data.\r\n */\r\nexport const sendRequestOtherDataPacket = () => {\r\n  sendServerChatRoomMessage({\r\n    type: \"init\",\r\n  });\r\n\r\n  logger.debug(`Requesting data from others.`);\r\n};\r\n\r\n/**\r\n * Handles the \"sync\" packet received from other players, updating the local player's data with the received data.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst handleSyncPacket = (data: PluginServerChatRoomMessage) => {\r\n  if (!data.Sender) return;\r\n  const message = data.Dictionary?.[0]?.message as SyncEntry | undefined;\r\n  if (!message) return;\r\n  logger.debug({\r\n    message: `Received updated data`,\r\n    data,\r\n  });\r\n\r\n  const otherCharacter = getCharacter(data.Sender);\r\n  if (!otherCharacter) return;\r\n\r\n  otherCharacter[modIdentifier] = {\r\n    Settings: filterRestrictedSettings(message.settings, otherCharacter),\r\n    Stats: message.stats,\r\n  };\r\n};\r\n\r\n/**\r\n * Handles the \"init\" packet received from other players, sending the player's data to the requester.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst handleInitPacket = (data: PluginServerChatRoomMessage) => {\r\n  if (!data.Sender) return;\r\n  logger.debug(`Received request for data`);\r\n\r\n  sendUpdateMyData(data.Sender);\r\n};\r\n\r\n/**\r\n * Processes incoming packets and delegates them to the appropriate handler based on their type.\r\n *\r\n * @param {PluginServerChatRoomMessage} data - The message data received from the server.\r\n */\r\nconst receivePacket = (data: PluginServerChatRoomMessage) => {\r\n  if (data?.Content !== `${modIdentifier}Msg`) return;\r\n  if (!data.Sender || !data.Dictionary) return;\r\n  if (data.Sender === Player.MemberNumber) return;\r\n  if (data.Type !== \"Hidden\") return;\r\n  if (!data.Dictionary[0]?.message) return;\r\n\r\n  const message = data.Dictionary[0].message;\r\n  if (\"type\" in message) {\r\n    const type = message.type;\r\n    switch (type) {\r\n      case \"init\":\r\n        handleInitPacket(data);\r\n        break;\r\n      case \"sync\":\r\n        handleSyncPacket(data);\r\n        break;\r\n      case \"changeDiaper\":\r\n        console.log(pendingRequests.get(message.id));\r\n        let request = pendingRequests.get(message.id);\r\n        if (\r\n          !request &&\r\n          (message.state === \"accepted\" || message.state === \"rejected\")\r\n        )\r\n          return;\r\n\r\n        switch (message.state) {\r\n          case \"accepted\":\r\n            request!.state = \"accepted\";\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} accepted your change diaper request.`\r\n            );\r\n            break;\r\n          case \"rejected\":\r\n            request!.state = \"rejected\";\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} rejected your change diaper request.`\r\n            );\r\n            break;\r\n          case \"pending\":\r\n            new ABCLYesNoPrompt(\r\n              `${getCharacterName(data.Sender)} wants to change your diaper.`,\r\n              () => {\r\n                sendChatLocal(\r\n                  `${getCharacterName(data.Sender)} changed your diaper.`\r\n                );\r\n                changeDiaper();\r\n                sendServerChatRoomMessage({\r\n                  type: \"changeDiaper\",\r\n                  state: \"accepted\",\r\n                  id: message.id,\r\n                } as ChangeDiaperRequestEntry);\r\n              },\r\n              () => {\r\n                sendServerChatRoomMessage({\r\n                  type: \"changeDiaper\",\r\n                  state: \"rejected\",\r\n                  id: message.id,\r\n                } as ChangeDiaperRequestEntry);\r\n              },\r\n              10 * 1000\r\n            );\r\n            break;\r\n          case \"timedout\":\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )}'s change diaper request timed out.`\r\n            );\r\n            break;\r\n          case \"cancelled\":\r\n            sendChatLocal(\r\n              `${getCharacterName(\r\n                data.Sender\r\n              )} cancelled their change diaper request.`\r\n            );\r\n            break;\r\n        }\r\n\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Initializes hooks for intercepting chat room messages and synchronizing player data.\r\n * This function waits until the server is connected before setting up hooks.\r\n */\r\nconst initHooks = async () => {\r\n  await waitFor(() => ServerSocket && ServerIsConnected);\r\n\r\n  bcModSDK.hookFunction(\"ChatRoomSync\", 1, (args, next) => {\r\n    sendUpdateMyData(); // Tell everyone else to update their copy of our data, when we join a room.\r\n    return next(args);\r\n  });\r\n\r\n  bcModSDK.hookFunction(\"ChatRoomMessage\", 1, (args, next) => {\r\n    if (\r\n      args[0].Content === \"ServerEnter\" &&\r\n      args[0].Sender === Player.MemberNumber\r\n    ) {\r\n      // Announce (via an init packet) that we're ready to receive data models.\r\n      sendRequestOtherDataPacket();\r\n      return;\r\n    }\r\n\r\n    receivePacket(args[0] as PluginServerChatRoomMessage);\r\n    return next(args);\r\n  });\r\n  bcModSDK.hookFunction(\"CharacterAppearanceSetItem\", 1, (args, next) => {\r\n    let [_character, _slot, _asset] = args;\r\n    const _result = next(args);\r\n    updateDiaperColor();\r\n    return _result;\r\n  });\r\n};\r\n\r\nexport default initHooks;\r\n","export function drawCheckbox(\r\n  left: number,\r\n  top: number,\r\n  width: number,\r\n  height: number,\r\n  text: string,\r\n  isChecked: boolean,\r\n  isDisabled: boolean = false,\r\n  textColor = \"Black\",\r\n  textLeft: number = 200,\r\n  textTop: number = 45\r\n): void {\r\n  DrawText(text, left + textLeft, top + textTop, textColor, \"Gray\");\r\n  DrawButton(\r\n    left,\r\n    top,\r\n    width,\r\n    height,\r\n    \"\",\r\n    isDisabled ? \"#ebebe4\" : \"White\",\r\n    isChecked ? \"Icons/Checked.png\" : \"\",\r\n    undefined,\r\n    isDisabled\r\n  );\r\n}\r\n","import { drawCheckbox } from \"../../core/bcUI\";\r\nimport { abclPlayer } from \"../../core/player/player\";\r\nimport { defaultSettings } from \"../../core/settings\";\r\nimport { ModName } from \"../../types/definitions\";\r\nexport function getMetabolismValue(\r\n  value: MetabolismSettingValues,\r\n  next: boolean\r\n): MetabolismSettingValues {\r\n  if (next) {\r\n    const metabolismMap: Record<\r\n      MetabolismSettingValues,\r\n      MetabolismSettingValues\r\n    > = {\r\n      Slow: \"Normal\",\r\n      Normal: \"Fast\",\r\n      Fast: \"Faster\",\r\n      Faster: \"Fastest\",\r\n      Fastest: \"Slow\",\r\n    };\r\n    return metabolismMap[value];\r\n  }\r\n  const metabolismMap: Record<\r\n    MetabolismSettingValues,\r\n    MetabolismSettingValues\r\n  > = {\r\n    Slow: \"Fastest\",\r\n    Normal: \"Slow\",\r\n    Fast: \"Normal\",\r\n    Faster: \"Fast\",\r\n    Fastest: \"Faster\",\r\n  };\r\n  return metabolismMap[value];\r\n}\r\n\r\nexport const initSettingsScreen = async () => {\r\n  PreferenceRegisterExtensionSetting({\r\n    Identifier: modIdentifier,\r\n    ButtonText: `${ModName} Settings`,\r\n    Image: `${publicURL}/abcl.png`,\r\n    run: () => {\r\n      drawCheckbox(\r\n        150,\r\n        130,\r\n        65,\r\n        65,\r\n        \"Disable wetting\",\r\n        abclPlayer.settings.DisableWetting,\r\n        false,\r\n        \"black\",\r\n        360,\r\n        35\r\n      );\r\n      drawCheckbox(\r\n        150,\r\n        250,\r\n        65,\r\n        65,\r\n        \"Disable soiling\",\r\n        abclPlayer.settings.DisableSoiling,\r\n        false,\r\n        \"black\",\r\n        340,\r\n        35\r\n      );\r\n      DrawText(\r\n        \"Metabolism, the speed of your bladder/bowel filling up\",\r\n        560,\r\n        420,\r\n        \"black\"\r\n      );\r\n      DrawBackNextButton(\r\n        150,\r\n        450,\r\n        580,\r\n        90,\r\n        abclPlayer.settings.Metabolism,\r\n        \"white\",\r\n        \"\",\r\n        () => getMetabolismValue(abclPlayer.settings.Metabolism, false),\r\n        () => getMetabolismValue(abclPlayer.settings.Metabolism, true)\r\n      );\r\n      DrawButton(1815, 75, 90, 90, \"\", \"White\", \"Icons/Exit.png\");\r\n    },\r\n    click: () => {\r\n      if (MouseIn(150, 300, 65, 65)) {\r\n        abclPlayer.settings.DisableWetting =\r\n          !abclPlayer.settings.DisableWetting;\r\n      }\r\n      if (MouseIn(150, 400, 65, 65)) {\r\n        abclPlayer.settings.DisableSoiling =\r\n          !abclPlayer.settings.DisableSoiling;\r\n      }\r\n\r\n      if (MouseIn(150, 450, 580 / 2, 90)) {\r\n        abclPlayer.settings.Metabolism = getMetabolismValue(\r\n          abclPlayer.settings.Metabolism,\r\n          false\r\n        );\r\n      }\r\n      if (MouseIn(150 + 580 / 2, 450, 580 / 2, 90)) {\r\n        abclPlayer.settings.Metabolism = getMetabolismValue(\r\n          abclPlayer.settings.Metabolism,\r\n          true\r\n        );\r\n      }\r\n      if (MouseIn(1815, 75, 90, 90)) PreferenceSubscreenExtensionsExit();\r\n    },\r\n    exit: () => {\r\n      return true;\r\n    },\r\n    load: () => {},\r\n  });\r\n};\r\n","const sliders = [\r\n  {\r\n    className: \"SoilinessPercentage\",\r\n    primary: \"#d1aa98ff\",\r\n    secondary: \"#ab674aff\",\r\n  },\r\n  {\r\n    className: \"WetnessPercentage\",\r\n    primary: \"#f3e1aeff\",\r\n    secondary: \"#e7c463ff\",\r\n  },\r\n  {\r\n    className: \"BowelFullness\",\r\n    primary: \"#b7795cff\",\r\n    secondary: \"#7c4c36ff\",\r\n  },\r\n  {\r\n    className: \"BladderFullness\",\r\n    primary: \"#eacd73ff\",\r\n    secondary: \"#cba01eff\",\r\n  },\r\n  {\r\n    className: \"Incontinence\",\r\n    primary: \"#eeacacff\",\r\n    secondary: \"#cb5b5bff\",\r\n  },\r\n  {\r\n    className: \"MentalRegression\",\r\n    primary: \"#e6bff1ff\",\r\n    secondary: \"#ad74beff\",\r\n  },\r\n];\r\nlet cssSliders = \"\";\r\nfor (const slider of sliders) {\r\n  cssSliders += `\r\n\t.${modIdentifier}${slider.className}Slider::-webkit-slider-runnable-track {\r\n\t\tbackground-color: ${slider.primary} !important;\r\n\t}\r\n\t.${modIdentifier}${slider.className}Slider::-ms-track {\r\n\t\tbackground-color: ${slider.primary} !important;\r\n\t}\r\n\t.${modIdentifier}${slider.className}Slider::-moz-range-track {\r\n\t\tbackground-color: ${slider.primary} !important;\r\n\t}\r\n\t.${modIdentifier}${slider.className}Slider::-webkit-slider-progress {\r\n\t\tbackground-color: ${slider.secondary} !important;\r\n\t}\r\n\t.${modIdentifier}${slider.className}Slider::-moz-range-progress {\r\n\t\tbackground-color: ${slider.secondary} !important;\r\n\t}\r\n\t.${modIdentifier}${slider.className}Slider::-ms-fill-lower {\r\n\t\tbackground-color: ${slider.secondary} !important;\r\n\t}`;\r\n}\r\n\r\nexport const css = `\r\n\r\n.ABCLOverlay {\r\n\taspect-ratio: 2/1;\r\n\tmax-width: 100%;\r\n\tmax-height: 100%;\r\n\tmargin: auto;\r\n\tposition: relative;\r\n\ttransform: translateY(-50%);\r\n\ttop: 50%;\r\n\tpointer-events: none;\r\n  font-family: arial;\r\n  \r\n}\r\n.ABCLWindowHeaderTitle {\r\n  margin: 0;\r\n}\r\n\r\n.ABCLOpenStatsButton {\r\n  position: fixed;\r\n  bottom: 10px;\r\n  right: 10px;\r\n  z-index: 1000;\r\n  aspect-ratio: 1/1;\r\n  width: 50px;\r\n  white-space: collapse;\r\n  text-align: center;\r\n  border-radius: 5px;\r\n  background: #ffffffa6;\r\n  border: #e3e3e3 1px solid;\r\n  backdrop-filter: blur(4px);\r\n  pointer-events: all;\r\n}\r\n.ABCLOpenStatsButton:hover {\r\n  background: #ffffffd1;\r\n}\r\n.ABCLWindowClose {\r\n  aspect-ratio: 1/1;\r\n  background: transparent;\r\n  height: 29px;\r\n  border-radius: 0px 4px 0 0;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 0px;\r\n  border: none;\r\n  border-left: 1px #0000003d solid;\r\n}\r\n.ABCLWindowMinimize {\r\n  aspect-ratio: 1/1;\r\n  background: transparent;\r\n  height: 29px;\r\n  border-radius: 0px 0px 0 0;\r\n  position: absolute;\r\n  right: 30px;\r\n  top: 0px;\r\n  border: none;\r\n  border-left: 1px #0000003d solid;\r\n}\r\n.ABCLWindowHeader {\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr 29px 24px;\r\n  margin: -6px;\r\n  padding: 5px;\r\n  border: 1px #0000003d solid;\r\n  border-radius: 6px 6px 0 0;\r\n}\r\n.ABCLNotification {\r\n\tbackground-color: white;\r\n\twidth: fit-content;\r\n\ttext-align: center;\r\n\tmargin: auto;\r\n\tz-index: 10000;\r\n\tposition: absolute;\r\n\tbottom: 30px;\r\n\tleft: 25%;\r\n\ttransform: translateX(-50%);\r\n\tborder: 1px solid black;\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 30px 1fr;\r\n\tpadding: 5px;\r\n\tpointer-events: all;\r\n}\r\n\r\n.ABCLPrompt {\r\n  background: white;\r\n  width: fit-content;\r\n  padding: 6px;\r\n  border: 1px solid black;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 25%;\r\n  transform: translate(-50%, -50%);\r\n\tpointer-events: all;\r\n}\r\n.ABCLButton {\r\n  border: 1px #020202 solid;\r\n  padding: 3px;\r\n  margin: 4px;\r\n  aspect-ratio: 3/2;\r\n  width: 38px;\r\n  cursor: pointer;\r\n}\r\n.ABCLPromptYes {\r\n  background: #5ae85a;\r\n  color: black;\r\n}\r\n.ABCLPromptNo {\r\n  background: #ff4b4b;\r\n  color: white;\r\n}\r\n.ABCLClose {\r\n  aspect-ratio: 1/1;\r\n  margin: -6px;\r\n  background: white;\r\n  border: black 1px solid;\r\n  height: 30px;\r\n}\r\n.ABCLClose:hover {\r\n  background: #ff4b4b;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.ABCLStatsWindow {\r\n  width: 200px;\r\n  height: fit-content;\r\n  padding: 5px;\r\n  background: #ffffffa6;\r\n  border: #e3e3e3 1px solid;\r\n  pointer-events: all;\r\n  position: fixed;\r\n  backdrop-filter: blur(4px);\r\n  border-radius: 6px;\r\n  box-shadow: 0 4px 5px 1px #00000014;\r\n}\r\n\r\n.ABCLStatsWindowHeader {\r\n  font-size: 1.2em;\r\n  font-weight: bold;\r\n  margin: -5px;\r\n  padding: 5px 0 6px 8px;\r\n  border-bottom: black 1px solid;\r\n  cursor: pointer;\r\n}\r\n.ABCLStatsWindowHeader:hover {\r\n  background: #fbfbfb;\r\n}\r\n.ABCLStatsWindowList {\r\n  list-style: none; \r\n  padding: 0;\r\n  margin: 0;\r\n  margin-top: 10px;\r\n}\r\n\r\n.ABCLStatsWindowListItem {\r\n  display: grid;\r\n  grid-template-columns: 1fr min-content;\r\n  margin-top: 10px;\r\n}\r\n.ABCLStatsWindowListItem p {\r\n  margin: 0px;\r\n  display: inline;\r\n  text-align: right;\r\n}\r\n.ABCLStatsWindowListItem input {\r\n -webkit-appearance: none;\r\n appearance: none;\r\n grid-column: 1/-1;\r\n margin-top: 3px;\r\n}\r\n\r\n.ABCLStatsWindowListItem input::-ms-thumb {\r\n  -ms-appearance: none !important;\r\n   opacity: 0 !important;\r\n}\r\n.ABCLStatsWindowListItem input::-moz-range-thumb {\r\n  -moz-appearance: none !important;\r\n\topacity: 0 !important;\r\n}\r\n.ABCLStatsWindowListItem input::-webkit-slider-thumb {\r\n  -webkit-appearance: none !important;\r\n  appearance: none !important;\r\n  opacity: 0 !important;\r\n}\r\n.ABCLStatsWindowListItem input::-moz-range-track {\r\n  -moz-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 5px;\r\n  border: #999 1px solid;\r\n  cursor: auto !important;\r\n}\r\n.ABCLStatsWindowListItem input::-ms-track {\r\n  -ms-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 5px;\r\n  border: #999 1px solid;\r\n  cursor: auto !important;\r\n}\r\n.ABCLStatsWindowListItem input::-webkit-slider-runnable-track {\r\n  -webkit-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 5px;\r\n  border: #999 1px solid;\r\n  cursor: auto !important;\r\n}\r\n.ABCLStatsWindowListItem input::-ms-fill-lower {\r\n  -ms-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 4px;\r\n  cursor: auto !important;\r\n}\r\n.ABCLStatsWindowListItem input::-moz-range-progress {\r\n  -moz-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 4px;\r\n  cursor: auto !important;\r\n\r\n}\r\n.ABCLStatsWindowListItem input::-webkit-slider-progress {\r\n  -webkit-appearance: none !important;\r\n  appearance: none !important;\r\n  height: 18px;\r\n  border-radius: 4px;\r\n  cursor: auto !important;\r\n}\r\n\r\n.ABCLTextParticle {\r\n  position: fixed;\r\n  pointer-events: none;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  z-index: 1000;\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  mix-blend-mode: difference;\r\n  -webkit-user-select: none; /* Safari */\r\n  -ms-user-select: none; /* IE 10 and IE 11 */\r\n  user-select: none; /* Standard syntax */\r\n  transition: all 0.5s;\r\n}\r\n\r\n\r\n.ABCLStatsWindowFolded .ABCLStatsWindowList{\r\n  display: none;\r\n}\r\n\r\n${cssSliders}\r\n\r\n.ABCLHidden {\r\n  display: none !important;\r\n}\r\n`;\r\n","import { activities } from \"../activities\";\r\nimport { changeDiaper, hasDiaper } from \"../player/diaper\";\r\nimport { abclPlayer } from \"../player/player\";\r\nimport { sendChatLocal } from \"../utils\";\r\nexport const initActivitiesData = (): void => {\r\n  activities[\"ChangeDiaper\"] = {\r\n    Name: \"Change Diaper\",\r\n    Image: `${publicURL}/activity/changeDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      console.log(\"Change diaper clicked\", player);\r\n      changeDiaper(player);\r\n    },\r\n    Target: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n\r\n  activities[\"UsePotty\"] = {\r\n    Name: \"Sit and Use Potty\",\r\n    Image: `${publicURL}/activity/potty-temp.png`,\r\n    OnClick: (player: Character) => {\r\n      const isTooEarly =\r\n        abclPlayer.stats.BladderFullness < 0.3 &&\r\n        abclPlayer.stats.BowelFullness < 0.3;\r\n      const isPossible = !isTooEarly;\r\n      const isGood =\r\n        abclPlayer.stats.BladderFullness > 0.6 ||\r\n        abclPlayer.stats.BowelFullness > 0.6;\r\n      const isEmbarrassed = abclPlayer.stats.MentalRegression < 0.3;\r\n      const isTooFarGone = abclPlayer.stats.MentalRegression > 0.9;\r\n      if (isTooEarly) {\r\n        sendChatLocal(\"You sit down but you can't seem to get anything out.\");\r\n        return;\r\n      }\r\n      if (isPossible) {\r\n        abclPlayer.stats.BladderFullness = 0;\r\n        abclPlayer.stats.BowelFullness = 0;\r\n        sendChatLocal(\"You sit down and use the potty.\");\r\n      }\r\n      if (isEmbarrassed) {\r\n        abclPlayer.stats.MentalRegression += 0.04;\r\n      }\r\n      if (isGood && !isTooFarGone) {\r\n        abclPlayer.stats.MentalRegression -= 0.02;\r\n        abclPlayer.stats.Incontinence -= 0.02;\r\n      }\r\n    },\r\n    TargetSelf: [\"ItemButt\"],\r\n    //regression stages: low (i.e, <30%) -> medium (i.e, between 30% and 60%) -> high (i.e, >60%)\r\n\r\n    Criteria: (player) => {\r\n      return true;\r\n    },\r\n  };\r\n  activities[\"UseToilet\"] = {\r\n    Name: \"Sit and Use Toilet\",\r\n    Image: `${publicURL}/activity/toilet-temp.png`,\r\n    OnClick: (player: Character) => {\r\n      const isTooEarly =\r\n        abclPlayer.stats.BladderFullness < 0.3 &&\r\n        abclPlayer.stats.BowelFullness < 0.3;\r\n      const isPossible = !isTooEarly;\r\n      const isGood =\r\n        abclPlayer.stats.BladderFullness > 0.6 ||\r\n        abclPlayer.stats.BowelFullness > 0.6;\r\n      if (isTooEarly) return;\r\n      if (isPossible) {\r\n        abclPlayer.stats.BladderFullness = 0;\r\n        abclPlayer.stats.BowelFullness = 0;\r\n        sendChatLocal(\"You sit down and use the toilet.\");\r\n      }\r\n      if (isGood) {\r\n        abclPlayer.stats.MentalRegression -= 0.02;\r\n        abclPlayer.stats.Incontinence -= 0.02;\r\n      }\r\n    },\r\n    TargetSelf: [\"ItemButt\"],\r\n    Criteria: (player) => {\r\n      return abclPlayer.stats.MentalRegression < 0.3;\r\n    },\r\n  };\r\n  activities[\"WetDiaper\"] = {\r\n    Name: \"Wet Diaper\",\r\n    Image: `${publicURL}/activity/wetDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      abclPlayer.releaseBladder();\r\n    },\r\n    TargetSelf: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n\r\n  activities[\"SoilDiaper\"] = {\r\n    Name: \"Soil Diaper\",\r\n    Image: `${publicURL}/activity/soilDiaper.svg`,\r\n    OnClick: (player: Character, group) => {\r\n      abclPlayer.releaseBowel();\r\n    },\r\n    TargetSelf: [\"ItemPelvis\"],\r\n    Criteria: (player) => {\r\n      return hasDiaper(player);\r\n    },\r\n  };\r\n};\r\n","import { initActivitiesData } from \"./data/activities-data\";\r\nimport { bcModSDK, waitForElement } from \"./utils\";\r\nexport type ABCLActivity = {\r\n  Name: string;\r\n  Image: string;\r\n  OnClick?: (player: Character, group: AssetGroupItemName) => void;\r\n  Target?: AssetGroupItemName[];\r\n  TargetSelf?: AssetGroupItemName[];\r\n  Criteria?: (player: Character) => boolean;\r\n};\r\nexport const insertActivityButton = (\r\n  name: string,\r\n  id: string,\r\n  src: string,\r\n  onClick?: (player: Character, group: AssetGroupItemName) => void\r\n): HTMLButtonElement => {\r\n  const button = document.createElement(\"button\");\r\n  button.id = id;\r\n  button.name = `${modIdentifier}_${name}`;\r\n  button.dataset.group = \"ItemArms\";\r\n  button.className = `blank-button button button-styling HideOnPopup dialog-grid-button`;\r\n  button.innerHTML = `<img decoding=\"async\" loading=\"lazy\" src=\"${src}\" class=\"button-image\"><span class=\"button-label button-label-bottom\">${name}</span>`;\r\n\r\n  button.addEventListener(\"click\", (e) => {\r\n    const player = CurrentCharacter ?? Player;\r\n    const focusGroup = player?.FocusGroup?.Name;\r\n    if (!onClick || !focusGroup) return;\r\n    onClick(player, focusGroup);\r\n    DialogLeave();\r\n  });\r\n\r\n  return button;\r\n};\r\n\r\nexport const activityInGroup = (\r\n  activity: ABCLActivity,\r\n  group: AssetGroupItemName\r\n): boolean => {\r\n  return Boolean(\r\n    activity.Target?.includes(group) ||\r\n      (activity.TargetSelf?.includes(group) &&\r\n        Player.MemberNumber === CurrentCharacter?.MemberNumber)\r\n  );\r\n};\r\nexport const activityIsInserted = (id: string): boolean => {\r\n  return Boolean(document.getElementById(id));\r\n};\r\nexport const activityFitsCriteria = (\r\n  activity: ABCLActivity,\r\n  player: Character\r\n): boolean => {\r\n  if (!player) {\r\n    return false;\r\n  }\r\n  return Boolean(\r\n    (!activity.Criteria || activity.Criteria(player)) &&\r\n      player.FocusGroup &&\r\n      activityInGroup(activity, player.FocusGroup.Name)\r\n  );\r\n};\r\nexport const activities: Record<string, ABCLActivity> = {};\r\n\r\nexport const initActivities = (): void => {\r\n  /** clickedObj becomes null with custom activities */\r\n  initActivitiesData();\r\n  bcModSDK.hookFunction(\r\n    \"DialogMenuMapping.activities.GetClickStatus\",\r\n    1,\r\n    (args, next) => {\r\n      const [_C, _clickedObj, _equippedItem] = args;\r\n      if (!_clickedObj) return null;\r\n      return next(args);\r\n    }\r\n  );\r\n\r\n  bcModSDK.hookFunction(\"DialogChangeMode\", 1, async (args, next) => {\r\n    const [_mode] = args;\r\n    next(args);\r\n    if (_mode !== \"activities\") return;\r\n\r\n    const activityGrid = await waitForElement(\"#dialog-activity-grid\");\r\n    const focusGroup = CurrentCharacter?.FocusGroup?.Name;\r\n    if (!focusGroup) return;\r\n    Object.entries(activities).forEach(([id, activity]) => {\r\n      if (activityFitsCriteria(activity, CurrentCharacter ?? Player)) {\r\n        if (!activityIsInserted(id)) {\r\n          activityGrid.appendChild(\r\n            insertActivityButton(\r\n              activity.Name,\r\n              id,\r\n              activity.Image,\r\n              activity.OnClick\r\n            )\r\n          );\r\n        }\r\n      }\r\n    });\r\n  });\r\n};\r\n","// from LSCG - https://github.com/littlesera/LSCG/blob/8072c4d636a66bf12473823722afbc82fda8f98e/src/MiniGames/minigames.ts#L3C1-L3C87\r\n\r\nimport { incontinenceOnAccident } from \"./player/diaper\";\r\nimport { abclPlayer } from \"./player/player\";\r\nimport { bcModSDK } from \"./utils\";\r\n\r\n// for minigame text loading\r\nbcModSDK.hookFunction(\"TextLoad\", 5, (args, next) => {\r\n  if (CurrentScreen === \"WetMinigame\" || CurrentScreen === \"MessMinigame\")\r\n    return;\r\n  else return next(args);\r\n});\r\nexport const initMinigames = () => {\r\n  registerMiniGame(new MessMinigame());\r\n  registerMiniGame(new WetMinigame());\r\n};\r\nexport function registerMiniGame<T extends BaseMiniGame>(miniGame: T) {\r\n  var name = miniGame.name;\r\n  console.log(\"Registering minigame: \" + name);\r\n  (<any>window)[name + \"Run\"] = () => miniGame.Run();\r\n  (<any>window)[name + \"Click\"] = () => miniGame.Click();\r\n  (<any>window)[name + \"Load\"] = () => miniGame.Load();\r\n  (<any>window)[name + \"Unload\"] = () => miniGame.Unload();\r\n  (<any>window)[name + \"Resize\"] = () => miniGame.Resize();\r\n  (<any>window)[name + \"KeyDown\"] = () => miniGame.KeyDown();\r\n  (<any>window)[name + \"Exit\"] = () => miniGame.Exit();\r\n  (<any>window)[name + \"End\"] = (victory: boolean) => miniGame.End(victory);\r\n}\r\n\r\nexport abstract class BaseMiniGame {\r\n  name: string = \"\";\r\n\r\n  abstract Run(): void;\r\n  abstract Click(): void;\r\n  Load() {}\r\n  Unload() {}\r\n  Resize() {}\r\n  KeyDown() {}\r\n  Exit() {}\r\n  End(victory: boolean) {}\r\n}\r\n\r\nexport abstract class AccidentMiniGame extends BaseMiniGame {\r\n  startText: string = \"\";\r\n  hintText: string = \"\";\r\n  failText: string = \"\";\r\n  successText: string = \"\";\r\n\r\n  tintColor = [{ r: 0, g: 0, b: 0, a: 0 }];\r\n\r\n  GameStartTime: number = 0;\r\n  GameEndTime: number = 0;\r\n\r\n  StartDelay: number = 4000;\r\n  AccidentVelocity = 0;\r\n  AccidentPosition = 0;\r\n  AccidentAcceleration = 0;\r\n  AccidentMaxPosition = 100;\r\n  AccidentGameDuration = 5000;\r\n  AccidentNextTick = 0;\r\n  AccidentText = \"\";\r\n  AccidentChallenge = 0;\r\n\r\n  BaseGameLength: number = 6000;\r\n\r\n  End(Victory: boolean) {\r\n    CommonSetScreen(\"Online\", \"ChatRoom\");\r\n    MiniGameVictory = Victory;\r\n    MiniGameEnded = true;\r\n    MiniGameTimer = CommonTime();\r\n    this.GameEndTime = MiniGameTimer;\r\n  }\r\n  get IsStartDelay() {\r\n    return CommonTime() < this.GameStartTime;\r\n  }\r\n  Load(): void {\r\n    DrawFlashScreen(\"#000000\", 750, 1000);\r\n\r\n    this.GameStartTime = CommonTime() + this.StartDelay;\r\n    this.AccidentVelocity = 0;\r\n    this.AccidentAcceleration = 0;\r\n    if (typeof MiniGameDifficulty != \"number\") {\r\n      MiniGameTimer = CommonTime() + this.BaseGameLength; // 5 seconds base\r\n      this.AccidentChallenge = 5;\r\n    } else {\r\n      var difficultyTimeAdd = (MiniGameDifficulty - 8) * 0.25;\r\n      this.AccidentGameDuration =\r\n        this.BaseGameLength + 1000 * difficultyTimeAdd;\r\n      MiniGameTimer = this.GameStartTime + this.AccidentGameDuration; // One extra second per challenge level, minus a third of a second per willpower.\r\n      this.AccidentChallenge = MiniGameDifficulty;\r\n    }\r\n\r\n    this.AccidentMaxPosition = 400;\r\n    this.AccidentPosition = this.AccidentMaxPosition;\r\n\r\n    console.info(\r\n      \"Accident minigame started: difficulty - \" +\r\n        this.AccidentChallenge +\r\n        \" time - \" +\r\n        this.AccidentGameDuration\r\n    );\r\n  }\r\n  get IsGameActive() {\r\n    return CommonTime() < MiniGameTimer && !MiniGameEnded && !this.GameFailed;\r\n  }\r\n\r\n  get IsGameTimeout() {\r\n    return CommonTime() >= MiniGameTimer && !MiniGameEnded;\r\n  }\r\n\r\n  get IsEndGameReport() {\r\n    return CommonTime() < this.GameEndTime + 5000;\r\n  }\r\n\r\n  get GameFailed() {\r\n    return this.AccidentPosition <= 0;\r\n  }\r\n\r\n  RunGame(delta: number) {\r\n    var timeElapsed =\r\n      (this.AccidentGameDuration + CommonTime() - MiniGameTimer) / 1000;\r\n\r\n    // Adjust acceleration every .4s ticks\r\n    if (CommonTime() > this.AccidentNextTick) {\r\n      this.AccidentNextTick = CommonTime() + 400;\r\n      this.AccidentAcceleration =\r\n        -(this.AccidentChallenge * 1.25) - timeElapsed * Math.random();\r\n    }\r\n    this.AccidentVelocity = Math.min(\r\n      this.AccidentVelocity,\r\n      this.AccidentVelocity + this.AccidentAcceleration * 0.25\r\n    );\r\n    if (this.AccidentPosition >= this.AccidentMaxPosition)\r\n      this.AccidentVelocity = Math.min(0, this.AccidentVelocity);\r\n\r\n    if (this.AccidentPosition > 0) {\r\n      this.AccidentPosition += (this.AccidentVelocity / 1000) * delta * 3.5;\r\n    }\r\n\r\n    this.AccidentPosition = Math.max(\r\n      0,\r\n      Math.min(this.AccidentPosition, this.AccidentMaxPosition)\r\n    );\r\n\r\n    DrawProgressBar(\r\n      500 - this.AccidentMaxPosition,\r\n      800,\r\n      2 * this.AccidentMaxPosition,\r\n      50,\r\n      100 * (this.AccidentPosition / this.AccidentMaxPosition)\r\n    );\r\n    DrawText(this.hintText, 500, 875, \"white\", \"black\");\r\n\r\n    // var debugStr = \"Chal: \" + this.AccidentChallenge + \" Pos: \" + this.AccidentPosition + \" Vel: \" + this.AccidentVelocity + \" Acc: \" + this.AccidentAcceleration;\r\n    // var prev = MainCanvas.textAlign;\r\n    // MainCanvas.textAlign = \"left\";\r\n    // DrawText(debugStr, 0, 100, \"White\", \"Black\");\r\n    // MainCanvas.textAlign = prev;\r\n    // console.info(debugStr);\r\n  }\r\n\r\n  Run() {\r\n    ChatRoomRun(CommonTime());\r\n\r\n    if (this.IsStartDelay) {\r\n      DrawText(this.startText, 500, 500, \"white\", \"black\");\r\n    } else if (this.IsGameActive) {\r\n      this.RunGame(TimerRunInterval);\r\n    } else if ((this.IsGameTimeout || this.GameFailed) && !MiniGameEnded) {\r\n      this.End(this.AccidentPosition > 0);\r\n      MiniGameEnd();\r\n    }\r\n  }\r\n\r\n  Click() {\r\n    //CommonIsMobile\r\n    if (this.IsGameActive)\r\n      this.AccidentVelocity = Math.max(\r\n        this.AccidentVelocity + (getRandomInt(11) + 5),\r\n        20\r\n      );\r\n  }\r\n}\r\nfunction getRandomInt(max: number): number {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\nexport class MessMinigame extends AccidentMiniGame {\r\n  startText: string = \"A sudden pressure builds within you...\";\r\n  hintText: string = \"Click to maintain control. Keep it together!\";\r\n  failText: string = \"Oops! You've had an accident!\";\r\n  successText: string = \"Crisis averted! You stayed composed!\";\r\n  name = \"MessMinigame\";\r\n  End(victory: boolean) {\r\n    super.End(victory);\r\n    if (!victory) {\r\n      abclPlayer.stats.SoilinessValue += abclPlayer.stats.BowelValue;\r\n\r\n      abclPlayer.stats.Incontinence += incontinenceOnAccident(\r\n        abclPlayer.stats.BowelValue / 100\r\n      );\r\n      abclPlayer.stats.BowelValue = 0;\r\n    } else {\r\n      abclPlayer.stats.Incontinence -= incontinenceOnAccident(\r\n        abclPlayer.stats.BowelValue / 100\r\n      );\r\n    }\r\n    abclPlayer.onAccident();\r\n  }\r\n}\r\n\r\nexport class WetMinigame extends AccidentMiniGame {\r\n  startText: string = \"You feel a trickle starting...\";\r\n  hintText: string = \"Click to squeeze tight. Don't let it get away!\";\r\n  failText: string = \"Oh no! You lost control!\";\r\n  successText: string = \"You held it in! Phew!\";\r\n  name = \"WetMinigame\";\r\n  End(victory: boolean) {\r\n    super.End(victory);\r\n    if (!victory) {\r\n      abclPlayer.stats.WetnessValue += abclPlayer.stats.BladderValue;\r\n\r\n      abclPlayer.stats.Incontinence += incontinenceOnAccident(\r\n        abclPlayer.stats.BladderValue / 200\r\n      );\r\n\r\n      abclPlayer.stats.BladderValue = 0;\r\n    } else {\r\n      abclPlayer.stats.Incontinence -= incontinenceOnAccident(\r\n        abclPlayer.stats.BladderValue / 200\r\n      );\r\n    }\r\n    abclPlayer.onAccident();\r\n  }\r\n}\r\n","import { clearData, mutateData, saveData } from \"./settings\";\r\n(<any>window).clearData = clearData;\r\n(<any>window).saveData = saveData;\r\n(<any>window).mutateData = mutateData;\r\n\r\n(<any>window).noOp = () => {};\r\n","import initHooks from \"./core/hooks\";\r\nimport { logger } from \"./core/logger\";\r\nimport { loadOrGenerateData } from \"./core/settings\";\r\nimport { bcModSDK, isObject } from \"./core/utils\";\r\nimport { initScreens } from \"./screens\";\r\nimport { initSettingsScreen } from \"./screens/Settings\";\r\nimport { css } from \"./screens/styles/css\";\r\nimport abclData from \"./assets/dictionary.json\" assert { type: \"json\" };\r\nimport { initActivities } from \"./core/activities\";\r\nimport { initMinigames } from \"./core/minigames\";\r\nimport { abclPlayer } from \"./core/player/player\";\r\nimport \"./core/globalExpose\";\r\nimport { initOverlay } from \"./core/player/ui\";\r\nexport type AbclData = typeof abclData;\r\nexport const ABCLdata: AbclData = abclData;\r\n\r\nexport const updateInterval = 60 * 1000;\r\nconst initWait = () => {\r\n  logger.info(`Waiting for possible login...`);\r\n  if (CurrentScreen == null || CurrentScreen === \"Login\") {\r\n    bcModSDK.hookFunction(\"LoginResponse\", 0, (args, next) => {\r\n      next(args);\r\n      const response = args[0];\r\n      if (\r\n        isObject(response) &&\r\n        typeof response.Name === \"string\" &&\r\n        typeof response.AccountName === \"string\"\r\n      ) {\r\n        if (window.modLoadFlag) return;\r\n        init();\r\n      }\r\n    });\r\n  } else {\r\n    logger.info(`${modIdentifier}: Already logged in, loading...`);\r\n    init();\r\n  }\r\n};\r\n\r\nconst init = () => {\r\n  const currentAccount = Player.MemberNumber;\r\n  if (currentAccount === null) {\r\n    logger.error(\"No player MemberNumber\");\r\n    throw new Error(\"No player MemberNumber\");\r\n  }\r\n\r\n  bcModSDK.hookFunction(\"LoginResponse\", 0, (args, next) => {\r\n    const response = args[0];\r\n    if (\r\n      isObject(response) &&\r\n      typeof response.Name === \"string\" &&\r\n      typeof response.AccountName === \"string\" &&\r\n      response.MemberNumber !== currentAccount\r\n    ) {\r\n      const error = `Attempting to load ${modIdentifier} with different account than already loaded (${response.MemberNumber} vs ${currentAccount}). This is not supported, please refresh the page.`;\r\n      logger.error(error);\r\n      alert(error);\r\n      throw new Error(error);\r\n    }\r\n    return next(args);\r\n  });\r\n\r\n  const injectedStyles = document.createElement(\"style\");\r\n  injectedStyles.innerHTML = css;\r\n  document.head.appendChild(injectedStyles);\r\n\r\n  ServerPlayerSync();\r\n  loadOrGenerateData();\r\n  initSettingsScreen();\r\n  initScreens([]);\r\n  initHooks();\r\n  logger.info(`Ready.`);\r\n  window.modLoadFlag = true;\r\n  initActivities();\r\n  initMinigames();\r\n  initOverlay();\r\n  setInterval(loop, updateInterval);\r\n};\r\n\r\ninitWait();\r\n\r\nconst loop = () => {\r\n  if (CurrentScreen !== \"ChatRoom\") {\r\n    return;\r\n  }\r\n  abclPlayer.update();\r\n};\r\n","import { bcModSDK } from \"../core/utils\";\r\nimport { ModScreen } from \"../types/types\";\r\n\r\nexport const initScreens = (screens: ModScreen[]) => {\r\n  bcModSDK.hookFunction(\"TextLoad\", 5, (args, next) => {\r\n    if (\r\n      screens.some(\r\n        (screen) =>\r\n          screen.module === CurrentModule && screen.id === CurrentScreen\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return next(args);\r\n  });\r\n\r\n  screens.forEach((screen) => {\r\n    (<any>window)[`${screen.id}Background`] = \"Sheet\";\r\n\r\n    const { KeyUp, Click, ...rest } = screen.functions;\r\n\r\n    const injectedScreenFunctions = {\r\n      ...rest,\r\n      KeyUp: (event: KeyboardEvent) => {\r\n        if (event.key === \"Escape\") {\r\n          (<any>window)[`${screen.id}Exit`]();\r\n        }\r\n\r\n        KeyUp?.(event);\r\n      },\r\n      Click: (event: MouseEvent) => {\r\n        if (MouseIn(1815, 75, 90, 90)) {\r\n          (<any>window)[`${screen.id}Exit`]();\r\n        }\r\n        Click?.(event);\r\n      },\r\n    };\r\n\r\n    (<any>window)[`${screen.id}ScreenFunctions`] = injectedScreenFunctions;\r\n\r\n    Object.entries(injectedScreenFunctions).forEach(([key, value]) => {\r\n      (<any>window)[`${screen.id}${key}`] = value;\r\n    });\r\n  });\r\n};\r\n"],"names":["logger","constructor","this","logs","maxLogSize","log","level","message","logFunction","logEntry","version","timestamp","Date","toISOString","push","length","shift","info","console","debug","warn","error","getLogs","o","e","alert","Error","t","TextEncoder","n","Array","isArray","r","Set","filter","has","add","i","Map","a","c","s","f","values","patching","get","name","hooks","patches","entries","set","sort","priority","size","toString","replaceAll","includes","eval","original","m","errorReporterHooks","hookChainExit","call","apply","hookEnter","mod","hook","arguments","patchesSources","enter","final","l","precomputed","window","split","slice","join","encode","padStart","toUpperCase","d","originalHash","Object","assign","router","context","contextProperty","p","sdkEntrypoint","currentEntrypoint","hookedByMods","map","patchedByMods","from","u","delete","loaded","g","fullName","repository","allowReplace","apiEndpointEnter","unload","hookFunction","indexOf","splice","patchFunction","removePatches","clear","callOriginal","globalThis","getOriginalHash","api","freeze","h","y","bcModSdk","apiVersion","registerMod","getModsInfo","getPatchingInfo","seal","defineProperty","exports","value","ModName","PermissionLevels","freeGlobal","global","freeSelf","self","root","Function","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","undefined","nullTag","undefinedTag","baseGetTag","isOwn","tag","unmasked","result","getRawTag","objectToString","isObjectLike","isObject","type","identity","asyncTag","funcTag","genTag","proxyTag","isFunction","uid","coreJsData","maskSrcKey","exec","keys","IE_PROTO","funcToString","reIsHostCtor","funcProto","reIsNative","RegExp","replace","baseIsNative","func","test","toSource","getNative","object","key","getValue","objectCreate","create","baseCreate","proto","nativeNow","now","count","lastCalled","baseSetToString","string","configurable","enumerable","writable","setToString","stamp","remaining","MAX_SAFE_INTEGER","reIsUint","isIndex","baseAssignValue","eq","other","assignValue","objValue","nativeMax","Math","max","baseRest","start","transform","args","index","array","otherArgs","thisArg","overRest","isLength","isArrayLike","isPrototype","Ctor","baseIsArguments","propertyIsEnumerable","isArguments","isArguments$1","freeExports","nodeType","freeModule","module","Buffer","isBuffer","typedArrayTags","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","baseUnary","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","baseTimes","String","baseKeysIn","nativeKeysIn","isProto","keysIn","nativeCreate","Hash","entry","assocIndexOf","__data__","data","ListCache","pop","getMapData","MapCache","hash","getPrototype","arg","overArg","getPrototypeOf","objectTag","objectCtorString","Stack","pairs","LARGE_ARRAY_SIZE","allocUnsafe","Uint8Array","cloneTypedArray","typedArray","isDeep","arrayBuffer","buffer","byteLength","byteOffset","fromRight","baseFor","keysFunc","iterable","props","assignMergeValue","safeGet","toPlainObject","source","customizer","isNew","newValue","copyObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isTyped","copyArray","copy","cloneBuffer","isPlainObject","initCloneObject","baseMerge","assigner","merge","sources","guard","isIterateeCall","defaultSettings","Metabolism","permission","canView","Anyone","canModify","Owner","DisableWetting","Self","DisableSoiling","CaregiverIDs","OpenRemoteSettings","LockedOutOfSettings","defaultStats","Bladder","Bowel","Soiliness","Wetness","WaterIntake","FoodIntake","Incontinence","MentalRegression","defaultData","Settings","Stats","dataSaveTimeout","saveData","compressed","LZString","compressToBase64","JSON","stringify","Player","ExtensionSettings","clearTimeout","setTimeout","ServerPlayerExtensionSettingsSync","sendUpdateMyData","bcModSDK","bcModSdkRef","obj","sendChatLocal","ServerPlayerIsInChatRoom","msgElement","document","createElement","innerHTML","line","trim","classList","querySelector","appendChild","ElementScrollToEnd","generateUniqueID","identifier","random","substr","pendingRequests","PendingRequest","target","timeout","requestTime","state","id","sync","Type","Content","Sender","MemberNumber","Target","Dictionary","ServerSend","cancel","ABCLStatsWindow","folded","addEventListener","CurrentScreen","close","openButton","style","display","textContent","overlay","statsWindow","MovableElement","getStatsListElement","minimizeButton","closeButton","fold","contains","open","update","remove","top","left","toggle","className","title","updateInput","setAttribute","paragraphElement","floor","abclPlayer","stats","SoilinessPercentage","WetnessPercentage","BowelFullness","BladderFullness","element","resizable","newX","newY","oldX","oldY","isDragging","isResizing","resizeDirection","edgeThreshold","onMouseDown","bind","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onMouseMoveForCursor","position","resize","event","removeEventListener","cursor","offsetX","offsetY","offsetWidth","offsetHeight","preventDefault","clientX","clientY","offsetTop","offsetLeft","deltaX","deltaY","getComputedStyle","parseInt","width","height","ABCLYesNoPrompt","onAccept","onDeny","prompt","show","abclStatsWindow","metabolismValues","onAccident","mentalRegressionOnAccident","mentalRegressionOvertime","BladderValue","settings","MetabolismValue","BowelValue","attemptWetting","attemptSoiling","playerSaver","save","incontinenceCheck","check","getAccidentThreshold","MiniGameStart","releaseBladder","isTooEarly","isPossible","isGood","WetnessValue","releaseBowel","SoilinessValue","BladderSize","updateDiaperColor","BowelSize","getPlayerDiaperSize","addCaregiver","removeCaregiver","x","metabolism","allowedSaveInterval","lastSaveTime","allowedCallInterval","lastCallTime","reset","isReady","isLeaking","diaperSize","isDiaperDirty","isDiaper","item","Asset","Description","toLowerCase","ABCLdata","Diapers","hasDiaper","player","pelvisItem","InventoryGet","panties","Boolean","averageColor","color_1","color_2","ratio","rgb_1","DrawHexToRGB","rgb_2","avgRgb","round","b","DrawRGBToHex","mixLevels","highLevel","midLevel","lowLevel","setDiaperColor","slot","primaryColor","secondaryColor","DefaultColor","diaper","Color","parse","color","messLevel","wetLevel","messColor","DiaperColors","wetColor","CharacterRefresh","ChatRoomCharacterUpdate","getDiaperSize","Property","TypeRecord","typed","DiaperSizeScale","heavy_adult","incontinence","fullness","stressLevel","timeSinceLastAccident","threshold","pow","min","mentalRegressionBonus","assetDescriptions","Appearance","clothing","matches","BabyClothes","concat","description","some","assetDescription","toLocaleLowerCase","modifier","incontinenceOnAccident","minutes","stages","time","end","changeDiaper","isSomeoneElse","getCharacter","memberNumber","character","ChatRoomCharacter","find","IsPlayer","getCharacterName","Nickname","Name","filterRestrictedSettings","myHighestPermission","IsOwnedByPlayer","IsLoverOfPlayer","Lovers","FriendList","Friends","ServerChatRoomGetAllowItem","ItemPermission","getMyMaxPermissionLevel","reduce","acc","sendServerChatRoomMessage","ChatRoomMessage","syncDataMessage","receivePacket","handleInitPacket","otherCharacter","handleSyncPacket","request","initHooks","async","cancelFunc","Promise","resolve","waitFor","ServerSocket","ServerIsConnected","next","_result","drawCheckbox","text","isChecked","isDisabled","textColor","textLeft","textTop","DrawText","DrawButton","getMetabolismValue","Slow","Normal","Fast","Faster","Fastest","sliders","primary","secondary","cssSliders","slider","css","activityFitsCriteria","activity","Criteria","FocusGroup","group","TargetSelf","CurrentCharacter","activityInGroup","activities","initActivities","Image","OnClick","isEmbarrassed","isTooFarGone","_C","_clickedObj","_equippedItem","_mode","activityGrid","selector","options","observer","MutationObserver","childCheck","childElementCount","disconnect","observe","body","childList","subtree","waitForElement","focusGroup","forEach","getElementById","activityIsInserted","src","onClick","button","dataset","DialogLeave","insertActivityButton","registerMiniGame","miniGame","Run","Click","Load","Unload","Resize","KeyDown","Exit","victory","End","BaseMiniGame","AccidentMiniGame","startText","hintText","failText","successText","tintColor","GameStartTime","GameEndTime","StartDelay","AccidentVelocity","AccidentPosition","AccidentAcceleration","AccidentMaxPosition","AccidentGameDuration","AccidentNextTick","AccidentText","AccidentChallenge","BaseGameLength","Victory","CommonSetScreen","MiniGameVictory","MiniGameEnded","MiniGameTimer","CommonTime","IsStartDelay","DrawFlashScreen","MiniGameDifficulty","difficultyTimeAdd","IsGameActive","GameFailed","IsGameTimeout","IsEndGameReport","RunGame","delta","timeElapsed","DrawProgressBar","ChatRoomRun","TimerRunInterval","MiniGameEnd","MessMinigame","super","WetMinigame","clearData","mutateData","newData","noOp","abclData","init","currentAccount","response","AccountName","injectedStyles","screens","head","ServerPlayerSync","dataString","decompressFromBase64","modStorageObject","ModVersion","loadOrGenerateData","PreferenceRegisterExtensionSetting","Identifier","ButtonText","run","DrawBackNextButton","click","MouseIn","PreferenceSubscreenExtensionsExit","exit","load","initSettingsScreen","screen","CurrentModule","KeyUp","rest","functions","injectedScreenFunctions","ABCL_Loaded","C","CharX","CharY","Zoom","X","Y","setInterval","loop"],"mappings":"0BAuDO,MAAMA,EAAS,IAvDtB,MAAA,WAAAC,GACUC,KAAIC,KAIP,GACGD,KAAUE,WAAW,GA+C9B,CA7CS,GAAAC,CACNC,EACAC,EACAC,GAEA,MACMC,EAAW,CACfF,UACAD,QACAI,QAAS,QACTC,WALgB,IAAIC,MAAOC,eAQ7BL,EACE,UACA,qCACAC,GAGFP,KAAKC,KAAKW,KAAKL,GAEXP,KAAKC,KAAKY,OAASb,KAAKE,YAC1BF,KAAKC,KAAKa,OAEb,CAED,IAAAC,CAAKV,GACHL,KAAKG,IAAI,OAAQE,EAASW,QAAQb,IACnC,CAED,KAAAc,CAAMZ,GACJL,KAAKG,IAAI,QAASE,EAASW,QAAQC,MACpC,CAED,IAAAC,CAAKb,GACHL,KAAKG,IAAI,OAAQE,EAASW,QAAQE,KACnC,CAED,KAAAC,CAAMd,GACJL,KAAKG,IAAI,QAASE,EAASW,QAAQG,MACpC,CAED,OAAAC,GACE,OAAOpB,KAAKC,IACb,0BCjDH,WAAqC,MAAMoB,EAAE,QAAQ,SAASC,EAAED,GAAGE,MAAM,eAAeF,GAAG,MAAMC,EAAE,IAAIE,MAAMH,GAAG,MAAML,QAAQG,MAAMG,GAAGA,CAAC,CAAC,MAAMG,EAAE,IAAIC,YAAY,SAASC,EAAEN,GAAG,QAAQA,GAAG,iBAAiBA,IAAIO,MAAMC,QAAQR,EAAE,CAAC,SAASS,EAAET,GAAG,MAAMC,EAAE,IAAIS,IAAI,OAAOV,EAAEW,QAAQX,IAAIC,EAAEW,IAAIZ,IAAIC,EAAEY,IAAIb,IAAI,CAAC,MAAMc,EAAE,IAAIC,IAAIC,EAAE,IAAIN,IAAI,SAASO,EAAEjB,GAAGgB,EAAEJ,IAAIZ,KAAKgB,EAAEH,IAAIb,GAAGL,QAAQE,KAAKG,GAAG,CAAC,SAASkB,EAAElB,GAAG,MAAMC,EAAE,GAAGG,EAAE,IAAIW,IAAIT,EAAE,IAAII,IAAI,IAAI,MAAMD,KAAKU,EAAEC,SAAS,CAAC,MAAMN,EAAEL,EAAEY,SAASC,IAAItB,EAAEuB,MAAM,GAAGT,EAAE,CAACb,EAAEV,QAAQuB,EAAEU,OAAO,IAAI,MAAMvB,EAAEe,KAAKF,EAAEW,QAAQC,UAAUtB,EAAEQ,IAAIX,IAAIG,EAAEkB,IAAIrB,KAAKe,GAAGC,EAAE,gBAAgBR,EAAEc,8BAA8BvB,EAAEuB,2GAA2GtB,eAAeG,EAAEkB,IAAIrB,IAAI,gBAAgBe,KAAKZ,EAAEuB,IAAI1B,EAAEe,GAAGV,EAAEO,IAAIJ,EAAEc,KAAK,CAAC,CAACtB,EAAE2B,MAAI,CAAG5B,EAAEC,IAAIA,EAAE4B,SAAS7B,EAAE6B,WAAW,MAAMpB,EAAE,SAAST,EAAEC,GAAG,GAAG,IAAIA,EAAE6B,KAAK,OAAO9B,EAAE,IAAII,EAAEJ,EAAE+B,WAAWC,WAAW,OAAO,MAAM,IAAI,MAAM1B,EAAEG,KAAKR,EAAEyB,UAAUtB,EAAE6B,SAAS3B,IAAIW,EAAE,oBAAoBjB,EAAEuB,eAAejB,iBAAiBF,EAAEA,EAAE4B,WAAW1B,EAAEG,GAAG,OAAM,EAAGyB,MAAM,IAAI9B,KAAK,CAAhO,CAAkOJ,EAAEmC,SAAS/B,GAAG,IAAIU,EAAE,SAASb,GAAG,IAAIG,EAAEU,EAAE,MAAME,EAAE,QAAQF,GAAGV,EAAEgC,EAAEC,oBAAoBC,qBAAgB,IAASxB,OAAE,EAAOA,EAAEyB,KAAKnC,EAAEJ,EAAEuB,KAAKjB,GAAGW,EAAER,EAAE+B,MAAM7D,KAAKsB,GAAG,OAAO,MAAMe,GAAGA,IAAIC,CAAC,EAAE,IAAI,IAAIb,EAAEH,EAAET,OAAO,EAAEY,GAAG,EAAEA,IAAI,CAAC,MAAME,EAAEL,EAAEG,GAAGK,EAAEK,EAAEA,EAAE,SAASb,GAAG,IAAIG,EAAEU,EAAE,MAAME,EAAE,QAAQF,GAAGV,EAAEgC,EAAEC,oBAAoBI,iBAAY,IAAS3B,OAAE,EAAOA,EAAEyB,KAAKnC,EAAEJ,EAAEuB,KAAKjB,EAAEoC,KAAKzB,EAAEX,EAAEqC,KAAKH,MAAM7D,KAAK,CAACsB,EAAED,IAAI,GAAG,IAAI4C,UAAUpD,SAASe,MAAMC,QAAQP,GAAG,MAAM,IAAIE,MAAM,OAAOG,EAAEoC,uEAAuE1C,KAAK,OAAOS,EAAE8B,KAAK5D,KAAKqB,EAAC,IAAK,OAAO,MAAMgB,GAAGA,IAAIC,CAAC,CAAC,CAAC,MAAM,CAACO,MAAMvB,EAAEwB,QAAQrB,EAAEyC,eAAevC,EAAEwC,MAAMhC,EAAEiC,MAAMtC,EAAE,CAAC,SAASuC,EAAEhD,EAAEC,GAAE,GAAI,IAAIQ,EAAEK,EAAEQ,IAAItB,GAAG,GAAGS,EAAER,IAAIQ,EAAEwC,YAAY/B,EAAET,QAAQ,CAAC,IAAIR,EAAEiD,OAAO,MAAMlC,EAAEhB,EAAEmD,MAAM,KAAK,IAAI,IAAI/C,EAAE,EAAEA,EAAEY,EAAExB,OAAO,EAAEY,IAAI,GAAGH,EAAEA,EAAEe,EAAEZ,KAAKE,EAAEL,GAAG,MAAM,IAAIE,MAAM,oBAAoBH,8BAA8BgB,EAAEoC,MAAM,EAAEhD,EAAE,GAAGiD,KAAK,sBAAsB,MAAMpC,EAAEhB,EAAEe,EAAEA,EAAExB,OAAO,IAAI,GAAG,mBAAmByB,EAAE,MAAM,IAAId,MAAM,oBAAoBH,6BAA6B,MAAMgD,EAAE,SAAShD,GAAG,IAAIC,GAAG,EAAE,IAAI,MAAMK,KAAKF,EAAEkD,OAAOtD,GAAG,CAAC,IAAIA,EAAE,KAAKC,EAAEK,GAAG,IAAI,IAAIL,EAAE,EAAEA,EAAE,EAAEA,IAAID,EAAE,EAAEA,GAAG,UAAUA,IAAI,EAAEA,IAAI,EAAEC,EAAEA,IAAI,EAAED,CAAC,CAAC,QAAWC,IAAK,GAAG8B,SAAS,IAAIwB,SAAS,EAAE,KAAKC,aAAa,CAAzL,CAA2LvC,EAAEc,WAAWC,WAAW,OAAO,OAAOyB,EAAE,CAAClC,KAAKvB,EAAEmC,SAASlB,EAAEyC,aAAaV,GAAGvC,EAAEkD,OAAOC,OAAOD,OAAOC,OAAO,CAAE,EAACH,GAAG,CAACR,YAAY/B,EAAEuC,GAAGI,OAAO,OAAOC,QAAQ7D,EAAE8D,gBAAgB/C,EAAEA,EAAExB,OAAO,KAAKiB,EAAEoD,OAAO,SAAS7D,GAAG,OAAO,YAAYC,GAAG,OAAOD,EAAEiD,YAAYH,MAAMN,MAAM7D,KAAK,CAACsB,GAAG,CAAC,CAA7E,CAA+EQ,GAAGK,EAAEa,IAAI3B,EAAES,GAAGR,EAAEQ,EAAEsD,iBAAiBtD,EAAEoD,MAAM,CAAC,OAAOpD,CAAC,CAAC,SAASgD,IAAI,IAAI,MAAMzD,KAAKc,EAAEM,SAASpB,EAAEiD,YAAY/B,EAAElB,EAAE,CAAC,SAASgE,IAAI,MAAMhE,EAAE,IAAIe,IAAI,IAAI,MAAMd,EAAEG,KAAKU,EAAEd,EAAE2B,IAAI1B,EAAE,CAACsB,KAAKtB,EAAEkC,SAAS/B,EAAE+B,SAASuB,aAAatD,EAAEsD,aAAaO,cAAc7D,EAAEyD,OAAOK,kBAAkB9D,EAAE0D,QAAQ1D,EAAE2D,iBAAiBI,aAAa1D,EAAEL,EAAE6C,YAAYzB,MAAM4C,KAAKpE,GAAGA,EAAE0C,OAAO2B,cAAc9D,MAAM+D,KAAKlE,EAAE6C,YAAYJ,kBAAkB,OAAO7C,CAAC,CAAC,MAAMmB,EAAE,IAAIJ,IAAI,SAASwD,EAAEvE,GAAGmB,EAAEG,IAAItB,EAAEuB,QAAQvB,GAAGC,EAAE,yBAAyBD,EAAEuB,yBAAyBJ,EAAEqD,OAAOxE,EAAEuB,MAAMvB,EAAEyE,QAAO,EAAGhB,GAAG,CAAC,SAASiB,EAAE1E,EAAEI,GAAGJ,GAAG,iBAAiBA,GAAGC,EAAE,4DAA4DD,GAAG,iBAAiBA,EAAEuB,MAAMvB,EAAEuB,MAAMtB,EAAE,4EAA4ED,EAAEuB,MAAM,IAAId,EAAE,IAAIT,EAAEuB,QAAQ,iBAAiBvB,EAAE2E,UAAU3E,EAAE2E,UAAU1E,EAAE,0BAA0BQ,2DAA2DT,EAAE2E,YAAYlE,EAAE,IAAIT,EAAE2E,aAAa3E,EAAEuB,SAAS,iBAAiBvB,EAAEb,SAASc,EAAE,0BAA0BQ,gDAAgDT,EAAEb,WAAWa,EAAE4E,aAAa5E,EAAE4E,gBAAW,QAAQ,IAAS5E,EAAE4E,YAAY,iBAAiB5E,EAAE4E,YAAY3E,EAAE,0BAA0BQ,gEAAgET,EAAEb,WAAW,MAAMiB,IAAIA,EAAE,CAAE,GAAEA,GAAG,iBAAiBA,GAAGH,EAAE,0BAA0BQ,6DAA6DL,KAAK,MAAMU,GAAE,IAAKV,EAAEyE,aAAa7D,EAAEG,EAAEG,IAAItB,EAAEuB,MAAMP,IAAIA,EAAE6D,cAAc/D,GAAGb,EAAE,wBAAwBQ,iGAAiG8D,EAAEvD,IAAI,MAAMC,EAAEjB,IAAI,IAAIC,EAAEyE,EAAErD,SAASC,IAAItB,EAAEuB,MAAM,OAAOtB,IAAIA,EAAE,CAACuB,MAAM,GAAGC,QAAQ,IAAIV,KAAK2D,EAAErD,SAASM,IAAI3B,EAAEuB,KAAKtB,IAAIA,GAAGiB,EAAE,CAAClB,EAAEI,IAAI,IAAIE,KAAK,IAAIQ,EAAEE,EAAE,MAAMC,EAAE,QAAQD,GAAGF,EAAEsB,EAAEC,oBAAoByC,wBAAmB,IAAS9D,OAAE,EAAOA,EAAEuB,KAAKzB,EAAEd,EAAE0E,EAAEnD,MAAMmD,EAAED,QAAQxE,EAAE,OAAOQ,yDAAyD,MAAMS,EAAEd,KAAKE,GAAG,OAAO,MAAMW,GAAGA,IAAIC,GAAG8C,EAAE,CAACe,OAAO7D,EAAE,UAAU,IAAIqD,EAAEG,KAAKM,aAAa9D,EAAE,gBAAgB,CAAClB,EAAEI,EAAEE,KAAK,iBAAiBN,GAAGA,GAAGC,EAAE,OAAOQ,2EAA2ET,KAAK,MAAMc,EAAEkC,EAAEhD,GAAGgB,EAAEC,EAAEH,GAAG,iBAAiBV,GAAGH,EAAE,OAAOQ,8BAA8BT,4CAA4CI,KAAK,mBAAmBE,GAAGL,EAAE,OAAOQ,8BAA8BT,0CAA0CM,KAAK,MAAMY,EAAE,CAACwB,IAAIgC,EAAEnD,KAAKM,SAASzB,EAAEuC,KAAKrC,GAAG,OAAOU,EAAEQ,MAAMjC,KAAK2B,GAAGuC,IAAI,KAAK,MAAMzD,EAAEgB,EAAEQ,MAAMyD,QAAQ/D,GAAGlB,GAAG,IAAIgB,EAAEQ,MAAM0D,OAAOlF,EAAE,GAAGyD,IAAI,CAAE,IAAG0B,cAAcjE,EAAE,iBAAiB,CAAClB,EAAEI,KAAK,iBAAiBJ,GAAGA,GAAGC,EAAE,OAAOQ,2EAA2ET,KAAK,MAAMc,EAAEkC,EAAEhD,GAAGgB,EAAEC,EAAEH,GAAGR,EAAEF,IAAIH,EAAE,OAAOQ,+BAA+BT,2CAA2CI,KAAK,IAAI,MAAME,EAAEQ,KAAK6C,OAAOjC,QAAQtB,GAAG,iBAAiBU,EAAEE,EAAES,QAAQE,IAAIrB,EAAEQ,GAAG,OAAOA,EAAEE,EAAES,QAAQ+C,OAAOlE,GAAGL,EAAE,OAAOQ,+BAA+BT,gCAAgCM,MAAMmD,GAAI,IAAG2B,cAAclE,EAAE,iBAAiBlB,IAAI,iBAAiBA,GAAGA,GAAGC,EAAE,OAAOQ,2EAA2ET,KAAK,MAAMI,EAAE4C,EAAEhD,GAAGiB,EAAEb,GAAGqB,QAAQ4D,QAAQ5B,GAAI,IAAG6B,aAAapE,EAAE,gBAAc,CAAGlB,EAAEI,EAAEE,KAAK,iBAAiBN,GAAGA,GAAGC,EAAE,OAAOQ,0EAA0ET,KAAK,MAAMc,EAAEkC,EAAEhD,GAAG,OAAOO,MAAMC,QAAQJ,IAAIH,EAAE,OAAOQ,gEAAgEL,KAAKU,EAAEqB,SAASK,MAAM,MAAMlC,EAAEA,EAAEiF,WAAWnF,EAAG,IAAGoF,gBAAgBtE,EAAE,mBAAmBlB,IAAI,iBAAiBA,GAAGA,GAAGC,EAAE,OAAOQ,mEAAmET,KAAYgD,EAAEhD,GAAG0D,iBAAiBgB,EAAE,CAACnD,KAAKvB,EAAEuB,KAAKoD,SAAS3E,EAAE2E,SAASxF,QAAQa,EAAEb,QAAQyF,WAAW5E,EAAE4E,WAAWC,aAAa/D,EAAE2E,IAAIzB,EAAES,QAAO,EAAGpD,SAAS,IAAIN,KAAK,OAAOI,EAAEQ,IAAI3B,EAAEuB,KAAKmD,GAAGf,OAAO+B,OAAO1B,EAAE,CAAC,SAAS2B,IAAI,MAAM3F,EAAE,GAAG,IAAI,MAAMC,KAAKkB,EAAEC,SAASpB,EAAET,KAAK,CAACgC,KAAKtB,EAAEsB,KAAKoD,SAAS1E,EAAE0E,SAASxF,QAAQc,EAAEd,QAAQyF,WAAW3E,EAAE2E,aAAa,OAAO5E,CAAC,CAAC,IAAIoC,EAAE,MAAMwD,OAAE,IAAS1C,OAAO2C,SAAS3C,OAAO2C,SAAS,WAAW,MAAM5F,EAAE,CAACd,QAAQa,EAAE8F,WAAW,EAAEC,YAAYrB,EAAEsB,YAAYL,EAAEM,gBAAgBjC,EAAE3B,mBAAmBsB,OAAOuC,KAAK,CAACpB,iBAAiB,KAAKrC,UAAU,KAAKH,cAAc,QAAQ,OAAOF,EAAEnC,EAAE0D,OAAO+B,OAAOzF,EAAE,CAA/M,IAAoNK,EAAE4C,OAAO2C,WAAW5F,EAAE,+CAA+C,IAAIiD,OAAO2C,SAASC,YAAY7F,EAAE,yEAAyEiD,OAAO2C,SAAS1G,aAAa+D,OAAO2C,SAAS1G,UAAUa,GAAGE,MAAM,2EAA2EgD,OAAO2C,SAAS1G,gIAAgI+D,OAAO2C,UAA8ClC,OAAOwC,eAAeC,EAAQ,aAAa,CAACC,OAAM,IAAKD,UAAgBR,EAA/pO,kGCHO,MACMU,EAAU,OCmDvB,IAAYC,GAAZ,SAAYA,GACVA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,eAAA,GAAA,iBACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SAEAA,EAAAA,EAAA,MAAA,GAAA,QACAA,EAAAA,EAAA,KAAA,GAAA,MACD,CARD,CAAYA,IAAAA,EAQX,CAAA,IC3DD,IAAIC,EAA8B,iBAAVC,QAAsBA,QAAUA,OAAO9C,SAAWA,QAAU8C,OCEhFC,EAA0B,iBAARC,MAAoBA,MAAQA,KAAKhD,SAAWA,QAAUgD,KAGxEC,EAAOJ,GAAcE,GAAYG,SAAS,cAATA,GCHjCC,EAASF,EAAKE,OCAdC,EAAcpD,OAAOqD,UAGrBC,EAAiBF,EAAYE,eAO7BC,EAAuBH,EAAYhF,SAGnCoF,EAAiBL,EAASA,EAAOM,iBAAcC,ECfnD,IAOIH,EAPcvD,OAAOqD,UAOcjF,SCHvC,IAAIuF,EAAU,gBACVC,EAAe,qBAGfJ,EAAiBL,EAASA,EAAOM,iBAAcC,EASnD,SAASG,EAAWnB,GAClB,OAAa,MAATA,OACegB,IAAVhB,EAAsBkB,EAAeD,EAEtCH,GAAkBA,KAAkBxD,OAAO0C,GFGrD,SAAmBA,GACjB,IAAIoB,EAAQR,EAAe1E,KAAK8D,EAAOc,GACnCO,EAAMrB,EAAMc,GAEhB,IACEd,EAAMc,QAAkBE,EACxB,IAAIM,GAAW,CACnB,CAAI,MAAO1H,GAAK,CAEd,IAAI2H,EAASV,EAAqB3E,KAAK8D,GAQvC,OAPIsB,IACEF,EACFpB,EAAMc,GAAkBO,SAEjBrB,EAAMc,IAGVS,CACT,CEpBMC,CAAUxB,GDNhB,SAAwBA,GACtB,OAAOa,EAAqB3E,KAAK8D,EACnC,CCKMyB,CAAezB,EACrB,CCDA,SAAS0B,EAAa1B,GACpB,OAAgB,MAATA,GAAiC,iBAATA,CACjC,CCHA,IAAI7F,EAAUD,MAAMC,QCEpB,SAASwH,EAAS3B,GAChB,IAAI4B,SAAc5B,EAClB,OAAgB,MAATA,IAA0B,UAAR4B,GAA4B,YAARA,EAC/C,CCZA,SAASC,EAAS7B,GAChB,OAAOA,CACT,CCdA,IAAI8B,EAAW,yBACXC,EAAU,oBACVC,EAAS,6BACTC,EAAW,iBAmBf,SAASC,EAAWlC,GAClB,IAAK2B,EAAS3B,GACZ,OAAO,EAIT,IAAIqB,EAAMF,EAAWnB,GACrB,OAAOqB,GAAOU,GAAWV,GAAOW,GAAUX,GAAOS,GAAYT,GAAOY,CACtE,CC/BA,ICCME,EDDFC,EAAa7B,EAAK,sBCAlB8B,GACEF,EAAM,SAASG,KAAKF,GAAcA,EAAWG,MAAQH,EAAWG,KAAKC,UAAY,KACvE,iBAAmBL,EAAO,GCJ1C,IAGIM,EAHYjC,SAASG,UAGIjF,SCK7B,IAGIgH,EAAe,8BAGfC,EAAYnC,SAASG,UACrBD,EAAcpD,OAAOqD,UAGrB8B,EAAeE,EAAUjH,SAGzBkF,EAAiBF,EAAYE,eAG7BgC,EAAaC,OAAO,IACtBJ,EAAavG,KAAK0E,GAAgBkC,QAjBjB,sBAiBuC,QACvDA,QAAQ,yDAA0D,SAAW,KAWhF,SAASC,EAAa/C,GACpB,SAAK2B,EAAS3B,KFxBEgD,EEwBiBhD,EFvBxBqC,GAAeA,KAAcW,ME0BxBd,EAAWlC,GAAS4C,EAAaF,GAChCO,KD9BjB,SAAkBD,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAOP,EAAavG,KAAK8G,EAC/B,CAAM,MAAOpJ,GAAK,CACd,IACE,OAAQoJ,EAAO,EACrB,CAAM,MAAOpJ,GAAK,CACf,CACD,MAAO,EACT,CCoBsBsJ,CAASlD,IF5B/B,IAAkBgD,CE6BlB,CCjCA,SAASG,EAAUC,EAAQC,GACzB,IAAIrD,ECJN,SAAkBoD,EAAQC,GACxB,OAAiB,MAAVD,OAAiBpC,EAAYoC,EAAOC,EAC7C,CDEcC,CAASF,EAAQC,GAC7B,OAAON,EAAa/C,GAASA,OAAQgB,CACvC,CEXA,IAAIuC,EAAejG,OAAOkG,OAUtBC,EAAc,WAChB,SAASL,IAAW,CACpB,OAAO,SAASM,GACd,IAAK/B,EAAS+B,GACZ,MAAO,GAET,GAAIH,EACF,OAAOA,EAAaG,GAEtBN,EAAOzC,UAAY+C,EACnB,IAAInC,EAAS,IAAI6B,EAEjB,OADAA,EAAOzC,eAAYK,EACZO,CACX,CACA,IC1BA,IAIIoC,EAAY3K,KAAK4K,ICHrB,IDckBZ,EACZa,EACAC,EChBFhE,EAAkB,WACpB,IACE,IAAIkD,EAAOG,EAAU7F,OAAQ,kBAE7B,OADA0F,EAAK,CAAE,EAAE,GAAI,CAAA,GACNA,CACX,CAAI,MAAOpJ,GAAK,CAChB,ICIImK,EAAmBjE,EAA4B,SAASkD,EAAMgB,GAChE,OAAOlE,EAAekD,EAAM,WAAY,CACtCiB,cAAgB,EAChBC,YAAc,EACdlE,OCGcA,EDHIgE,ECIb,WACL,OAAOhE,CACX,GDLImE,UAAY,ICEhB,IAAkBnE,CDAlB,EAPwC6B,EEDpCuC,GJKcpB,EEKHe,EFJTF,EAAQ,EACRC,EAAa,EAEV,WACL,IAAIO,EAAQV,IACRW,EApBO,IAoBiBD,EAAQP,GAGpC,GADAA,EAAaO,EACTC,EAAY,GACd,KAAMT,GAzBI,IA0BR,OAAOtH,UAAU,QAGnBsH,EAAQ,EAEV,OAAOb,EAAK7G,WAAM6E,EAAWzE,UACjC,GKhCIgI,EAAmB,iBAGnBC,EAAW,mBAUf,SAASC,EAAQzE,EAAO7G,GACtB,IAAIyI,SAAc5B,EAGlB,SAFA7G,EAAmB,MAAVA,EAAiBoL,EAAmBpL,KAGlC,UAARyI,GACU,UAARA,GAAoB4C,EAASvB,KAAKjD,KAChCA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQ7G,CACjD,CCXA,SAASuL,EAAgBtB,EAAQC,EAAKrD,GACzB,aAAPqD,GAAsBvD,EACxBA,EAAesD,EAAQC,EAAK,CAC1BY,cAAgB,EAChBC,YAAc,EACdlE,MAASA,EACTmE,UAAY,IAGdf,EAAOC,GAAOrD,CAElB,CCUA,SAAS2E,GAAG3E,EAAO4E,GACjB,OAAO5E,IAAU4E,GAAU5E,GAAUA,GAAS4E,GAAUA,CAC1D,CC9BA,IAGIhE,GAHctD,OAAOqD,UAGQC,eAYjC,SAASiE,GAAYzB,EAAQC,EAAKrD,GAChC,IAAI8E,EAAW1B,EAAOC,GAChBzC,GAAe1E,KAAKkH,EAAQC,IAAQsB,GAAGG,EAAU9E,UACxCgB,IAAVhB,GAAyBqD,KAAOD,IACnCsB,EAAgBtB,EAAQC,EAAKrD,EAEjC,CCtBA,IAAI+E,GAAYC,KAAKC,ICSrB,SAASC,GAASlC,EAAMmC,GACtB,OAAOf,EDCT,SAAkBpB,EAAMmC,EAAOC,GAE7B,OADAD,EAAQJ,QAAoB/D,IAAVmE,EAAuBnC,EAAK7J,OAAS,EAAKgM,EAAO,GAC5D,WAML,IALA,IAAIE,EAAO9I,UACP+I,GAAS,EACTnM,EAAS4L,GAAUM,EAAKlM,OAASgM,EAAO,GACxCI,EAAQrL,MAAMf,KAETmM,EAAQnM,GACfoM,EAAMD,GAASD,EAAKF,EAAQG,GAE9BA,GAAS,EAET,IADA,IAAIE,EAAYtL,MAAMiL,EAAQ,KACrBG,EAAQH,GACfK,EAAUF,GAASD,EAAKC,GAG1B,OADAE,EAAUL,GAASC,EAAUG,GEpBjC,SAAevC,EAAMyC,EAASJ,GAC5B,OAAQA,EAAKlM,QACX,KAAK,EAAG,OAAO6J,EAAK9G,KAAKuJ,GACzB,KAAK,EAAG,OAAOzC,EAAK9G,KAAKuJ,EAASJ,EAAK,IACvC,KAAK,EAAG,OAAOrC,EAAK9G,KAAKuJ,EAASJ,EAAK,GAAIA,EAAK,IAChD,KAAK,EAAG,OAAOrC,EAAK9G,KAAKuJ,EAASJ,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,OAAOrC,EAAK7G,MAAMsJ,EAASJ,EAC7B,CFaWlJ,CAAM6G,EAAM1K,KAAMkN,EAC7B,CACA,CCpBqBE,CAAS1C,EAAMmC,EAAOtD,GAAWmB,EAAO,GAC7D,CEbA,IAAIuB,GAAmB,iBA4BvB,SAASoB,GAAS3F,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASuE,EAC7C,CCJA,SAASqB,GAAY5F,GACnB,OAAgB,MAATA,GAAiB2F,GAAS3F,EAAM7G,UAAY+I,EAAWlC,EAChE,CC7BA,IAAIU,GAAcpD,OAAOqD,UASzB,SAASkF,GAAY7F,GACnB,IAAI8F,EAAO9F,GAASA,EAAM3H,YAG1B,OAAO2H,KAFqB,mBAAR8F,GAAsBA,EAAKnF,WAAcD,GAG/D,CCFA,SAASqF,GAAgB/F,GACvB,OAAO0B,EAAa1B,IAVR,sBAUkBmB,EAAWnB,EAC3C,CCXA,IAAIU,GAAcpD,OAAOqD,UAGrBC,GAAiBF,GAAYE,eAG7BoF,GAAuBtF,GAAYsF,qBAoBnCC,GAAcF,GAAgB,WAAa,OAAOxJ,SAAU,CAA9B,IAAsCwJ,GAAkB,SAAS/F,GACjG,OAAO0B,EAAa1B,IAAUY,GAAe1E,KAAK8D,EAAO,YACtDgG,GAAqB9J,KAAK8D,EAAO,SACtC,EAEAkG,GAAeD,GC/Bf,IAAIE,GAAgC,iBAAXpG,GAAuBA,IAAYA,EAAQqG,UAAYrG,EAG5EsG,GAAaF,IAAgC,iBAAVG,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFC,GAHgBF,IAAcA,GAAWtG,UAAYoG,GAG5B5F,EAAKgG,YAASvF,EAsBvCwF,IAnBiBD,GAASA,GAAOC,cAAWxF,ICHhD,WACE,OAAO,CACT,ECiBIyF,GAAiB,CAAA,EACrBA,GAZiB,yBAYYA,GAXZ,yBAYjBA,GAXc,sBAWYA,GAVX,uBAWfA,GAVe,uBAUYA,GATZ,uBAUfA,GATsB,8BASYA,GARlB,wBAShBA,GARgB,yBAQY,EAC5BA,GAjCc,sBAiCYA,GAhCX,kBAiCfA,GApBqB,wBAoBYA,GAhCnB,oBAiCdA,GApBkB,qBAoBYA,GAhChB,iBAiCdA,GAhCe,kBAgCYA,GA/Bb,qBAgCdA,GA/Ba,gBA+BYA,GA9BT,mBA+BhBA,GA9BgB,mBA8BYA,GA7BZ,mBA8BhBA,GA7Ba,gBA6BYA,GA5BT,mBA6BhBA,GA5BiB,qBA4BY,EC1C7B,IAAIN,GAAgC,iBAAXpG,GAAuBA,IAAYA,EAAQqG,UAAYrG,EAG5EsG,GAAaF,IAAgC,iBAAVG,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFI,GAHgBL,IAAcA,GAAWtG,UAAYoG,IAGtBhG,EAAWwG,QAG1CC,GAAY,WACd,IAEE,IAAIC,EAAQR,IAAcA,GAAWS,SAAWT,GAAWS,QAAQ,QAAQD,MAE3E,OAAIA,GAKGH,IAAeA,GAAYK,SAAWL,GAAYK,QAAQ,OACrE,CAAI,MAAOnN,GAAK,CAChB,ICtBIoN,GAAmBJ,IAAYA,GAASK,aAmBxCA,GAAeD,GCjBnB,SAAmBhE,GACjB,OAAO,SAAShD,GACd,OAAOgD,EAAKhD,EAChB,CACA,CDasCkH,CAAUF,IF8BhD,SAA0BhH,GACxB,OAAO0B,EAAa1B,IAClB2F,GAAS3F,EAAM7G,WAAasN,GAAetF,EAAWnB,GAC1D,EI9CIY,GAHctD,OAAOqD,UAGQC,eAUjC,SAASuG,GAAcnH,EAAOoH,GAC5B,IAAIC,EAAQlN,EAAQ6F,GAChBsH,GAASD,GAASpB,GAAYjG,GAC9BuH,GAAUF,IAAUC,GAASd,GAASxG,GACtCwH,GAAUH,IAAUC,IAAUC,GAAUN,GAAajH,GACrDyH,EAAcJ,GAASC,GAASC,GAAUC,EAC1CjG,EAASkG,EClBf,SAAmBxN,EAAGyN,GAIpB,IAHA,IAAIpC,GAAS,EACT/D,EAASrH,MAAMD,KAEVqL,EAAQrL,GACfsH,EAAO+D,GAASoC,EAASpC,GAE3B,OAAO/D,CACT,CDU6BoG,CAAU3H,EAAM7G,OAAQyO,QAAU,GACzDzO,EAASoI,EAAOpI,OAEpB,IAAK,IAAIkK,KAAOrD,GACToH,IAAaxG,GAAe1E,KAAK8D,EAAOqD,IACvCoE,IAEQ,UAAPpE,GAECkE,IAAkB,UAAPlE,GAA0B,UAAPA,IAE9BmE,IAAkB,UAAPnE,GAA0B,cAAPA,GAA8B,cAAPA,IAEtDoB,EAAQpB,EAAKlK,KAElBoI,EAAOrI,KAAKmK,GAGhB,OAAO9B,CACT,CEzCA,IAGIX,GAHctD,OAAOqD,UAGQC,eASjC,SAASiH,GAAWzE,GAClB,IAAKzB,EAASyB,GACZ,OCVJ,SAAsBA,GACpB,IAAI7B,EAAS,GACb,GAAc,MAAV6B,EACF,IAAK,IAAIC,KAAO/F,OAAO8F,GACrB7B,EAAOrI,KAAKmK,GAGhB,OAAO9B,CACT,CDEWuG,CAAa1E,GAEtB,IAAI2E,EAAUlC,GAAYzC,GACtB7B,EAAS,GAEb,IAAK,IAAI8B,KAAOD,GACD,eAAPC,IAAyB0E,GAAYnH,GAAe1E,KAAKkH,EAAQC,KACrE9B,EAAOrI,KAAKmK,GAGhB,OAAO9B,CACT,CEHA,SAASyG,GAAO5E,GACd,OAAOwC,GAAYxC,GAAU+D,GAAc/D,GAAQ,GAAQyE,GAAWzE,EACxE,CC1BA,IAAI6E,GAAe9E,EAAU7F,OAAQ,UCArC,IAMIsD,GAHctD,OAAOqD,UAGQC,eCNjC,IAGIA,GAHctD,OAAOqD,UAGQC,eCOjC,SAASsH,GAAK7M,GACZ,IAAIiK,GAAS,EACTnM,EAAoB,MAAXkC,EAAkB,EAAIA,EAAQlC,OAG3C,IADAb,KAAK0G,UACIsG,EAAQnM,GAAQ,CACvB,IAAIgP,EAAQ9M,EAAQiK,GACpBhN,KAAKgD,IAAI6M,EAAM,GAAIA,EAAM,GAC1B,CACH,CCZA,SAASC,GAAa7C,EAAOlC,GAE3B,IADA,IAAIlK,EAASoM,EAAMpM,OACZA,KACL,GAAIwL,GAAGY,EAAMpM,GAAQ,GAAIkK,GACvB,OAAOlK,EAGX,OAAQ,CACV,CDOA+O,GAAKvH,UAAU3B,MEhBf,WACE1G,KAAK+P,SAAWJ,GAAeA,GAAa,MAAQ,CAAA,EACpD3P,KAAKmD,KAAO,CACd,EFcAyM,GAAKvH,UAAkB,OGhBvB,SAAoB0C,GAClB,IAAI9B,EAASjJ,KAAKiC,IAAI8I,WAAe/K,KAAK+P,SAAShF,GAEnD,OADA/K,KAAKmD,MAAQ8F,EAAS,EAAI,EACnBA,CACT,EHaA2G,GAAKvH,UAAU1F,IFPf,SAAiBoI,GACf,IAAIiF,EAAOhQ,KAAK+P,SAChB,GAAIJ,GAAc,CAChB,IAAI1G,EAAS+G,EAAKjF,GAClB,MArBiB,8BAqBV9B,OAA4BP,EAAYO,CAChD,CACD,OAAOX,GAAe1E,KAAKoM,EAAMjF,GAAOiF,EAAKjF,QAAOrC,CACtD,EECAkH,GAAKvH,UAAUpG,IDXf,SAAiB8I,GACf,IAAIiF,EAAOhQ,KAAK+P,SAChB,OAAOJ,QAA8BjH,IAAdsH,EAAKjF,GAAsBzC,GAAe1E,KAAKoM,EAAMjF,EAC9E,ECSA6E,GAAKvH,UAAUrF,IIdf,SAAiB+H,EAAKrD,GACpB,IAAIsI,EAAOhQ,KAAK+P,SAGhB,OAFA/P,KAAKmD,MAAQnD,KAAKiC,IAAI8I,GAAO,EAAI,EACjCiF,EAAKjF,GAAQ4E,SAA0BjH,IAAVhB,EAfV,4BAekDA,EAC9D1H,IACT,ECjBA,IAGIuG,GAHa3E,MAAMyG,UAGC9B,OCOxB,SAAS0J,GAAUlN,GACjB,IAAIiK,GAAS,EACTnM,EAAoB,MAAXkC,EAAkB,EAAIA,EAAQlC,OAG3C,IADAb,KAAK0G,UACIsG,EAAQnM,GAAQ,CACvB,IAAIgP,EAAQ9M,EAAQiK,GACpBhN,KAAKgD,IAAI6M,EAAM,GAAIA,EAAM,GAC1B,CACH,CAGAI,GAAU5H,UAAU3B,MClBpB,WACE1G,KAAK+P,SAAW,GAChB/P,KAAKmD,KAAO,CACd,EDgBA8M,GAAU5H,UAAkB,ODT5B,SAAyB0C,GACvB,IAAIiF,EAAOhQ,KAAK+P,SACZ/C,EAAQ8C,GAAaE,EAAMjF,GAE/B,QAAIiC,EAAQ,KAIRA,GADYgD,EAAKnP,OAAS,EAE5BmP,EAAKE,MAEL3J,GAAO3C,KAAKoM,EAAMhD,EAAO,KAEzBhN,KAAKmD,MACA,EACT,ECLA8M,GAAU5H,UAAU1F,IEhBpB,SAAsBoI,GACpB,IAAIiF,EAAOhQ,KAAK+P,SACZ/C,EAAQ8C,GAAaE,EAAMjF,GAE/B,OAAOiC,EAAQ,OAAItE,EAAYsH,EAAKhD,GAAO,EAC7C,EFYAiD,GAAU5H,UAAUpG,IGjBpB,SAAsB8I,GACpB,OAAO+E,GAAa9P,KAAK+P,SAAUhF,IAAQ,CAC7C,EHgBAkF,GAAU5H,UAAUrF,IIjBpB,SAAsB+H,EAAKrD,GACzB,IAAIsI,EAAOhQ,KAAK+P,SACZ/C,EAAQ8C,GAAaE,EAAMjF,GAQ/B,OANIiC,EAAQ,KACRhN,KAAKmD,KACP6M,EAAKpP,KAAK,CAACmK,EAAKrD,KAEhBsI,EAAKhD,GAAO,GAAKtF,EAEZ1H,IACT,ECnBA,IAAIoC,GAAMyI,EAAU5C,EAAM,OCM1B,SAASkI,GAAW1K,EAAKsF,GACvB,ICJiBrD,EACb4B,EDGA0G,EAAOvK,EAAIsK,SACf,OCHgB,WADZzG,SADa5B,EDKAqD,KCHmB,UAARzB,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAV5B,EACU,OAAVA,GDEDsI,EAAmB,iBAAPjF,EAAkB,SAAW,QACzCiF,EAAKvK,GACX,CEFA,SAAS2K,GAASrN,GAChB,IAAIiK,GAAS,EACTnM,EAAoB,MAAXkC,EAAkB,EAAIA,EAAQlC,OAG3C,IADAb,KAAK0G,UACIsG,EAAQnM,GAAQ,CACvB,IAAIgP,EAAQ9M,EAAQiK,GACpBhN,KAAKgD,IAAI6M,EAAM,GAAIA,EAAM,GAC1B,CACH,CAGAO,GAAS/H,UAAU3B,MCdnB,WACE1G,KAAKmD,KAAO,EACZnD,KAAK+P,SAAW,CACdM,KAAQ,IAAIT,GACZnK,IAAO,IAAKrD,IAAO6N,IACnBvE,OAAU,IAAIkE,GAElB,EDQAQ,GAAS/H,UAAkB,OEf3B,SAAwB0C,GACtB,IAAI9B,EAASkH,GAAWnQ,KAAM+K,GAAa,OAAEA,GAE7C,OADA/K,KAAKmD,MAAQ8F,EAAS,EAAI,EACnBA,CACT,EFYAmH,GAAS/H,UAAU1F,IGhBnB,SAAqBoI,GACnB,OAAOoF,GAAWnQ,KAAM+K,GAAKpI,IAAIoI,EACnC,EHeAqF,GAAS/H,UAAUpG,IIjBnB,SAAqB8I,GACnB,OAAOoF,GAAWnQ,KAAM+K,GAAK9I,IAAI8I,EACnC,EJgBAqF,GAAS/H,UAAUrF,IKjBnB,SAAqB+H,EAAKrD,GACxB,IAAIsI,EAAOG,GAAWnQ,KAAM+K,GACxB5H,EAAO6M,EAAK7M,KAIhB,OAFA6M,EAAKhN,IAAI+H,EAAKrD,GACd1H,KAAKmD,MAAQ6M,EAAK7M,MAAQA,EAAO,EAAI,EAC9BnD,IACT,EChBA,IAAIsQ,GCKJ,SAAiB5F,EAAMoC,GACrB,OAAO,SAASyD,GACd,OAAO7F,EAAKoC,EAAUyD,GAC1B,CACA,CDTmBC,CAAQxL,OAAOyL,eAAgBzL,QEE9C0L,GAAY,kBAGZrG,GAAYnC,SAASG,UACrBD,GAAcpD,OAAOqD,UAGrB8B,GAAeE,GAAUjH,SAGzBkF,GAAiBF,GAAYE,eAG7BqI,GAAmBxG,GAAavG,KAAKoB,QCJzC,SAAS4L,GAAM7N,GACb,IAAIiN,EAAOhQ,KAAK+P,SAAW,IAAIE,GAAUlN,GACzC/C,KAAKmD,KAAO6M,EAAK7M,IACnB,CAGAyN,GAAMvI,UAAU3B,MCXhB,WACE1G,KAAK+P,SAAW,IAAIE,GACpBjQ,KAAKmD,KAAO,CACd,EDSAyN,GAAMvI,UAAkB,OEZxB,SAAqB0C,GACnB,IAAIiF,EAAOhQ,KAAK+P,SACZ9G,EAAS+G,EAAa,OAAEjF,GAG5B,OADA/K,KAAKmD,KAAO6M,EAAK7M,KACV8F,CACT,EFOA2H,GAAMvI,UAAU1F,IGbhB,SAAkBoI,GAChB,OAAO/K,KAAK+P,SAASpN,IAAIoI,EAC3B,EHYA6F,GAAMvI,UAAUpG,IIdhB,SAAkB8I,GAChB,OAAO/K,KAAK+P,SAAS9N,IAAI8I,EAC3B,EJaA6F,GAAMvI,UAAUrF,IKPhB,SAAkB+H,EAAKrD,GACrB,IAAIsI,EAAOhQ,KAAK+P,SAChB,GAAIC,aAAgBC,GAAW,CAC7B,IAAIY,EAAQb,EAAKD,SACjB,IAAK3N,IAAQyO,EAAMhQ,OAASiQ,IAG1B,OAFAD,EAAMjQ,KAAK,CAACmK,EAAKrD,IACjB1H,KAAKmD,OAAS6M,EAAK7M,KACZnD,KAETgQ,EAAOhQ,KAAK+P,SAAW,IAAIK,GAASS,EACrC,CAGD,OAFAb,EAAKhN,IAAI+H,EAAKrD,GACd1H,KAAKmD,KAAO6M,EAAK7M,KACVnD,IACT,EC5BA,IAAI6N,GAAgC,iBAAXpG,GAAuBA,IAAYA,EAAQqG,UAAYrG,EAG5EsG,GAAaF,IAAgC,iBAAVG,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFC,GAHgBF,IAAcA,GAAWtG,UAAYoG,GAG5B5F,EAAKgG,YAASvF,EACvCqI,GAAc9C,GAASA,GAAO8C,iBAAcrI,ECVhD,IAAIsI,GAAa/I,EAAK+I,WCOtB,SAASC,GAAgBC,EAAYC,GACnC,ICFwBC,EACpBnI,EDCAoI,EAASF,GCFWC,EDEeF,EAAWG,OCD9CpI,EAAS,IAAImI,EAAYrR,YAAYqR,EAAYE,YACrD,IAAIN,GAAW/H,GAAQjG,IAAI,IAAIgO,GAAWI,IACnCnI,GDDqDiI,EAAWG,OACvE,OAAO,IAAIH,EAAWnR,YAAYsR,EAAQH,EAAWK,WAAYL,EAAWrQ,OAC9E,CEAA,ICNuB2Q,GDMnBC,GCLK,SAAS3G,EAAQsE,EAAUsC,GAMhC,IALA,IAAI1E,GAAS,EACT2E,EAAW3M,OAAO8F,GAClB8G,EAAQF,EAAS5G,GACjBjK,EAAS+Q,EAAM/Q,OAEZA,KAAU,CACf,IAAIkK,EAAM6G,EAAMJ,GAAY3Q,IAAWmM,GACvC,IAA+C,IAA3CoC,EAASuC,EAAS5G,GAAMA,EAAK4G,GAC/B,KAEH,CACD,OAAO7G,CACX,ECTA,SAAS+G,GAAiB/G,EAAQC,EAAKrD,SACtBgB,IAAVhB,IAAwB2E,GAAGvB,EAAOC,GAAMrD,SAC9BgB,IAAVhB,KAAyBqD,KAAOD,KACnCsB,EAAgBtB,EAAQC,EAAKrD,EAEjC,CCTA,SAASoK,GAAQhH,EAAQC,GACvB,IAAY,gBAARA,GAAgD,mBAAhBD,EAAOC,KAIhC,aAAPA,EAIJ,OAAOD,EAAOC,EAChB,CCSA,SAASgH,GAAcrK,GACrB,OCfF,SAAoBsK,EAAQJ,EAAO9G,EAAQmH,GACzC,IAAIC,GAASpH,EACbA,IAAWA,EAAS,CAAA,GAKpB,IAHA,IAAIkC,GAAS,EACTnM,EAAS+Q,EAAM/Q,SAEVmM,EAAQnM,GAAQ,CACvB,IAAIkK,EAAM6G,EAAM5E,GAEZmF,EAAWF,EACXA,EAAWnH,EAAOC,GAAMiH,EAAOjH,GAAMA,EAAKD,EAAQkH,QAClDtJ,OAEaA,IAAbyJ,IACFA,EAAWH,EAAOjH,IAEhBmH,EACF9F,EAAgBtB,EAAQC,EAAKoH,GAE7B5F,GAAYzB,EAAQC,EAAKoH,EAE5B,CACD,OAAOrH,CACT,CDTSsH,CAAW1K,EAAOgI,GAAOhI,GAClC,CEEA,SAAS2K,GAAcvH,EAAQkH,EAAQjH,EAAKuH,EAAUC,EAAWN,EAAYO,GAC3E,IAAIhG,EAAWsF,GAAQhH,EAAQC,GAC3B0H,EAAWX,GAAQE,EAAQjH,GAC3B2H,EAAUF,EAAM7P,IAAI8P,GAExB,GAAIC,EACFb,GAAiB/G,EAAQC,EAAK2H,OADhC,CAIA,ICZyBhL,EDYrByK,EAAWF,EACXA,EAAWzF,EAAUiG,EAAW1H,EAAM,GAAKD,EAAQkH,EAAQQ,QAC3D9J,EAEAiK,OAAwBjK,IAAbyJ,EAEf,GAAIQ,EAAU,CACZ,IAAI5D,EAAQlN,EAAQ4Q,GAChBxD,GAAUF,GAASb,GAASuE,GAC5BG,GAAW7D,IAAUE,GAAUN,GAAa8D,GAEhDN,EAAWM,EACP1D,GAASE,GAAU2D,EACjB/Q,EAAQ2K,GACV2F,EAAW3F,ECzBVpD,EADkB1B,ED4BM8E,IC3BDc,GAAY5F,GD4BpCyK,EEjDR,SAAmBH,EAAQ/E,GACzB,IAAID,GAAS,EACTnM,EAASmR,EAAOnR,OAGpB,IADAoM,IAAUA,EAAQrL,MAAMf,MACfmM,EAAQnM,GACfoM,EAAMD,GAASgF,EAAOhF,GAExB,OAAOC,CACT,CFwCmB4F,CAAUrG,GAEdyC,GACP0D,GAAW,EACXR,EVtCR,SAAqBd,EAAQF,GAC3B,GAAIA,EACF,OAAOE,EAAO5M,QAEhB,IAAI5D,EAASwQ,EAAOxQ,OAChBoI,EAAS8H,GAAcA,GAAYlQ,GAAU,IAAIwQ,EAAOtR,YAAYc,GAGxE,OADAwQ,EAAOyB,KAAK7J,GACLA,CACT,CU6BmB8J,CAAYN,GAAU,IAE1BG,GACPD,GAAW,EACXR,EAAWlB,GAAgBwB,GAAU,IAGrCN,EAAW,GjBpBnB,SAAuBzK,GACrB,IAAK0B,EAAa1B,IAAUmB,EAAWnB,IAAUgJ,GAC/C,OAAO,EAET,IAAItF,EAAQkF,GAAa5I,GACzB,GAAc,OAAV0D,EACF,OAAO,EAET,IAAIoC,EAAOlF,GAAe1E,KAAKwH,EAAO,gBAAkBA,EAAMrL,YAC9D,MAAsB,mBAARyN,GAAsBA,aAAgBA,GAClDrD,GAAavG,KAAK4J,IAASmD,EAC/B,CiBYaqC,CAAcP,IAAa9E,GAAY8E,IAC9CN,EAAW3F,EACPmB,GAAYnB,GACd2F,EAAWJ,GAAcvF,GAEjBnD,EAASmD,KAAa5C,EAAW4C,KACzC2F,EGlER,SAAyBrH,GACvB,MAAqC,mBAAtBA,EAAO/K,aAA8BwN,GAAYzC,GAE5D,GADAK,EAAWmF,GAAaxF,GAE9B,CH8DmBmI,CAAgBR,KAI7BE,GAAW,CAEd,CACGA,IAEFH,EAAMxP,IAAIyP,EAAUN,GACpBI,EAAUJ,EAAUM,EAAUH,EAAUL,EAAYO,GACpDA,EAAc,OAAEC,IAElBZ,GAAiB/G,EAAQC,EAAKoH,EAnD7B,CAoDH,CIxEA,SAASe,GAAUpI,EAAQkH,EAAQM,EAAUL,EAAYO,GACnD1H,IAAWkH,GAGfP,GAAQO,GAAQ,SAASS,EAAU1H,GAEjC,GADAyH,IAAUA,EAAQ,IAAI5B,IAClBvH,EAASoJ,GACXJ,GAAcvH,EAAQkH,EAAQjH,EAAKuH,EAAUY,GAAWjB,EAAYO,OAEjE,CACH,IAAIL,EAAWF,EACXA,EAAWH,GAAQhH,EAAQC,GAAM0H,EAAW1H,EAAM,GAAKD,EAAQkH,EAAQQ,QACvE9J,OAEaA,IAAbyJ,IACFA,EAAWM,GAEbZ,GAAiB/G,EAAQC,EAAKoH,EAC/B,CACF,GAAEzC,GACL,CCLA,ICxBwByD,GDwBpBC,ICxBoBD,GDwBG,SAASrI,EAAQkH,EAAQM,GAClDY,GAAUpI,EAAQkH,EAAQM,EAC5B,ECzBS1F,IAAS,SAAS9B,EAAQuI,GAC/B,IAAIrG,GAAS,EACTnM,EAASwS,EAAQxS,OACjBoR,EAAapR,EAAS,EAAIwS,EAAQxS,EAAS,QAAK6H,EAChD4K,EAAQzS,EAAS,EAAIwS,EAAQ,QAAK3K,EAWtC,IATAuJ,EAAckB,GAAStS,OAAS,GAA0B,mBAAdoR,GACvCpR,IAAUoR,QACXvJ,EAEA4K,GCNR,SAAwB5L,EAAOsF,EAAOlC,GACpC,IAAKzB,EAASyB,GACZ,OAAO,EAET,IAAIxB,SAAc0D,EAClB,SAAY,UAAR1D,EACKgE,GAAYxC,IAAWqB,EAAQa,EAAOlC,EAAOjK,QACrC,UAARyI,GAAoB0D,KAASlC,IAE7BuB,GAAGvB,EAAOkC,GAAQtF,EAG7B,CDNiB6L,CAAeF,EAAQ,GAAIA,EAAQ,GAAIC,KAClDrB,EAAapR,EAAS,OAAI6H,EAAYuJ,EACtCpR,EAAS,GAEXiK,EAAS9F,OAAO8F,KACPkC,EAAQnM,GAAQ,CACvB,IAAImR,EAASqB,EAAQrG,GACjBgF,GACFmB,GAASrI,EAAQkH,EAAQhF,EAAOiF,EAEnC,CACD,OAAOnH,CACX,KE5BO,MAAM0I,GAA+B,CAC1CC,WAAY,CACV/L,MAAO,SACPgM,WAAY,CACVC,QAAS/L,EAAiBgM,OAC1BC,UAAWjM,EAAiBkM,QAGhCC,eAAgB,CACdrM,OAAO,EACPgM,WAAY,CACVC,QAAS/L,EAAiBkM,MAC1BD,UAAWjM,EAAiBoM,OAGhCC,eAAgB,CACdvM,OAAO,EACPgM,WAAY,CACVC,QAAS/L,EAAiBkM,MAC1BD,UAAWjM,EAAiBoM,OAGhCE,aAAc,CACZxM,MAAO,GACPgM,WAAY,CACVC,QAAS/L,EAAiBgM,OAC1BC,UAAWjM,EAAiBoM,OAGhCG,mBAAoB,CAClBzM,OAAO,EACPgM,WAAY,CACVC,QAAS/L,EAAiBgM,OAC1BC,UAAWjM,EAAiBoM,OAGhCI,oBAAqB,CACnB1M,OAAO,EACPgM,WAAY,CACVC,QAAS/L,EAAiBkM,MAC1BD,UAAWjM,EAAiBoM,QAKrBK,GAAyB,CACpCC,QAAS,CACP5M,MAAO,EACPvE,KAAM,KAERoR,MAAO,CACL7M,MAAO,EACPvE,KAAM,KAERqR,UAAW,CACT9M,MAAO,GAET+M,QAAS,CACP/M,MAAO,GAETgN,YAAa,CACXhN,MAAO,IAETiN,WAAY,CACVjN,MAAO,IAAM,IAEfkN,aAAc,CACZlN,MAAO,GAETmN,iBAAkB,CAChBnN,MAAO,IAGLoN,GAA+B,CACnCC,SAAUvB,GACVwB,MAAOX,IAQT,IAAIY,GAAiC,KAQ9B,MAAMC,GAAW,KACtB,MAAMC,EAAaC,SAASC,iBAC1BC,KAAKC,UAAUC,OAAoB,OAErCA,OAAOC,kBAA+B,KAAIN,EAEtCF,KACFnV,EAAOmB,MAAM,uCACbyU,aAAaT,KAEfA,GAAkBU,YAAW,KAC3BC,kCAAkC,QAClC9V,EAAOmB,MAAM,CACXZ,QAAS,uCACT2P,KAAMmF,IAERU,IAAkB,GACjB,IAAK,EC5GGC,GAAWC,EAAY3O,YAAY,CAC9CxE,KAAM+E,EACN3B,SAAU2B,EACVnH,QnGRwB,QmGSxByF,WnGPqB,mCmGUjB,SAAUoD,GAAS2M,GACvB,QAASA,GAAsB,iBAARA,IAAqBpU,MAAMC,QAAQmU,EAC5D,CAaO,MAAMC,GAAiB5V,IAC5B,IAAK6V,2BAA4B,OACjC,MAAMC,EAAaC,SAASC,cAAc,OAC1CF,EAAWG,UAAYjW,EACpBmE,MAAM,MACNiB,KAAK8Q,GAASA,EAAKC,SACnB9R,KAAK,SACRyR,EAAWM,UAAUvU,IAAI,oBACzBkU,SAASM,cAAc,qBAAqBC,YAAYR,GACxDS,mBAAmB,kBAAkB,EAgChC,MAsBMC,GAAoBC,GAExB,GADPA,EAAaA,GAAc,UACHpW,KAAK4K,SAASoB,KAAKqK,SACxC3T,SAAS,IACT4T,OAAO,EAAG,KCxFR,MAAMC,GAA+C,IAAI7U,UACnD8U,GAOX,WAAAnX,CAAYoX,EAAgB7N,EAAc8N,EAAkB,KAD5DpX,KAAAqX,YAAsB3W,KAAK4K,MAEzBtL,KAAKmX,OAASA,EACdnX,KAAKsX,MAAQ,UACbtX,KAAKsJ,KAAOA,EACZtJ,KAAKuX,GAAKV,GAAiBvN,GAC3BtJ,KAAKoX,QAAUA,EACfH,GAAgBjU,IAAIhD,KAAKuX,GAAIvX,MAC7B2V,YAAW,KACU,YAAf3V,KAAKsX,QACTtX,KAAKsX,MAAQ,WACbtX,KAAKwX,OAAM,GACVJ,GACHpX,KAAKwX,MACN,CACD,IAAAA,GACE,MAAMnX,EAAuC,CAC3CoX,KAAM,SACNC,QAAS,UACTC,OAAQnC,OAAOoC,aACfC,OAAQ7X,KAAKmX,OACbW,WAAY,CACV,CACEzX,QAAS,CACPiJ,KAAMtJ,KAAKsJ,KACXgO,MAAOtX,KAAKsX,MACZC,GAAIvX,KAAKuX,OAKjBQ,WAAW,eAAgB1X,EAC5B,CACD,MAAA2X,GACEhY,KAAKsX,MAAQ,YACbtX,KAAKwX,MACN,QC9CUS,GAMX,WAAAlY,GADAC,KAAMkY,QAAY,EAEhB9B,SAAS+B,iBAAiB,SAAS,KACX,aAAlBC,eACFpY,KAAKqY,QACLrY,KAAKsY,WAAWC,MAAMC,QAAU,QAEhCxY,KAAKsY,WAAWC,MAAMC,QAAU,OACjC,IAEHxY,KAAKsY,WAAalC,SAASC,cAAc,UACzCrW,KAAKsY,WAAW7B,UAAUvU,IAAI,uBAC9BlC,KAAKsY,WAAWG,YAAc,aAC9BC,GAAQ/B,YAAY3W,KAAKsY,YAEzBtY,KAAK2Y,YAAcvC,SAASC,cAAc,OAC1C,IAAIuC,GAAe5Y,KAAK2Y,aAExB3Y,KAAK2Y,YAAYlC,UAAUvU,IAAI,mBAC/BlC,KAAK2Y,YAAYrC,UAAY,kSAQzBtW,KAAK6Y,oBAAoB,sBAAuB,yBAChD7Y,KAAK6Y,oBAAoB,oBAAqB,sBAC9C7Y,KAAK6Y,oBAAoB,gBAAiB,mBAC1C7Y,KAAK6Y,oBAAoB,kBAAmB,qBAC5C7Y,KAAK6Y,oBAAoB,eAAgB,0BACzC7Y,KAAK6Y,oBAAoB,mBAAoB,oDAKjD7Y,KAAK8Y,eAAiB9Y,KAAK2Y,YAAYjC,cACrC,uBAEF1W,KAAK+Y,YAAc/Y,KAAK2Y,YAAYjC,cAClC,oBAGF1W,KAAK8Y,eAAeX,iBAAiB,SAAS,IAAMnY,KAAKgZ,SACzDN,GAAQ/B,YAAY3W,KAAK2Y,aACzB3Y,KAAKsY,WAAWH,iBAAiB,SAAS,KACpCnY,KAAK2Y,YAAYlC,UAAUwC,SAAS,cACtCjZ,KAAKkZ,OAELlZ,KAAKqY,OACN,IAEHrY,KAAK+Y,YAAYZ,iBAAiB,SAAS,IAAMnY,KAAKqY,UACtDrY,KAAKmZ,QACN,CACD,KAAAd,GACErY,KAAK2Y,YAAYlC,UAAUvU,IAAI,aAChC,CACD,IAAAgX,GACElZ,KAAK2Y,YAAYlC,UAAU2C,OAAO,cAClCpZ,KAAK2Y,YAAYJ,MAAMc,IAAM,MAC7BrZ,KAAK2Y,YAAYJ,MAAMe,KAAO,KAC/B,CACD,IAAAN,GACEhZ,KAAK2Y,YAAYlC,UAAU8C,OAAO,yBAClCvZ,KAAK8Y,eAAeL,YAAczY,KAAKkY,OAAS,IAAM,IACtDlY,KAAKkY,QAAUlY,KAAKkY,MACrB,CACD,mBAAAW,CAAoBW,EAAmBC,GACrC,MAAO,oDAC0DD,OAAeC,sGAEqBD,2CAGtG,CACD,YAAML,GACJ,MAAMO,EAAc,CAACF,EAAmB9R,KACtC1H,KAAK2Y,YACFjC,cAAgC,QAAoB8C,YACnDG,aAAa,QAAS,GAAW,IAARjS,GAC7B,MAAMkS,EACJ5Z,KAAK2Y,YAAYjC,cACf,QAAoB8C,OAEpBI,IACFA,EAAiBnB,YAAiB/L,KAAKmN,MAAc,IAARnS,GAAgB,GAA9B,IAChC,EAGHgS,EAAY,sBAAuBI,GAAWC,MAAMC,qBACpDN,EAAY,oBAAqBI,GAAWC,MAAME,mBAClDP,EAAY,gBAAiBI,GAAWC,MAAMG,eAC9CR,EAAY,kBAAmBI,GAAWC,MAAMI,iBAChDT,EAAY,eAAgBI,GAAWC,MAAMnF,cAC7C8E,EAAY,mBAAoBI,GAAWC,MAAMlF,iBAClD,EAEH,MAAM+D,GAYJ,WAAA7Y,CAAYqa,EAAsBC,GAAqB,GAXvDra,KAAIsa,KAAW,EACfta,KAAIua,KAAW,EACfva,KAAIwa,KAAW,EACfxa,KAAIya,KAAW,EAEfza,KAAU0a,YAAY,EACtB1a,KAAU2a,YAAY,EACtB3a,KAAe4a,gBAAkB,KACjC5a,KAAA6a,cAAwB,GACxB7a,KAASqa,WAAY,EAGnBra,KAAKoa,QAAUA,EACfpa,KAAKqa,UAAYA,EAEjBra,KAAK8a,YAAc9a,KAAK8a,YAAYC,KAAK/a,MACzCA,KAAKgb,YAAchb,KAAKgb,YAAYD,KAAK/a,MACzCA,KAAKib,UAAYjb,KAAKib,UAAUF,KAAK/a,MACrCA,KAAKkb,aAAelb,KAAKkb,aAAaH,KAAK/a,MAC3CA,KAAKmb,aAAenb,KAAKmb,aAAaJ,KAAK/a,MAC3CA,KAAKob,qBAAuBpb,KAAKob,qBAAqBL,KAAK/a,MAE3DA,KAAKoa,QAAQjC,iBAAiB,YAAanY,KAAK8a,aAEhD9a,KAAKoa,QAAQjC,iBAAiB,YAAanY,KAAKob,sBAChDpb,KAAKoa,QAAQ7B,MAAM8C,SAAW,QAEzBrb,KAAKqa,YAGVra,KAAKoa,QAAQ7B,MAAM+C,OAAS,OAC5Btb,KAAKoa,QAAQjC,iBAAiB,aAAcnY,KAAKkb,cACjDlb,KAAKoa,QAAQjC,iBAAiB,aAAcnY,KAAKmb,cAClD,CAED,YAAAD,CAAaK,GAEXvb,KAAKoa,QAAQjC,iBAAiB,YAAanY,KAAKob,qBACjD,CAED,YAAAD,CAAaI,GAEXvb,KAAKoa,QAAQoB,oBAAoB,YAAaxb,KAAKob,sBACnDpb,KAAKoa,QAAQ7B,MAAMkD,OAAS,SAC7B,CAED,oBAAAL,CAAqBG,GAEnB,MAAMG,QAAEA,EAAOC,QAAEA,GAAYJ,GACvBK,YAAEA,EAAWC,aAAEA,GAAiB7b,KAAKoa,QACtCpa,KAAKqa,YACNqB,EAAU1b,KAAK6a,eAERa,EAAUE,EAAc5b,KAAK6a,cADtC7a,KAAKoa,QAAQ7B,MAAMkD,OAAS,YAGnBE,EAAU3b,KAAK6a,eAEfc,EAAUE,EAAe7b,KAAK6a,cADvC7a,KAAKoa,QAAQ7B,MAAMkD,OAAS,YAI5Bzb,KAAKoa,QAAQ7B,MAAMkD,OAAS,UAE/B,CAED,WAAAX,CAAYS,GACV,MAAMG,QAAEA,EAAOC,QAAEA,GAAYJ,GACvBK,YAAEA,EAAWC,aAAEA,GAAiB7b,KAAKoa,QAGvCpa,KAAKqa,UACHqB,EAAU1b,KAAK6a,eACjB7a,KAAK2a,YAAa,EAClB3a,KAAK4a,gBAAkB,QACdc,EAAUE,EAAc5b,KAAK6a,eACtC7a,KAAK2a,YAAa,EAClB3a,KAAK4a,gBAAkB,SACde,EAAU3b,KAAK6a,eACxB7a,KAAK2a,YAAa,EAClB3a,KAAK4a,gBAAkB,OACde,EAAUE,EAAe7b,KAAK6a,eACvC7a,KAAK2a,YAAa,EAClB3a,KAAK4a,gBAAkB,UAEvB5a,KAAK0a,YAAa,EAGpB1a,KAAK0a,YAAa,GAGhB1a,KAAK0a,YAAc1a,KAAK2a,cAC1BY,EAAMO,iBACN9b,KAAKwa,KAAOe,EAAMQ,QAClB/b,KAAKya,KAAOc,EAAMS,QAClB5F,SAAS+B,iBAAiB,YAAanY,KAAKgb,aAC5C5E,SAAS+B,iBAAiB,UAAWnY,KAAKib,WAE7C,CAED,WAAAD,CAAYO,GACV,GAAIvb,KAAK0a,WAEP1a,KAAKsa,KAAOta,KAAKwa,KAAOe,EAAMQ,QAC9B/b,KAAKua,KAAOva,KAAKya,KAAOc,EAAMS,QAE9Bhc,KAAKwa,KAAOe,EAAMQ,QAClB/b,KAAKya,KAAOc,EAAMS,QAElBhc,KAAKoa,QAAQ7B,MAAMc,IAASrZ,KAAKoa,QAAQ6B,UAAYjc,KAAKua,KAAjC,KACzBva,KAAKoa,QAAQ7B,MAAMe,KAAUtZ,KAAKoa,QAAQ8B,WAAalc,KAAKsa,KAAlC,UACrB,GAAIta,KAAK2a,WAAY,CAE1B,MAAMwB,EAASZ,EAAMQ,QAAU/b,KAAKwa,KAC9B4B,EAASb,EAAMS,QAAUhc,KAAKya,KAE9BlC,EAAQ8D,iBAAiBrc,KAAKoa,SAC9Bd,EAAOgD,SAAS/D,EAAMe,KAAM,IAC5BD,EAAMiD,SAAS/D,EAAMc,IAAK,IAC1BkD,EAAQD,SAAS/D,EAAMgE,MAAO,IAC9BC,EAASF,SAAS/D,EAAMiE,OAAQ,IAEtC,OAAQxc,KAAK4a,iBACX,IAAK,OACH5a,KAAKoa,QAAQ7B,MAAMgE,MAAWA,EAAQJ,EAAX,KAC3Bnc,KAAKoa,QAAQ7B,MAAMe,KAAO,GAAGA,EAAO6C,EAAS,MAC7C,MACF,IAAK,QACHnc,KAAKoa,QAAQ7B,MAAMgE,MAAQ,GAAGA,EAAQJ,MACtCnc,KAAKoa,QAAQ7B,MAAMe,KAAO,GAAGA,EAAO6C,EAAS,MAC7C,MACF,IAAK,MACHnc,KAAKoa,QAAQ7B,MAAMiE,OAAYA,EAASJ,EAAZ,KAC5Bpc,KAAKoa,QAAQ7B,MAAMc,IAAM,GAAGA,EAAM+C,EAAS,MAC3C,MACF,IAAK,SACHpc,KAAKoa,QAAQ7B,MAAMiE,OAAS,GAAGA,EAASJ,MACxCpc,KAAKoa,QAAQ7B,MAAMc,IAAM,GAAGA,EAAM+C,EAAS,MAI/Cpc,KAAKwa,KAAOe,EAAMQ,QAClB/b,KAAKya,KAAOc,EAAMS,OACnB,CACF,CAED,SAAAf,CAAUM,GACRA,EAAMO,iBAEN9b,KAAK0a,YAAa,EAClB1a,KAAK2a,YAAa,EAClB3a,KAAK4a,gBAAkB,KACvBxE,SAASoF,oBAAoB,YAAaxb,KAAKgb,aAC/C5E,SAASoF,oBAAoB,UAAWxb,KAAKib,UAC9C,QA+BUwB,GAMX,WAAA1c,CACEM,EACAqc,EACAC,EACAvF,GAAkB,GALpBpX,KAAA4c,OAAsBxG,SAASC,cAAc,OAO3C,IAAIuC,GAAe5Y,KAAK4c,QACxB5c,KAAKuX,GAAKV,KACV7W,KAAKK,QAAUA,EACfL,KAAK0c,SAAWA,EAChB1c,KAAK2c,OAASA,EACd3c,KAAK6c,QACY,IAAbzF,GACJzB,YAAW,KACT3V,KAAK4c,OAAOxD,QAAQ,GACnBhC,EACJ,CAED,IAAAyF,GACE7c,KAAK4c,OAAOnG,UAAUvU,IAAI,cAC1BlC,KAAK4c,OAAOrF,GAAKvX,KAAKuX,GACtBvX,KAAK4c,OAAOtG,UAAY,MAAMtW,KAAKK,2HACnCqY,GAAQ/B,YAAY3W,KAAK4c,QACzB5c,KAAK4c,OACFlG,cAAc,IAAI1W,KAAKuX,sBACtBY,iBAAiB,SAAS,KAC1BnY,KAAK0c,WACL1c,KAAK4c,OAAOxD,QAAQ,IAExBpZ,KAAK4c,OACFlG,cAAc,IAAI1W,KAAKuX,qBACtBY,iBAAiB,SAAS,KAC1BnY,KAAK2c,SACL3c,KAAK4c,OAAOxD,QAAQ,GAEzB,EA+CI,MAAMV,GAAUtC,SAASC,cAAc,OACvC,IAAIyG,GACXpE,GAAQjC,UAAUvU,IAAI,eAEf,MClXD6a,GAAyD,IAAI3a,IAAI,CACrE,CAAC,OAAQ,IACT,CAAC,SAAU,GACX,CAAC,OAAQ,KACT,CAAC,SAAU,GACX,CAAC,UAAW,KAGD0X,GAAa,CACxBkD,WAAY,KACVlD,GAAWC,MAAMlF,kBAAoBoI,IAA4B,EAEnE9D,OAAQ,KAENW,GAAWC,MAAMlF,kBAAoBqI,KACrCpD,GAAWC,MAAMoD,cACfrD,GAAWC,MAAMrF,YAAcoF,GAAWsD,SAASC,gBACrDvD,GAAWC,MAAMuD,YACfxD,GAAWC,MAAMpF,WAAamF,GAAWsD,SAASC,gBAEpDvD,GAAWyD,iBACXzD,GAAW0D,iBACXC,GAAYC,MAAM,EAEpBH,eAAgB,MAEXzD,GAAWsD,SAASrJ,iBACnB4J,GAAkBC,SAClBC,GACE/D,GAAWC,MAAMnF,aACjBkF,GAAWC,MAAMI,iBACfzN,KAAKqK,UACT+C,GAAWC,MAAMI,iBACf0D,GAAqB/D,GAAWC,MAAMnF,aAAc,KAExDkJ,cACE,cACA,GACED,GACE/D,GAAWC,MAAMnF,aACjBkF,GAAWC,MAAMI,iBAErB,OAEH,EAEHqD,eAAgB,MAEX1D,GAAWsD,SAASnJ,iBACnB0J,GAAkBC,SAClBC,GACE/D,GAAWC,MAAMnF,aACjBkF,GAAWC,MAAMG,eACfxN,KAAKqK,UACT+C,GAAWC,MAAMG,eACf2D,GAAqB/D,GAAWC,MAAMnF,aAAc,KAExDkJ,cACE,eACA,GACED,GACE/D,GAAWC,MAAMnF,aACjBkF,GAAWC,MAAMG,eAErB,OAEH,EAEH6D,eAAgB,KACd,MAAMC,EAAalE,GAAWC,MAAMI,gBAAkB,GAChD8D,GAAcD,EACdE,EAASpE,GAAWC,MAAMI,gBAAkB,GAC9C6D,EACF/H,GAAc,uDAGZgI,IACFnE,GAAWC,MAAMoE,cAAgBrE,GAAWC,MAAMoD,aAClDrD,GAAWC,MAAMI,gBAAkB,EACnClE,GAAc,+CAEZiI,EACFpE,GAAWC,MAAMnF,cAAgB,IAEjCkF,GAAWC,MAAMnF,cAAgB,IAClC,EAEHwJ,aAAc,KACZ,MAAMJ,EAAalE,GAAWC,MAAMG,cAAgB,GAC9C+D,GAAcD,EACdE,EAASpE,GAAWC,MAAMG,cAAgB,GAC5C8D,EACF/H,GAAc,oDAGZgI,IACFnE,GAAWC,MAAMsE,gBAAkBvE,GAAWC,MAAMuD,WACpDxD,GAAWC,MAAMG,cAAgB,EACjCjE,GAAc,4CAEZiI,EACFpE,GAAWC,MAAMnF,cAAgB,IAEjCkF,GAAWC,MAAMnF,cAAgB,IAClC,EAGHmF,MAAO,CACL,oBAAIlF,CAAiBnN,GACfA,EAAQ,IAAGA,EAAQ,GACnBA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMH,iBAAiBnN,MAAQA,EACrDoV,GAAgB3D,QACjB,EACD,oBAAItE,GACF,OAAOW,OAAoB,KAAER,MAAMH,iBAAiBnN,KACrD,EACD,gBAAIkN,CAAalN,GACXA,EAAQ,IAAGA,EAAQ,GACnBA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMJ,aAAalN,MAAQA,EACjDoV,GAAgB3D,QACjB,EACD,gBAAIvE,GACF,OAAOY,OAAoB,KAAER,MAAMJ,aAAalN,KACjD,EAGD,eAAIgN,CAAYhN,GACVA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMN,YAAYhN,MAAQA,CACjD,EACD,eAAIgN,GACF,OAAOc,OAAoB,KAAER,MAAMN,YAAYhN,KAChD,EACD,cAAIiN,CAAWjN,GACTA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAML,WAAWjN,MAAQA,CAChD,EACD,cAAIiN,GACF,OAAOa,OAAoB,KAAER,MAAML,WAAWjN,KAC/C,EAID,gBAAIyV,CAAazV,GACXoS,GAAWsD,SAASrJ,iBACpBrM,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMV,QAAQ5M,MAAQA,EAC5CoV,GAAgB3D,SACjB,EACD,gBAAIgE,GACF,OAAO3H,OAAoB,KAAER,MAAMV,QAAQ5M,KAC5C,EACD,eAAI4W,CAAY5W,GACVA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMV,QAAQnR,KAAOuE,EAC3CoV,GAAgB3D,QACjB,EACD,eAAImF,GACF,OAAO9I,OAAoB,KAAER,MAAMV,QAAQnR,IAC5C,EACD,gBAAIgb,CAAazW,GACXA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMP,QAAQ/M,MAAQA,EAC5C6W,KACAzB,GAAgB3D,QACjB,EACD,gBAAIgF,GACF,OAAO3I,OAAoB,KAAER,MAAMP,QAAQ/M,KAC5C,EAED,mBAAIyS,CAAgBzS,GACdA,EAAQ,IAAGA,EAAQ,GACvB1H,KAAKmd,aAAezV,EAAQ1H,KAAKse,YACjCxB,GAAgB3D,QACjB,EACD,mBAAIgB,GACF,OAAOna,KAAKmd,aAAend,KAAKse,WACjC,EAGD,cAAIhB,CAAW5V,GACToS,GAAWsD,SAASnJ,iBACpBvM,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMT,MAAM7M,MAAQA,EAC1CoV,GAAgB3D,SACjB,EACD,cAAImE,GACF,OAAO9H,OAAoB,KAAER,MAAMT,MAAM7M,KAC1C,EAED,aAAI8W,CAAU9W,GACRA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMT,MAAMpR,KAAOuE,EACzCoV,GAAgB3D,QACjB,EACD,aAAIqF,GACF,OAAOhJ,OAAoB,KAAER,MAAMT,MAAMpR,IAC1C,EACD,kBAAIkb,CAAe3W,GACbA,EAAQ,IAAGA,EAAQ,GACvB8N,OAAoB,KAAER,MAAMR,UAAU9M,MAAQA,EAC9C6W,KACAzB,GAAgB3D,QACjB,EACD,kBAAIkF,GACF,OAAO7I,OAAoB,KAAER,MAAMR,UAAU9M,KAC9C,EAED,iBAAIwS,CAAcxS,GACZA,EAAQ,IAAGA,EAAQ,GACvB1H,KAAKsd,WAAa5V,EAAQ1H,KAAKwe,UAC/B1B,GAAgB3D,QACjB,EACD,iBAAIe,GACF,OAAOla,KAAKsd,WAAatd,KAAKwe,SAC/B,EAED,uBAAIxE,GACF,OAAOha,KAAKqe,eAAiBI,IAC9B,EACD,uBAAIzE,CAAoBtS,GAClBA,EAAQ,IAAGA,EAAQ,GACvB1H,KAAKqe,eAAiB3W,EAAQ+W,IAC/B,EACD,qBAAIxE,GACF,OAAOja,KAAKme,aAAeM,IAC5B,EACD,qBAAIxE,CAAkBvS,GAChBA,EAAQ,IAAGA,EAAQ,GACvB1H,KAAKme,aAAezW,EAAQ+W,IAC7B,GAEHrB,SAAU,CACR,cAAI3J,CAAW/L,GACb8N,OAAoB,KAAET,SAAStB,WAAW/L,MAAQA,EAClD+V,GAAYC,MACb,EACD,kBAAI3J,CAAerM,GACjB8N,OAAoB,KAAET,SAAShB,eAAerM,MAAQA,EACtD+V,GAAYC,MACb,EACD,kBAAIzJ,CAAevM,GACjB8N,OAAoB,KAAET,SAASd,eAAevM,MAAQA,EACtD+V,GAAYC,MACb,EACD,YAAAgB,CAAanH,GACX/B,OAAoB,KAAIpC,GAAMoC,OAAoB,KAAG,CACnDT,SAAU,CACRb,aAAc,CACZxM,MAAO,IAAI8N,OAAoB,KAAET,SAASb,aAAaxM,MAAO6P,OAIpEkG,GAAYC,MACb,EACD,eAAAiB,CAAgBpH,GACd/B,OAAoB,KAAIpC,GAAMoC,OAAoB,KAAG,CACnDT,SAAU,CACRb,aAAc,CACZxM,MAAO8N,OAAoB,KAAET,SAASb,aAAaxM,MAAM1F,QACtD4c,GAAMA,IAAMrH,QAKrBkG,GAAYC,MACb,EACD,sBAAIvJ,CAAmBzM,GACrB8N,OAAoB,KAAET,SAASZ,mBAAmBzM,MAAQA,EAC1D+V,GAAYC,MACb,EACD,cAAIjK,GACF,OAAO+B,OAAoB,KAAET,SAAStB,WAAW/L,KAClD,EACD,mBAAI2V,GACF,MAAMwB,EAAa9B,GAAiBpa,IAClC6S,OAAoB,KAAET,SAAStB,WAAW/L,OAE5C,QAAyB,IAAdmX,EACT,MAAM,IAAIrd,MAAM,4BAElB,OAAOqd,CACR,EACD,kBAAI9K,GACF,OAAOyB,OAAoB,KAAET,SAAShB,eAAerM,KACtD,EACD,kBAAIuM,GACF,OAAOuB,OAAoB,KAAET,SAASd,eAAevM,KACtD,EACD,gBAAIwM,GACF,OAAOsB,OAAoB,KAAET,SAASb,aAAaxM,KACpD,EACD,sBAAIyM,GACF,OAAOqB,OAAoB,KAAET,SAASZ,mBAAmBzM,KAC1D,IAIC+V,GAAc,UHhQlB,WAAA1d,CAAY+e,GAFJ9e,KAAY+e,aAAW,EAG7B/e,KAAK8e,oBAAsBA,CAC5B,CACD,IAAApB,GACMhd,KAAK4K,MAAQtL,KAAK+e,aAAe/e,KAAK8e,sBACxC5J,KACAlV,KAAK+e,aAAere,KAAK4K,MAE5B,GGwP2B,MAExBqS,GAAoB,UHvNxB,WAAA5d,CAAYif,GAFJhf,KAAYif,aAAW,EAG7Bjf,KAAKgf,oBAAsBA,CAC5B,CACD,KAAApB,GACE,OAAIld,KAAK4K,MAAQtL,KAAKif,aAAejf,KAAKgf,sBACxChf,KAAKif,aAAeve,KAAK4K,OAClB,EAGV,CACD,KAAA4T,GACElf,KAAKif,aAAe,CACrB,CACD,OAAAE,GACE,OAAOze,KAAK4K,MAAQtL,KAAKif,aAAejf,KAAKgf,mBAC9C,GGwMqC,MAEvCza,OAAeuV,WAAaA,GCxTtB,MAAMsF,GAAY,CAAC9V,EAA+B,SACvD,MAAM+V,EAAaZ,KACnB,MAAa,QAATnV,EACKwQ,GAAWC,MAAMoE,cAAgBkB,EAE7B,SAAT/V,EACKwQ,GAAWC,MAAMsE,gBAAkBgB,EAG1CvF,GAAWC,MAAMsE,gBAAkBgB,GACnCvF,GAAWC,MAAMoE,cAAgBkB,CACjC,EAESC,GAAgB,KAC3B,MAAMD,EAAaZ,KACnB,OACE3E,GAAWC,MAAMsE,eAAiBvE,GAAWC,MAAMoE,cACnDkB,EAAa,CACb,EAESE,GAAYC,GAErBA,EAAKC,MAAMC,YAAYC,cAAcrc,SAAS,WAC9Ckc,EAAKC,MAAMC,eAAeE,GAASC,QAGvB,SAAAC,GAAUC,EAAoBvK,QAC5C,IAAKuK,EAAQ,OAAO,EACpB,MAAMC,EAAaC,aAAaF,EAAQ,cAClCG,EAAUD,aAAaF,EAAQ,WACrC,OAAOI,QACJH,GAAcT,GAASS,IAAiBE,GAAWX,GAASW,GAEjE,CAQM,SAAUE,GACdC,EACAC,EACAC,EAAgB,IAEhB,IAAIC,EAAQC,aAAaJ,GACrBK,EAAQD,aAAaH,GACrBK,EAAmB,CACrB7e,EAAG4K,KAAKkU,MAAMJ,EAAM1e,EAAIye,EAAQG,EAAM5e,GAAK,EAAIye,IAC/Cxa,EAAG2G,KAAKkU,MAAMJ,EAAMza,EAAIwa,EAAQG,EAAM3a,GAAK,EAAIwa,IAC/CM,EAAGnU,KAAKkU,MAAMJ,EAAMK,EAAIN,EAAQG,EAAMG,GAAK,EAAIN,KAEjD,OAAOO,aAAa,CAACH,EAAO7e,EAAG6e,EAAO5a,EAAG4a,EAAOE,GAClD,CACM,SAAUE,GACd3gB,EACA4gB,EACAC,EACAC,GAEA,OAAI9gB,EAAQ,IACHA,EAAQ,GACX4gB,EACAZ,GAAaY,EAAWC,EAAU7gB,EAAQ,KAEvCggB,GAAaa,EAAUC,EAAU9gB,EAE5C,CAEO,MAAM+gB,GAAiB,CAC5BC,EACAC,EACAC,EACAvB,EAA0BvK,UAE1B,MAAMgK,EAAOS,aAAaF,EAAQqB,GAClC,GAAI5B,GAAQD,GAASC,GAAO,CAC1B,MAAMlW,SAAckW,EAAKC,MAAM8B,aACzBC,EACJ5B,GAASC,QAAQL,EAAKC,MAAMC,aAE1BpW,WAAgBkW,EAAKiC,QACvBjC,EAAKiC,MAAQjC,EAAKC,MAAM8B,cAEb,WAATjY,GAAqBgM,KAAKC,UAAUiK,EAAKiC,OAAOne,SAAS,eAC3Dkc,EAAKiC,MAAQnM,KAAKoM,MAChBpM,KAAKC,UAAUiK,EAAKiC,OAAOpe,WAAW,aAAc,eAGxD,MAAMse,EAAmBnC,EAAKiC,OAASjC,EAAKC,MAAM8B,aAC9C,iBAAkBC,IACpBG,EAAMH,EAAOH,cAAgBA,GAE3B,mBAAoBG,IACtBG,EAAMH,EAAOF,gBAAkBA,GAEjC9B,EAAKiC,MAAQE,CACd,GAEUpD,GAAoB,KAC/B,MAAMqD,EAAY9H,GAAWC,MAAMsE,eAAiBI,KAC9CoD,EAAW/H,GAAWC,MAAMoE,aAAeM,KAE3CqD,EAAYf,GAChBa,EACAhC,GAASmC,aAA0B,YACnCnC,GAASmC,aAAyB,WAClCnC,GAASmC,aAAoB,OAEzBC,EAAWjB,GACfc,EACAjC,GAASmC,aAAyB,WAClCnC,GAASmC,aAAwB,UACjCnC,GAASmC,aAAoB,OAGzBV,EAAejB,GAAa0B,EAAWE,EAAU,IACjDV,EAAiBlB,GAAa0B,EAAWE,EAAU,IAEzDb,GAAe,aAAcE,EAAcC,EAAgB9L,QAC3D2L,GAAe,UAAWE,EAAcC,EAAgB9L,QACxDyM,iBAAiBzM,QAAQ,GACzB0M,wBAAwB1M,OAAO,EAIjB,SAAAiJ,GAAoBsB,EAA0BvK,QAC5D,MAAMwK,EAAaC,aAAaF,EAAQ,cAClCG,EAAUD,aAAaF,EAAQ,WACrC,IAAI5c,EAAO,EAOX,OANI6c,GAAcT,GAASS,KACzB7c,GAAQgf,GAAcnC,IAEpBE,GAAWX,GAASW,KACtB/c,GAAQgf,GAAcjC,IAEjB/c,CACT,CACM,SAAUgf,GAAcX,GAC5B,MAC+B,0BAA7BA,EAAO/B,MAAMC,aAC0B,IAAvC8B,EAAOY,UAAUC,YAAYC,MAEtB1C,GAAS2C,gBAAgBC,YAE3B5C,GAAS2C,gBACd3C,GAASC,QAAQ2B,EAAO/B,MAAMC,aAC3Bvc,KAEP,CAsBM,SAAU0a,GACd4E,EACAC,EACAC,EAAsB,EACtBC,EAAgC,GAEhC,MAWMC,GAXqB,GAMJnW,KAAKoW,IAAIL,EAAc,GALvB,GAMJ/V,KAAKoW,IAAIJ,EAAU,GALjB,GAMJC,IAEE,GAAK,EAPL,GAOSC,IAG5B,OAAOlW,KAAKqW,IAAIrW,KAAKC,IAAIkW,EAAW,GAAI,EAC1C,CAGO,MAAMG,GAAwB,KACnC,MAAMC,EAAoBzN,OAAO0N,WAAWzd,KACzC0d,GAAaA,EAAS1D,MAAMC,cAEzB0D,EAAUxD,GAASyD,YAAYC,OAAO,CAC1C,OACA,WACA,QACCthB,QAAQuhB,GACTN,EAAkBO,MAAMC,GACtBA,EAAiBC,oBAAoBpgB,SAASigB,OAGlD,OAAO7W,KAAKqW,IAAqB,IAAjBK,EAAQviB,OAAe,EAAE,EAE9Bqc,GAA2B,KAItC,IAAIyG,EAAW,EAAIX,KAInB,OAvLOxN,OAAO0N,WAAWM,MAAML,GACtBvD,GAASyD,YAAY/f,SAAS6f,EAAS1D,MAAMC,iBAmL1BiE,GAAY,GACpCrE,OAAiBqE,GAAY,KAC7BvE,OAAauE,GAAY,IACtBA,EAAQ,GAAa,EAGxB,SAAUC,GAAuBC,GACrC,MAAMC,EAAS,CACb,CAAEC,KAAM,KAASlX,MAAO,EAAGmX,IAAK,KAChC,CAAED,KAAM,KAASlX,MAAO,IAAMmX,IAAK,IACnC,CAAED,KAAM,KAASlX,MAAO,GAAKmX,IAAK,KAClC,CAAED,KAAM,KAAUlX,MAAO,IAAMmX,IAAK,IAEtC,IAAK,MAAMD,KAAEA,EAAIlX,MAAEA,EAAKmX,IAAEA,KAASF,EACjC,GACEhK,GAAWC,MAAMnF,cAAgB/H,GACjCiN,GAAWC,MAAMnF,aAAeoP,EAEhC,OAAOH,EAAUE,EAGrB,OAAO,CACT,CAEO,MAAM9G,GAA6B,KACxC,MAAM0G,EAAW,EAAIX,KACrB,OAAIlJ,GAAWC,MAAMlF,iBAAmB,KAEtC,IAAOiF,GAAWC,MAAMlF,kBACxBiF,GAAWC,MAAMlF,iBAAmB,IACpCyK,KAJmDqE,EAAW,IAQ9D,GAAM7J,GAAWC,MAAMlF,kBACvBiF,GAAWC,MAAMlF,iBAAmB,KACpCuK,KAEOuE,EAAW,IAElB,IAAO7J,GAAWC,MAAMlF,kBACxBiF,GAAWC,MAAMlF,iBAAmB,GACpCuK,KAEOuE,EAAW,KACb,CAAC,EAGGM,GAAe,CAAClE,EAAoBvK,UAC/C,MAAM0O,EAAgBnE,EAAOnI,eAAiBpC,OAAOoC,aACrD5W,QAAQb,IAAI,gBAAiB+jB,EAAenE,EAAOnI,cAC/CsM,GAAiBnE,EAAOnI,aAC1B,IAAIV,GAAe6I,EAAOnI,aAAc,eAAgB,SAI1DkC,GAAWC,MAAMsE,eAAiB,EAClCvE,GAAWC,MAAMoE,aAAe,EAChCI,KAAmB,ECtRf,SAAU4F,GAAaC,GAC3B,MAAMC,EAAYC,kBAAkBC,MACjCjiB,GAAMA,EAAEsV,eAAiBwM,IAG5B,OAAKC,GAIDA,GAAWG,WACNH,GAJA,IAQX,CAEM,SAAUI,GAAiBL,GAC/B,IAAKA,EACH,MAAO,UAET,MAAMC,EAAYF,GAAaC,GAE/B,OAAKC,EAGEA,EAAUK,SAAWL,EAAUK,SAAWL,EAAUM,KAFlD,SAGX,CCRA,MAAMC,GAA2B,CAACxH,EAAuBjG,KACvD,MAAM0N,ENoB+B,CAAC1N,GAClCA,EAAOS,eAAiBpC,OAAOoC,aAAqBhQ,EAAiBoM,KACrEmD,EAAO2N,kBAA0Bld,EAAiBkM,MAClDqD,EAAO4N,kBAA0Bnd,EAAiBod,OAElD7N,EAAOS,cAAgBpC,OAAOyP,YAAY3hB,SAAS6T,EAAOS,cACrDhQ,EAAiBsd,QAEtBC,2BAA2B3P,OAAQ2B,GAC9BvP,EAAiBwd,eAEnBxd,EAAiBgM,OM/BIyR,CAAwBlO,GAEpD,OAAOnS,OAAOjC,QAAQqa,GAAUkI,QAAO,CAACC,GAAMxa,EAAKrD,MAC7CA,EAAMgM,WAAWC,SAAWkR,IAC9BU,EAAIxa,GAA4BrD,GAE3B6d,IACN,CAAiB,EAAC,EAGVC,GACXnlB,IAEA,MAAMolB,EAA+C,CACnDhO,KAAM,SACNC,QAAS,UACTC,OAAQnC,OAAOoC,aACfE,WAAY,CACV,CACEzX,QAASA,KAMf,OADA0X,WAAW,eAAgB0N,GACpBA,CAAe,EAOX5P,GAAoBsB,IAC/B,MAAMuO,EACJF,GAA0B,CACxBlc,KAAM,OACN8T,SAAU5H,OAAoB,KAAET,SAChCgF,MAAOvE,OAAoB,KAAER,MAC7BmC,WAGJrX,EAAOmB,MAAM,CACXZ,QAAS,2BAA2B8W,GAAU,aAC9CnH,KAAM0V,GACN,EAsDEC,GAAiB3V,IACrB,GAAsB,YAAlBA,GAAM0H,QAAmC,OAC7C,IAAK1H,EAAK2H,SAAW3H,EAAK8H,WAAY,OACtC,GAAI9H,EAAK2H,SAAWnC,OAAOoC,aAAc,OACzC,GAAkB,WAAd5H,EAAKyH,KAAmB,OAC5B,IAAKzH,EAAK8H,WAAW,IAAIzX,QAAS,OAElC,MAAMA,EAAU2P,EAAK8H,WAAW,GAAGzX,QACnC,GAAI,SAAUA,EAAS,CAErB,OADaA,EAAQiJ,MAEnB,IAAK,OAvBc,CAAC0G,IACnBA,EAAK2H,SACV7X,EAAOmB,MAAM,6BAEb4U,GAAiB7F,EAAK2H,QAAO,EAoBvBiO,CAAiB5V,GACjB,MACF,IAAK,OAjDc,CAACA,IACxB,IAAKA,EAAK2H,OAAQ,OAClB,MAAMtX,EAAU2P,EAAK8H,aAAa,IAAIzX,QACtC,IAAKA,EAAS,OACdP,EAAOmB,MAAM,CACXZ,QAAS,wBACT2P,SAGF,MAAM6V,EAAiB1B,GAAanU,EAAK2H,QACpCkO,IAELA,EAA4B,KAAI,CAC9B9Q,SAAU6P,GAAyBvkB,EAAQ+c,SAAUyI,GACrD7Q,MAAO3U,EAAQ0Z,OAChB,EAmCK+L,CAAiB9V,GACjB,MACF,IAAK,eACHhP,QAAQb,IAAI8W,GAAgBtU,IAAItC,EAAQkX,KACxC,IAAIwO,EAAU9O,GAAgBtU,IAAItC,EAAQkX,IAC1C,IACGwO,IACkB,aAAlB1lB,EAAQiX,OAA0C,aAAlBjX,EAAQiX,OAEzC,OAEF,OAAQjX,EAAQiX,OACd,IAAK,WACHyO,EAASzO,MAAQ,WACjBrB,GACE,GAAGwO,GACDzU,EAAK2H,gDAGT,MACF,IAAK,WACHoO,EAASzO,MAAQ,WACjBrB,GACE,GAAGwO,GACDzU,EAAK2H,gDAGT,MACF,IAAK,UACH,IAAI8E,GACF,GAAGgI,GAAiBzU,EAAK2H,wCACzB,KACE1B,GACE,GAAGwO,GAAiBzU,EAAK2H,gCAE3BsM,KACAuB,GAA0B,CACxBlc,KAAM,eACNgO,MAAO,WACPC,GAAIlX,EAAQkX,IACgB,IAEhC,KACEiO,GAA0B,CACxBlc,KAAM,eACNgO,MAAO,WACPC,GAAIlX,EAAQkX,IACgB,GAEhC,KAEF,MACF,IAAK,WACHtB,GACE,GAAGwO,GACDzU,EAAK2H,8CAGT,MACF,IAAK,YACH1B,GACE,GAAGwO,GACDzU,EAAK2H,mDAQlB,GAOGqO,GAAYC,gBNjMXA,eACLvb,EACAwb,EAAa,MAAM,IAEnB,MAAQxb,KAAQ,CACd,GAAIwb,IAAc,OAAO,QACnB,IAAIC,SAASC,GAAYzQ,WAAWyQ,EAAS,KACpD,CACD,OAAO,CACT,CMyLQC,EAAQ,IAAMC,cAAgBC,oBAEpCzQ,GAASzP,aAAa,eAAgB,GAAG,CAAC0G,EAAMyZ,KAC9C3Q,KACO2Q,EAAKzZ,MAGd+I,GAASzP,aAAa,kBAAmB,GAAG,CAAC0G,EAAMyZ,IAE3B,gBAApBzZ,EAAK,GAAG2K,SACR3K,EAAK,GAAG4K,SAAWnC,OAAOoC,cAtJ9B4N,GAA0B,CACxBlc,KAAM,cAGRxJ,EAAOmB,MAAM,kCAyJX0kB,GAAc5Y,EAAK,IACZyZ,EAAKzZ,MAEd+I,GAASzP,aAAa,6BAA8B,GAAG,CAAC0G,EAAMyZ,KAE5D,MAAMC,EAAUD,EAAKzZ,GAErB,OADAwR,KACOkI,CAAO,GACd,EC3OE,SAAUC,GACdpN,EACAD,EACAkD,EACAC,EACAmK,EACAC,EACAC,GAAsB,EACtBC,EAAY,QACZC,EAAmB,IACnBC,EAAkB,IAElBC,SAASN,EAAMrN,EAAOyN,EAAU1N,EAAM2N,EAASF,EAAW,QAC1DI,WACE5N,EACAD,EACAkD,EACAC,EACA,GACAqK,EAAa,UAAY,QACzBD,EAAY,oBAAsB,QAClCle,EACAme,EAEJ,CCpBgB,SAAAM,GACdzf,EACA8e,GAEA,GAAIA,EAAM,CAWR,MAPI,CACFY,KAAM,SACNC,OAAQ,OACRC,KAAM,SACNC,OAAQ,UACRC,QAAS,QAEU9f,EACtB,CAWD,MAPI,CACF0f,KAAM,UACNC,OAAQ,OACRC,KAAM,SACNC,OAAQ,OACRC,QAAS,UAEU9f,EACvB,CAEO,MClCD+f,GAAU,CACd,CACEjO,UAAW,sBACXkO,QAAS,YACTC,UAAW,aAEb,CACEnO,UAAW,oBACXkO,QAAS,YACTC,UAAW,aAEb,CACEnO,UAAW,gBACXkO,QAAS,YACTC,UAAW,aAEb,CACEnO,UAAW,kBACXkO,QAAS,YACTC,UAAW,aAEb,CACEnO,UAAW,eACXkO,QAAS,YACTC,UAAW,aAEb,CACEnO,UAAW,mBACXkO,QAAS,YACTC,UAAW,cAGf,IAAIC,GAAa,GACjB,IAAK,MAAMC,KAAUJ,GACnBG,IAAc,YACIC,EAAOrO,2EACLqO,EAAOH,oCAETG,EAAOrO,uDACLqO,EAAOH,oCAETG,EAAOrO,8DACLqO,EAAOH,oCAETG,EAAOrO,qEACLqO,EAAOF,sCAETE,EAAOrO,iEACLqO,EAAOF,sCAETE,EAAOrO,4DACLqO,EAAOF,6BAItB,MAAMG,GAAM,swKA4PjBF,8pCC/SK,MC2CMG,GAAuB,CAClCC,EACAjI,MAEKA,GAGEI,UACH6H,EAASC,UAAYD,EAASC,SAASlI,KACvCA,EAAOmI,YAtBkB,EAC7BF,EACAG,IAEOhI,QACL6H,EAASnQ,QAAQvU,SAAS6kB,IACvBH,EAASI,YAAY9kB,SAAS6kB,IAC7B3S,OAAOoC,eAAiByQ,kBAAkBzQ,cAgB5C0Q,CAAgBN,EAAUjI,EAAOmI,WAAWvD,OAGrC4D,GAA2C,CAAA,EAE3CC,GAAiB,KDzD5BD,GAAyB,aAAI,CAC3B5D,KAAM,gBACN8D,MAAO,sEACPC,QAAS,CAAC3I,EAAmBoI,KAC3BnnB,QAAQb,IAAI,wBAAyB4f,GACrCkE,GAAalE,EAAO,EAEtBlI,OAAQ,CAAC,cACToQ,SAAWlI,GACFD,GAAUC,IAIrBwI,GAAqB,SAAI,CACvB5D,KAAM,oBACN8D,MAAO,oEACPC,QAAU3I,IACR,MAAM/B,EACJlE,GAAWC,MAAMI,gBAAkB,IACnCL,GAAWC,MAAMG,cAAgB,GAC7B+D,GAAcD,EACdE,EACJpE,GAAWC,MAAMI,gBAAkB,IACnCL,GAAWC,MAAMG,cAAgB,GAC7ByO,EAAgB7O,GAAWC,MAAMlF,iBAAmB,GACpD+T,EAAe9O,GAAWC,MAAMlF,iBAAmB,GACrDmJ,EACF/H,GAAc,yDAGZgI,IACFnE,GAAWC,MAAMI,gBAAkB,EACnCL,GAAWC,MAAMG,cAAgB,EACjCjE,GAAc,oCAEZ0S,IACF7O,GAAWC,MAAMlF,kBAAoB,KAEnCqJ,IAAW0K,IACb9O,GAAWC,MAAMlF,kBAAoB,IACrCiF,GAAWC,MAAMnF,cAAgB,KAClC,EAEHwT,WAAY,CAAC,YAGbH,SAAWlI,IACF,GAGXwI,GAAsB,UAAI,CACxB5D,KAAM,qBACN8D,MAAO,qEACPC,QAAU3I,IACR,MAAM/B,EACJlE,GAAWC,MAAMI,gBAAkB,IACnCL,GAAWC,MAAMG,cAAgB,GAC7B+D,GAAcD,EACdE,EACJpE,GAAWC,MAAMI,gBAAkB,IACnCL,GAAWC,MAAMG,cAAgB,GAC/B8D,IACAC,IACFnE,GAAWC,MAAMI,gBAAkB,EACnCL,GAAWC,MAAMG,cAAgB,EACjCjE,GAAc,qCAEZiI,IACFpE,GAAWC,MAAMlF,kBAAoB,IACrCiF,GAAWC,MAAMnF,cAAgB,KAClC,EAEHwT,WAAY,CAAC,YACbH,SAAWlI,GACFjG,GAAWC,MAAMlF,iBAAmB,IAG/C0T,GAAsB,UAAI,CACxB5D,KAAM,aACN8D,MAAO,mEACPC,QAAS,CAAC3I,EAAmBoI,KAC3BrO,GAAWiE,gBAAgB,EAE7BqK,WAAY,CAAC,cACbH,SAAWlI,GACFD,GAAUC,IAIrBwI,GAAuB,WAAI,CACzB5D,KAAM,cACN8D,MAAO,oEACPC,QAAS,CAAC3I,EAAmBoI,KAC3BrO,GAAWsE,cAAc,EAE3BgK,WAAY,CAAC,cACbH,SAAWlI,GACFD,GAAUC,ICrCrBjK,GAASzP,aACP,8CACA,GACA,CAAC0G,EAAMyZ,KACL,MAAOqC,EAAIC,EAAaC,GAAiBhc,EACzC,OAAK+b,EACEtC,EAAKzZ,GADa,IACR,IAIrB+I,GAASzP,aAAa,mBAAoB,GAAG4f,MAAOlZ,EAAMyZ,KACxD,MAAOwC,GAASjc,EAEhB,GADAyZ,EAAKzZ,GACS,eAAVic,EAAwB,OAE5B,MAAMC,OXZoBhD,OAC5BiD,EACAC,EAAoC,KAE7B,IAAIhD,SAASC,IAClB,MAAMhM,EAAUhE,SAASM,cAAcwS,GACvC,GAAI9O,EAEF,YADAgM,EAAQhM,GAIV,MAAMgP,EAAW,IAAIC,kBAAiB,KACpC,MAAMlS,EAASf,SAASM,cAAcwS,GAClC/R,KAAYgS,EAAQG,YAAcnS,EAAOoS,kBAAoB,KAC/DH,EAASI,aACTpD,EAAQjP,GACT,IAGHiS,EAASK,QAAQrT,SAASsT,KAAM,CAAEC,WAAW,EAAMC,SAAS,GAAO,IWPxCC,CAAe,yBACpCC,EAAazB,kBAAkBH,YAAYvD,KAC5CmF,GACL9kB,OAAOjC,QAAQwlB,IAAYwB,SAAQ,EAAExS,EAAIyQ,MACnCD,GAAqBC,EAAUK,kBAAoB7S,UAxC3B,CAAC+B,GAC1B4I,QAAQ/J,SAAS4T,eAAezS,IAwC5B0S,CAAmB1S,IACtB0R,EAAatS,YA5Ea,EAClC/T,EACA2U,EACA2S,EACAC,KAEA,MAAMC,EAAShU,SAASC,cAAc,UAetC,OAdA+T,EAAO7S,GAAKA,EACZ6S,EAAOxnB,KAAO,QAAoBA,IAClCwnB,EAAOC,QAAQlC,MAAQ,WACvBiC,EAAO5Q,UAAY,oEACnB4Q,EAAO9T,UAAY,6CAA6C4T,0EAA4EtnB,WAE5IwnB,EAAOjS,iBAAiB,SAAU7W,IAChC,MAAMye,EAASsI,kBAAoB7S,OAC7BsU,EAAa/J,GAAQmI,YAAYvD,KAClCwF,GAAYL,IACjBK,EAAQpK,EAAQ+J,GAChBQ,cAAa,IAGRF,CAAM,EAwDHG,CACEvC,EAASrD,KACTpN,EACAyQ,EAASS,MACTT,EAASU,UAIhB,GACD,GACF,EC1FJ5S,GAASzP,aAAa,WAAY,GAAG,CAAC0G,EAAMyZ,IACpB,gBAAlBpO,eAAqD,iBAAlBA,mBACrC,EACUoO,EAAKzZ,KAMb,SAAUyd,GAAyCC,GACvD,IAAI7nB,EAAO6nB,EAAS7nB,KACpB5B,QAAQb,IAAI,yBAA2ByC,GACjC2B,OAAQ3B,EAAO,OAAS,IAAM6nB,EAASC,MACvCnmB,OAAQ3B,EAAO,SAAW,IAAM6nB,EAASE,QACzCpmB,OAAQ3B,EAAO,QAAU,IAAM6nB,EAASG,OACxCrmB,OAAQ3B,EAAO,UAAY,IAAM6nB,EAASI,SAC1CtmB,OAAQ3B,EAAO,UAAY,IAAM6nB,EAASK,SAC1CvmB,OAAQ3B,EAAO,WAAa,IAAM6nB,EAASM,UAC3CxmB,OAAQ3B,EAAO,QAAU,IAAM6nB,EAASO,OACxCzmB,OAAQ3B,EAAO,OAAUqoB,GAAqBR,EAASS,IAAID,EACnE,OAEsBE,GAAtB,WAAAprB,GACEC,KAAI4C,KAAW,EAUhB,CANC,IAAAgoB,GAAS,CACT,MAAAC,GAAW,CACX,MAAAC,GAAW,CACX,OAAAC,GAAY,CACZ,IAAAC,GAAS,CACT,GAAAE,CAAID,GAAoB,EAGpB,MAAgBG,WAAyBD,GAA/C,WAAAprB,uBACEC,KAASqrB,UAAW,GACpBrrB,KAAQsrB,SAAW,GACnBtrB,KAAQurB,SAAW,GACnBvrB,KAAWwrB,YAAW,GAEtBxrB,KAASyrB,UAAG,CAAC,CAAE3pB,EAAG,EAAGiE,EAAG,EAAG8a,EAAG,EAAGxe,EAAG,IAEpCrC,KAAa0rB,cAAW,EACxB1rB,KAAW2rB,YAAW,EAEtB3rB,KAAU4rB,WAAW,IACrB5rB,KAAgB6rB,iBAAG,EACnB7rB,KAAgB8rB,iBAAG,EACnB9rB,KAAoB+rB,qBAAG,EACvB/rB,KAAmBgsB,oBAAG,IACtBhsB,KAAoBisB,qBAAG,IACvBjsB,KAAgBksB,iBAAG,EACnBlsB,KAAYmsB,aAAG,GACfnsB,KAAiBosB,kBAAG,EAEpBpsB,KAAcqsB,eAAW,GAuH1B,CArHC,GAAAnB,CAAIoB,GACFC,gBAAgB,SAAU,YAC1BC,gBAAkBF,EAClBG,eAAgB,EAChBC,cAAgBC,aAChB3sB,KAAK2rB,YAAce,aACpB,CACD,gBAAIE,GACF,OAAOD,aAAe3sB,KAAK0rB,aAC5B,CACD,IAAAd,GAME,GALAiC,gBAAgB,UAAW,IAAK,KAEhC7sB,KAAK0rB,cAAgBiB,aAAe3sB,KAAK4rB,WACzC5rB,KAAK6rB,iBAAmB,EACxB7rB,KAAK+rB,qBAAuB,EACK,iBAAtBe,mBACTJ,cAAgBC,aAAe3sB,KAAKqsB,eACpCrsB,KAAKosB,kBAAoB,MACpB,CACL,IAAIW,EAA+C,KAA1BD,mBAAqB,GAC9C9sB,KAAKisB,qBACHjsB,KAAKqsB,eAAiB,IAAOU,EAC/BL,cAAgB1sB,KAAK0rB,cAAgB1rB,KAAKisB,qBAC1CjsB,KAAKosB,kBAAoBU,kBAC1B,CAED9sB,KAAKgsB,oBAAsB,IAC3BhsB,KAAK8rB,iBAAmB9rB,KAAKgsB,oBAE7BhrB,QAAQD,KACN,2CACEf,KAAKosB,kBACL,WACApsB,KAAKisB,qBAEV,CACD,gBAAIe,GACF,OAAOL,aAAeD,gBAAkBD,gBAAkBzsB,KAAKitB,UAChE,CAED,iBAAIC,GACF,OAAOP,cAAgBD,gBAAkBD,aAC1C,CAED,mBAAIU,GACF,OAAOR,aAAe3sB,KAAK2rB,YAAc,GAC1C,CAED,cAAIsB,GACF,OAAOjtB,KAAK8rB,kBAAoB,CACjC,CAED,OAAAsB,CAAQC,GACN,IAAIC,GACDttB,KAAKisB,qBAAuBU,aAAeD,eAAiB,IAG3DC,aAAe3sB,KAAKksB,mBACtBlsB,KAAKksB,iBAAmBS,aAAe,IACvC3sB,KAAK+rB,sBACwB,KAAzB/rB,KAAKosB,kBAA4BkB,EAAc5gB,KAAKqK,UAE1D/W,KAAK6rB,iBAAmBnf,KAAKqW,IAC3B/iB,KAAK6rB,iBACL7rB,KAAK6rB,iBAA+C,IAA5B7rB,KAAK+rB,sBAE3B/rB,KAAK8rB,kBAAoB9rB,KAAKgsB,sBAChChsB,KAAK6rB,iBAAmBnf,KAAKqW,IAAI,EAAG/iB,KAAK6rB,mBAEvC7rB,KAAK8rB,iBAAmB,IAC1B9rB,KAAK8rB,kBAAqB9rB,KAAK6rB,iBAAmB,IAAQwB,EAAQ,KAGpErtB,KAAK8rB,iBAAmBpf,KAAKC,IAC3B,EACAD,KAAKqW,IAAI/iB,KAAK8rB,iBAAkB9rB,KAAKgsB,sBAGvCuB,gBACE,IAAMvtB,KAAKgsB,oBACX,IACA,EAAIhsB,KAAKgsB,oBACT,GACOhsB,KAAK8rB,iBAAmB9rB,KAAKgsB,oBAApC,KAEF/E,SAASjnB,KAAKsrB,SAAU,IAAK,IAAK,QAAS,QAQ5C,CAED,GAAAZ,GACE8C,YAAYb,cAER3sB,KAAK4sB,aACP3F,SAASjnB,KAAKqrB,UAAW,IAAK,IAAK,QAAS,SACnCrrB,KAAKgtB,aACdhtB,KAAKotB,QAAQK,mBACHztB,KAAKktB,gBAAiBltB,KAAKitB,YAAgBR,gBACrDzsB,KAAKkrB,IAAIlrB,KAAK8rB,iBAAmB,GACjC4B,cAEH,CAED,KAAA/C,GASF,IAAsBhe,EAPd3M,KAAKgtB,eACPhtB,KAAK6rB,iBAAmBnf,KAAKC,IAC3B3M,KAAK6rB,kBAKSlf,EALwB,GAMrCD,KAAKmN,MAAMnN,KAAKqK,SAAWpK,GANgB,GAC5C,IAEL,EAMG,MAAOghB,WAAqBvC,GAAlC,WAAArrB,uBACEC,KAASqrB,UAAW,yCACpBrrB,KAAQsrB,SAAW,+CACnBtrB,KAAQurB,SAAW,gCACnBvrB,KAAWwrB,YAAW,uCACtBxrB,KAAI4C,KAAG,cAiBR,CAhBC,GAAAsoB,CAAID,GACF2C,MAAM1C,IAAID,GACLA,EAQHnR,GAAWC,MAAMnF,cAAgBgP,GAC/B9J,GAAWC,MAAMuD,WAAa,MARhCxD,GAAWC,MAAMsE,gBAAkBvE,GAAWC,MAAMuD,WAEpDxD,GAAWC,MAAMnF,cAAgBgP,GAC/B9J,GAAWC,MAAMuD,WAAa,KAEhCxD,GAAWC,MAAMuD,WAAa,GAMhCxD,GAAWkD,YACZ,EAGG,MAAO6Q,WAAoBzC,GAAjC,WAAArrB,uBACEC,KAASqrB,UAAW,iCACpBrrB,KAAQsrB,SAAW,iDACnBtrB,KAAQurB,SAAW,2BACnBvrB,KAAWwrB,YAAW,wBACtBxrB,KAAI4C,KAAG,aAkBR,CAjBC,GAAAsoB,CAAID,GACF2C,MAAM1C,IAAID,GACLA,EASHnR,GAAWC,MAAMnF,cAAgBgP,GAC/B9J,GAAWC,MAAMoD,aAAe,MATlCrD,GAAWC,MAAMoE,cAAgBrE,GAAWC,MAAMoD,aAElDrD,GAAWC,MAAMnF,cAAgBgP,GAC/B9J,GAAWC,MAAMoD,aAAe,KAGlCrD,GAAWC,MAAMoD,aAAe,GAMlCrD,GAAWkD,YACZ,ECxOGzY,OAAQupB,UduJW,KACvBtY,OAAOC,kBAA+B,KAAI,WAC1CG,kCAAkC,QAClC9V,EAAOoB,KAAK,eAAe,EczJvBqD,OAAQ2Q,SAAWA,GACnB3Q,OAAQwpB,WdgFaC,IACzBxY,OAAoB,KAAIpC,GAAMoC,OAAoB,MAAKV,GAAakZ,GACpE9Y,IAAU,EchFN3Q,OAAQ0pB,KAAO,OCSR,MAAArO,GAAqBsO,GAwB5BC,GAAO,KACX,MAAMC,EAAiB5Y,OAAOoC,aAC9B,GAAuB,OAAnBwW,EAEF,MADAtuB,EAAOqB,MAAM,0BACP,IAAIK,MAAM,0BAGlBsU,GAASzP,aAAa,gBAAiB,GAAG,CAAC0G,EAAMyZ,KAC/C,MAAM6H,EAAWthB,EAAK,GACtB,GACE1D,GAASglB,IACgB,iBAAlBA,EAAS1J,MACgB,iBAAzB0J,EAASC,aAChBD,EAASzW,eAAiBwW,EAC1B,CACA,MAAMjtB,EAAQ,uEAAmFktB,EAASzW,mBAAmBwW,sDAG7H,MAFAtuB,EAAOqB,MAAMA,GACbI,MAAMJ,GACA,IAAIK,MAAML,EACjB,CACD,OAAOqlB,EAAKzZ,EAAK,IAGnB,MAAMwhB,EAAiBnY,SAASC,cAAc,SC1DrB,IAACmY,ED2D1BD,EAAejY,UAAYwR,GAC3B1R,SAASqY,KAAK9X,YAAY4X,GAE1BG,mBfoDgC,MAOhC,IAAI3Z,EAAUC,EACd,MAAM2Z,EAAavZ,SAASwZ,qBAC1BpZ,OAAOC,kBAA+B,MAEnCkZ,GAKH7uB,EAAOiB,KAAK,+BACZgU,EAAWO,KAAKoM,MAAMiN,GAAY5Z,SAClCC,EAAQM,KAAKoM,MAAMiN,GAAY3Z,QAN/BlV,EAAOiB,KAAK,2BACZgU,EAAW,CAAA,EACXC,EAAQ,CAAA,GAOV,MAAM6Z,EAAmBzb,GACvB,CACE2B,SAAUvB,GACVwB,MAAOX,GACPya,WAAY,SAEd,CAAE/Z,WAAUC,UAGdlV,EAAOmB,MAAM,CAAEZ,QAAS,yBAA0BwuB,qBAElDrZ,OAAoB,KAAIqZ,CAAgB,EenFxCE,GNhCgC9I,WAChC+I,mCAAmC,CACjCC,WAAY,OACZC,WAAY,GAAGvnB,aACf8gB,MAAO,qDACP0G,IAAK,KACHzI,GACE,IACA,IACA,GACA,GACA,kBACA5M,GAAWsD,SAASrJ,gBACpB,EACA,QACA,IACA,IAEF2S,GACE,IACA,IACA,GACA,GACA,kBACA5M,GAAWsD,SAASnJ,gBACpB,EACA,QACA,IACA,IAEFgT,SACE,yDACA,IACA,IACA,SAEFmI,mBACE,IACA,IACA,IACA,GACAtV,GAAWsD,SAAS3J,WACpB,QACA,IACA,IAAM0T,GAAmBrN,GAAWsD,SAAS3J,YAAY,KACzD,IAAM0T,GAAmBrN,GAAWsD,SAAS3J,YAAY,KAE3DyT,WAAW,KAAM,GAAI,GAAI,GAAI,GAAI,QAAS,iBAAiB,EAE7DmI,MAAO,KACDC,QAAQ,IAAK,IAAK,GAAI,MACxBxV,GAAWsD,SAASrJ,gBACjB+F,GAAWsD,SAASrJ,gBAErBub,QAAQ,IAAK,IAAK,GAAI,MACxBxV,GAAWsD,SAASnJ,gBACjB6F,GAAWsD,SAASnJ,gBAGrBqb,QAAQ,IAAK,IAAK,IAAS,MAC7BxV,GAAWsD,SAAS3J,WAAa0T,GAC/BrN,GAAWsD,SAAS3J,YACpB,IAGA6b,QAAQ,IAAe,IAAK,IAAS,MACvCxV,GAAWsD,SAAS3J,WAAa0T,GAC/BrN,GAAWsD,SAAS3J,YACpB,IAGA6b,QAAQ,KAAM,GAAI,GAAI,KAAKC,mCAAmC,EAEpEC,KAAM,KACG,EAETC,KAAM,QACN,EM5CFC,GChE0BlB,EDiEd,GChEZ1Y,GAASzP,aAAa,WAAY,GAAG,CAAC0G,EAAMyZ,KAC1C,IACEgI,EAAQhL,MACLmM,GACCA,EAAO3hB,SAAW4hB,eAAiBD,EAAOpY,KAAOa,gBAMvD,OAAOoO,EAAKzZ,EAAK,IAGnByhB,EAAQzE,SAAS4F,IACTprB,OAAQ,GAAGorB,EAAOpY,gBAAkB,QAE1C,MAAMsY,MAAEA,EAAKlF,MAAEA,KAAUmF,GAASH,EAAOI,UAEnCC,EAA0B,IAC3BF,EACHD,MAAQtU,IACY,WAAdA,EAAMxQ,KACFxG,OAAQ,GAAGorB,EAAOpY,YAG1BsY,IAAQtU,EAAM,EAEhBoP,MAAQpP,IACF+T,QAAQ,KAAM,GAAI,GAAI,KAClB/qB,OAAQ,GAAGorB,EAAOpY,YAE1BoT,IAAQpP,EAAM,GAIZhX,OAAQ,GAAGorB,EAAOpY,qBAAuByY,EAE/ChrB,OAAOjC,QAAQitB,GAAyBjG,SAAQ,EAAEhf,EAAKrD,MAC/CnD,OAAQ,GAAGorB,EAAOpY,KAAKxM,KAASrD,CAAK,GAC3C,ID0BJse,KACAlmB,EAAOiB,KAAK,UACZwD,OAAO0rB,aAAc,EACrBzH,KF3DAgC,GAAiB,IAAImD,IACrBnD,GAAiB,IAAIqD,IVkXrBlY,YAAW,KACTmH,GAAkB,IAAI7E,GAEtBnC,GAASzP,aACP,mCACA,GACA,CAAC0G,EAAMyZ,KACLA,EAAKzZ,GACL,MAAOmjB,EAAGC,EAAOC,EAAOC,GAAQtjB,EAChC,GAAImjB,EAAEtY,eAAiBpC,OAAOoC,aAAc,CAC1C,MAAO0Y,EAAGC,GAAK,CAACJ,EAAQ,IAAME,EAAMD,EAAQ,IAAMC,GAElDvT,GAAgBxE,WAAWC,MAAMc,IAAM,GAAGkX,MAC1CzT,GAAgBxE,WAAWC,MAAMe,KAAO,GAAGgX,KAC5C,KAGLla,SAASsT,KAAK/S,YAAY+B,GAAQ,GACjC,MYvUH8X,YAAYC,GA3DgB,IA2DK,EAzDjC3wB,EAAOiB,KAAK,iCACS,MAAjBqX,eAA2C,UAAlBA,cAC3BtC,GAASzP,aAAa,gBAAiB,GAAG,CAAC0G,EAAMyZ,KAC/CA,EAAKzZ,GACL,MAAMshB,EAAWthB,EAAK,GACtB,GACE1D,GAASglB,IACgB,iBAAlBA,EAAS1J,MACgB,iBAAzB0J,EAASC,YAChB,CACA,GAAI/pB,OAAO0rB,YAAa,OACxB9B,IACD,MAGHruB,EAAOiB,KAAK,uCACZotB,MA8CJ,MAAMsC,GAAO,KACW,aAAlBrY,eAGJ0B,GAAWX,QAAQ,iCApES","x_google_ignoreList":[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99]}