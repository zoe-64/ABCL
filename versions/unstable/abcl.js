!function(){"use strict";const e=new class{constructor(){this.logsArray=[],this.maxLogSize=100}log(e,t,s){const i={message:t,level:e,version:"2.2.2",timestamp:(new Date).toISOString()};s("%cABCL:","font-weight: bold; color: #f6cbde;",i),this.logsArray.push(i),this.logsArray.length>this.maxLogSize&&this.logsArray.shift()}info(e){this.log("INFO",e,console.log)}debug(e){this.log("DEBUG",e,console.debug)}warn(e){this.log("WARN",e,console.warn)}error(e){this.log("ERROR",e,console.error)}getLogs(){return this.logsArray}};const t={ItemDefinitions:{BabyItems:["ClothBabydollDress1","ClothAdultBabyDress1","ClothAdultBabyDress2","ClothAdultBabyDress3","ClothAdultBabyDress4","ItemTorsoAdultBabyHarness","ClothLowerTutu","PantiesBikini1","ItemHandsPaddedMittens","ItemHandsPawMittens","ItemHandsSmoothLeatherMittens1","ItemDevicesChangingTable","ItemDevicesCrib","ItemMiscFoxPlush","ItemMiscBunPlush","ItemHandheldShark","ItemDevicesHighchair","ClothAccessoryBib","ItemMouthMilkBottle","ItemMouthRegressedMilk","ItemMouthHarnessPacifierGag","ItemMouthPacifierGag","ItemMouthPaciGag"],Pants:["ClothLowerLeggings2","ClothLowerLeggings1","ClothLowerBusinessTrousers","ClothLowerLatexPants1","ClothLowerPantBoots","ClothLowerJeans1","ClothLowerJeans2","ClothLowerPajama1"]},DiaperColors:{clean:"#8F8F8F",middlewet:"#ffe58b",maximumwet:"#ffd33e",middlemess:"#423019",maximummess:"#3C302C",selfwet:"#242103",selfmess:"#1f170d",indicatorAccident:"#1e47a6"},DiaperSizeScale:{none:0,small:300,regular:500,overnight:800,light_adult:900,moderate_adult:1500,heavy_adult:2500,specialized:3500},Diapers:{"Panties_笨笨蛋LuziDiapers1":{size:"regular",gradients:[1]},"Panties_笨笨蛋LuziDiapers2":{gradients:[2],size:"light_adult"},"Panties_笨笨蛋LuziDiapers3":{gradients:[1],size:"light_adult"},"Panties_笨笨蛋LuziDiapers4":{gradients:[3],size:"overnight"},"Panties_笨笨蛋LuziBulkyDiaper":{gradients:[4],size:"light_adult"},"Panties_笨笨蛋LuziPoofyDiaper":{gradients:[4],size:"light_adult"},"Panties_笨笨蛋LuziUntrainersThin":{size:"light_adult",gradients:[4],indicator:[5]},"Panties_笨笨蛋LuziLatexDiaper":{gradients:[2],size:"moderate_adult"},PantiesDiapers1:{size:"regular",gradients:[1]},PantiesDiapers2:{gradients:[2],size:"light_adult"},PantiesDiapers3:{gradients:[1],size:"light_adult"},PantiesDiapers4:{gradients:[3],size:"overnight"},PantiesBulkyDiaper:{gradients:[4],size:"light_adult"},ItemPelvisBulkyDiaper:{gradients:[4],size:"moderate_adult"},PantiesPoofyDiaper:{gradients:[4],size:"light_adult"},"ItemPelvisPoofyDiaper 1":{gradients:[4],size:"heavy_adult"},ItemPelvisPoofyDiaper:{gradients:[4],size:"moderate_adult"},ItemPelvisDiaperHarness:{size:"none"},ItemPelvisUntrainersThin:{size:"light_adult",gradients:[4],indicator:[5]},PantiesUntrainersThin:{size:"light_adult",gradients:[4],indicator:[5]},ItemPelvisLatexDiaper:{gradients:[2],size:"moderate_adult"},PantiesLatexDiaper:{gradients:[2],size:"moderate_adult"}}},s={Tickle:{wetting:.05,messing:.01},TickleItem:{wetting:.08,messing:.01},Spank:{wetting:.12,messing:.15},ShockItem:{wetting:.15,messing:.2},Kick:{wetting:.05,messing:.05},Rub:{wetting:.01},SpankItem:{wetting:.15,messing:.2},Slap:{wetting:.03,messing:.04},Grope:{wetting:.06,messing:.05}},i="Normal",r="Deny",a="Ask",n="Allow",o={Disabled:0,Slow:.5,Normal:1,Fast:1.5,Faster:2,Fastest:3};var l;!function(e){e[e.Anyone=0]="Anyone",e[e.ItemPermission=1]="ItemPermission",e[e.Friends=2]="Friends",e[e.Lovers=3]="Lovers",e[e.Owner=5]="Owner",e[e.Self=6]="Self"}(l||(l={}));var c="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,p=c||u||Function("return this")(),d=p.Symbol,h=Object.prototype,m=h.hasOwnProperty,g=h.toString,f=d?d.toStringTag:void 0;var y=Object.prototype.toString;var _="[object Null]",A="[object Undefined]",b=d?d.toStringTag:void 0;function v(e){return null==e?void 0===e?A:_:b&&b in Object(e)?function(e){var t=m.call(e,f),s=e[f];try{e[f]=void 0;var i=!0}catch(e){}var r=g.call(e);return i&&(t?e[f]=s:delete e[f]),r}(e):function(e){return y.call(e)}(e)}function C(e){return null!=e&&"object"==typeof e}var L="[object Symbol]";var P=Array.isArray,D=/\s/;var S=/^\s+/;function N(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&D.test(e.charAt(t)););return t}(e)+1).replace(S,""):e}function I(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var B=NaN,w=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,G=/^0o[0-7]+$/i,k=parseInt;function O(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||C(e)&&v(e)==L}(e))return B;if(I(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=I(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=N(e);var s=M.test(e);return s||G.test(e)?k(e.slice(2),s?2:8):w.test(e)?B:+e}function R(e){return e}var F="[object AsyncFunction]",$="[object Function]",T="[object GeneratorFunction]",x="[object Proxy]";function z(e){if(!I(e))return!1;var t=v(e);return t==$||t==T||t==F||t==x}var j,V=p["__core-js_shared__"],U=(j=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"";var H=Function.prototype.toString;var W=/^\[object .+?Constructor\]$/,X=Function.prototype,Y=Object.prototype,q=X.toString,Z=Y.hasOwnProperty,K=RegExp("^"+q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function J(e){return!(!I(e)||(t=e,U&&U in t))&&(z(e)?K:W).test(function(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Q(e,t){var s=function(e,t){return null==e?void 0:e[t]}(e,t);return J(s)?s:void 0}var ee=Object.create,te=function(){function e(){}return function(t){if(!I(t))return{};if(ee)return ee(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}();var se=Date.now;var ie,re,ae,ne=function(){try{var e=Q(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),oe=ne?function(e,t){return ne(e,"toString",{configurable:!0,enumerable:!1,value:(s=t,function(){return s}),writable:!0});var s}:R,le=(ie=oe,re=0,ae=0,function(){var e=se(),t=16-(e-ae);if(ae=e,t>0){if(++re>=800)return arguments[0]}else re=0;return ie.apply(void 0,arguments)}),ce=9007199254740991,ue=/^(?:0|[1-9]\d*)$/;function pe(e,t){var s=typeof e;return!!(t=null==t?ce:t)&&("number"==s||"symbol"!=s&&ue.test(e))&&e>-1&&e%1==0&&e<t}function de(e,t,s){"__proto__"==t&&ne?ne(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function he(e,t){return e===t||e!=e&&t!=t}var me=Object.prototype.hasOwnProperty;function ge(e,t,s){var i=e[t];me.call(e,t)&&he(i,s)&&(void 0!==s||t in e)||de(e,t,s)}var fe=Math.max;function ye(e,t){return le(function(e,t,s){return t=fe(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=fe(i.length-t,0),n=Array(a);++r<a;)n[r]=i[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=i[r];return o[t]=s(n),function(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}(e,this,o)}}(e,t,R),e+"")}var _e=9007199254740991;function Ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_e}function be(e){return null!=e&&Ae(e.length)&&!z(e)}var ve=Object.prototype;function Ce(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ve)}function Le(e){return C(e)&&"[object Arguments]"==v(e)}var Pe=Object.prototype,Ee=Pe.hasOwnProperty,De=Pe.propertyIsEnumerable,Se=Le(function(){return arguments}())?Le:function(e){return C(e)&&Ee.call(e,"callee")&&!De.call(e,"callee")},Ne=Se;var Ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,Be=Ie&&"object"==typeof module&&module&&!module.nodeType&&module,we=Be&&Be.exports===Ie?p.Buffer:void 0,Me=(we?we.isBuffer:void 0)||function(){return!1},Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge["[object Arguments]"]=Ge["[object Array]"]=Ge["[object ArrayBuffer]"]=Ge["[object Boolean]"]=Ge["[object DataView]"]=Ge["[object Date]"]=Ge["[object Error]"]=Ge["[object Function]"]=Ge["[object Map]"]=Ge["[object Number]"]=Ge["[object Object]"]=Ge["[object RegExp]"]=Ge["[object Set]"]=Ge["[object String]"]=Ge["[object WeakMap]"]=!1;var ke="object"==typeof exports&&exports&&!exports.nodeType&&exports,Oe=ke&&"object"==typeof module&&module&&!module.nodeType&&module,Re=Oe&&Oe.exports===ke&&c.process,Fe=function(){try{var e=Oe&&Oe.require&&Oe.require("util").types;return e||Re&&Re.binding&&Re.binding("util")}catch(e){}}(),$e=Fe&&Fe.isTypedArray,Te=$e?function(e){return function(t){return e(t)}}($e):function(e){return C(e)&&Ae(e.length)&&!!Ge[v(e)]},xe=Object.prototype.hasOwnProperty;function ze(e,t){var s=P(e),i=!s&&Ne(e),r=!s&&!i&&Me(e),a=!s&&!i&&!r&&Te(e),n=s||i||r||a,o=n?function(e,t){for(var s=-1,i=Array(e);++s<e;)i[s]=t(s);return i}(e.length,String):[],l=o.length;for(var c in e)!t&&!xe.call(e,c)||n&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,l))||o.push(c);return o}var je=Object.prototype.hasOwnProperty;function Ve(e){if(!I(e))return function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}(e);var t=Ce(e),s=[];for(var i in e)("constructor"!=i||!t&&je.call(e,i))&&s.push(i);return s}function Ue(e){return be(e)?ze(e,!0):Ve(e)}var He=Q(Object,"create");var We=Object.prototype.hasOwnProperty;var Xe=Object.prototype.hasOwnProperty;function Ye(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}function qe(e,t){for(var s=e.length;s--;)if(he(e[s][0],t))return s;return-1}Ye.prototype.clear=function(){this.__data__=He?He(null):{},this.size=0},Ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ye.prototype.get=function(e){var t=this.__data__;if(He){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return We.call(t,e)?t[e]:void 0},Ye.prototype.has=function(e){var t=this.__data__;return He?void 0!==t[e]:Xe.call(t,e)},Ye.prototype.set=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=He&&void 0===t?"__lodash_hash_undefined__":t,this};var Ze=Array.prototype.splice;function Ke(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}Ke.prototype.clear=function(){this.__data__=[],this.size=0},Ke.prototype.delete=function(e){var t=this.__data__,s=qe(t,e);return!(s<0)&&(s==t.length-1?t.pop():Ze.call(t,s,1),--this.size,!0)},Ke.prototype.get=function(e){var t=this.__data__,s=qe(t,e);return s<0?void 0:t[s][1]},Ke.prototype.has=function(e){return qe(this.__data__,e)>-1},Ke.prototype.set=function(e,t){var s=this.__data__,i=qe(s,e);return i<0?(++this.size,s.push([e,t])):s[i][1]=t,this};var Je=Q(p,"Map");function Qe(e,t){var s,i,r=e.__data__;return("string"==(i=typeof(s=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==s:null===s)?r["string"==typeof t?"string":"hash"]:r.map}function et(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}et.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(Je||Ke),string:new Ye}},et.prototype.delete=function(e){var t=Qe(this,e).delete(e);return this.size-=t?1:0,t},et.prototype.get=function(e){return Qe(this,e).get(e)},et.prototype.has=function(e){return Qe(this,e).has(e)},et.prototype.set=function(e,t){var s=Qe(this,e),i=s.size;return s.set(e,t),this.size+=s.size==i?0:1,this};var tt=function(e,t){return function(s){return e(t(s))}}(Object.getPrototypeOf,Object),st="[object Object]",it=Function.prototype,rt=Object.prototype,at=it.toString,nt=rt.hasOwnProperty,ot=at.call(Object);function lt(e){var t=this.__data__=new Ke(e);this.size=t.size}lt.prototype.clear=function(){this.__data__=new Ke,this.size=0},lt.prototype.delete=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s},lt.prototype.get=function(e){return this.__data__.get(e)},lt.prototype.has=function(e){return this.__data__.has(e)},lt.prototype.set=function(e,t){var s=this.__data__;if(s instanceof Ke){var i=s.__data__;if(!Je||i.length<199)return i.push([e,t]),this.size=++s.size,this;s=this.__data__=new et(i)}return s.set(e,t),this.size=s.size,this};var ct="object"==typeof exports&&exports&&!exports.nodeType&&exports,ut=ct&&"object"==typeof module&&module&&!module.nodeType&&module,pt=ut&&ut.exports===ct?p.Buffer:void 0,dt=pt?pt.allocUnsafe:void 0;var ht=p.Uint8Array;function mt(e,t){var s,i,r=t?(s=e.buffer,i=new s.constructor(s.byteLength),new ht(i).set(new ht(s)),i):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var gt,ft=function(e,t,s){for(var i=-1,r=Object(e),a=s(e),n=a.length;n--;){var o=a[gt?n:++i];if(!1===t(r[o],o,r))break}return e},yt=function(){return p.Date.now()},_t=Math.max,At=Math.min;function bt(e,t,s){(void 0!==s&&!he(e[t],s)||void 0===s&&!(t in e))&&de(e,t,s)}function vt(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Ct(e){return function(e,t,s,i){var r=!s;s||(s={});for(var a=-1,n=t.length;++a<n;){var o=t[a],l=i?i(s[o],e[o],o,s,e):void 0;void 0===l&&(l=e[o]),r?de(s,o,l):ge(s,o,l)}return s}(e,Ue(e))}function Lt(e,t,s,i,r,a,n){var o=vt(e,s),l=vt(t,s),c=n.get(l);if(c)bt(e,s,c);else{var u,p=a?a(o,l,s+"",e,t,n):void 0,d=void 0===p;if(d){var h=P(l),m=!h&&Me(l),g=!h&&!m&&Te(l);p=l,h||m||g?P(o)?p=o:C(u=o)&&be(u)?p=function(e,t){var s=-1,i=e.length;for(t||(t=Array(i));++s<i;)t[s]=e[s];return t}(o):m?(d=!1,p=function(e,t){if(t)return e.slice();var s=e.length,i=dt?dt(s):new e.constructor(s);return e.copy(i),i}(l,!0)):g?(d=!1,p=mt(l,!0)):p=[]:function(e){if(!C(e)||v(e)!=st)return!1;var t=tt(e);if(null===t)return!0;var s=nt.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&at.call(s)==ot}(l)||Ne(l)?(p=o,Ne(o)?p=Ct(o):I(o)&&!z(o)||(p=function(e){return"function"!=typeof e.constructor||Ce(e)?{}:te(tt(e))}(l))):d=!1}d&&(n.set(l,p),r(p,l,i,a,n),n.delete(l)),bt(e,s,p)}}function Pt(e,t,s,i,r){e!==t&&ft(t,(function(a,n){if(r||(r=new lt),I(a))Lt(e,t,n,s,Pt,i,r);else{var o=i?i(vt(e,n),a,n+"",e,t,r):void 0;void 0===o&&(o=a),bt(e,n,o)}}),Ue)}var Et,Dt=(Et=function(e,t,s){Pt(e,t,s)},ye((function(e,t){var s=-1,i=t.length,r=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(r=Et.length>3&&"function"==typeof r?(i--,r):void 0,a&&function(e,t,s){if(!I(s))return!1;var i=typeof t;return!!("number"==i?be(s)&&pe(t,s.length):"string"==i&&t in s)&&he(s[t],e)}(t[0],t[1],a)&&(r=i<3?void 0:r,i=1),e=Object(e);++s<i;){var n=t[s];n&&Et(e,n,s,r)}return e})));const St={PauseStats:!1,PeeMetabolism:i,PoopMetabolism:i,MentalRegressionModifier:i,OpenRemoteSettings:!1,LockedOutOfSettings:!1,DisableWettingLeaks:!1,DisableSoilingLeaks:!0,OnDiaperChange:a,VisibleMessages:{changeDiaper:!0,checkDiaper:!0,lickPuddle:!0,wetDiaper:!0,wetClothing:!0,soilDiaper:!0,soilClothing:!0,usePotty:!0,useToilet:!0,wipePuddle:!0,statusMessages:!1,playerActivity:!0,pauseStats:!1},StatusMessages:{Bladder:!0,Bowel:!0,Soiliness:!0,Wetness:!0,MentalRegression:!0,Incontinence:!0,PuddleSize:!0},DisableClothingStains:!1,DisableDiaperStains:!1,AccidentsByActivities:!0},Nt={PuddleSize:{value:0},Bladder:{value:0,size:300},Bowel:{value:0,size:200},Soiliness:{value:0},Wetness:{value:0},WaterIntake:{value:15},FoodIntake:{value:200/60},Incontinence:{value:0},MentalRegression:{value:0}},It={Settings:St,Stats:Nt},Bt=e=>{Player.ABCL=Dt(Player.ABCL||It,e),wt()},wt=function(e,t,s){var i,r,a,n,o,l,c=0,u=!1,p=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var s=i,a=r;return i=r=void 0,c=t,n=e.apply(a,s)}function m(e){var s=e-l;return void 0===l||s>=t||s<0||p&&e-c>=a}function g(){var e=yt();if(m(e))return f(e);o=setTimeout(g,function(e){var s=t-(e-l);return p?At(s,a-(e-c)):s}(e))}function f(e){return o=void 0,d&&i?h(e):(i=r=void 0,n)}function y(){var e=yt(),s=m(e);if(i=arguments,r=this,l=e,s){if(void 0===o)return function(e){return c=e,o=setTimeout(g,t),u?h(e):n}(l);if(p)return clearTimeout(o),o=setTimeout(g,t),h(l)}return void 0===o&&(o=setTimeout(g,t)),n}return t=O(t)||0,I(s)&&(u=!!s.leading,a=(p="maxWait"in s)?_t(O(s.maxWait)||0,t):a,d="trailing"in s?!!s.trailing:d),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,i=l=r=o=void 0},y.flush=function(){return void 0===o?n:f(yt())},y}((()=>{const e=LZString.compressToBase64(JSON.stringify(Player.ABCL));Player.ExtensionSettings.ABCL=e,ServerPlayerExtensionSettingsSync("ABCL"),$i()}),1e3),Mt=()=>{Player.ExtensionSettings.ABCL="N4XyA===",ServerPlayerExtensionSettingsSync("ABCL"),e.warn("cleared data")};var Gt={};!function(e){!function(){const t="1.2.0";function s(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const i=new TextEncoder;function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function a(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const n=new Map,o=new Set;function l(e){o.has(e)||(o.add(e),console.warn(e))}function c(e){const t=[],s=new Map,i=new Set;for(const r of h.values()){const a=r.patching.get(e.name);if(a){t.push(...a.hooks);for(const[t,n]of a.patches.entries())s.has(t)&&s.get(t)!==n&&l(`ModSDK: Mod '${r.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${s.get(t)||""}\nPatch2:\n${n}`),s.set(t,n),i.add(r.name)}}t.sort(((e,t)=>t.priority-e.priority));const r=function(e,t){if(0===t.size)return e;let s=e.toString().replaceAll("\r\n","\n");for(const[i,r]of t.entries())s.includes(i)||l(`ModSDK: Patching ${e.name}: Patch ${i} not applied`),s=s.replaceAll(i,r);return(0,eval)(`(${s})`)}(e.original,s);let a=function(t){var s,a;const n=null===(a=(s=y.errorReporterHooks).hookChainExit)||void 0===a?void 0:a.call(s,e.name,i),o=r.apply(this,t);return null==n||n(),o};for(let s=t.length-1;s>=0;s--){const i=t[s],r=a;a=function(t){var s,a;const n=null===(a=(s=y.errorReporterHooks).hookEnter)||void 0===a?void 0:a.call(s,e.name,i.mod),o=i.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${i.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return r.call(this,e)}]);return null==n||n(),o}}return{hooks:t,patches:s,patchesSources:i,enter:a,final:r}}function u(e,t=!1){let s=n.get(e);if(s)t&&(s.precomputed=c(s));else{let t=window;const a=e.split(".");for(let s=0;s<a.length-1;s++)if(t=t[a[s]],!r(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${a.slice(0,s+1).join(".")} is not object`);const o=t[a[a.length-1]];if("function"!=typeof o)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const s of i.encode(e)){let e=255&(t^s);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(o.toString().replaceAll("\r\n","\n")),u={name:e,original:o,originalHash:l};s=Object.assign(Object.assign({},u),{precomputed:c(u),router:()=>{},context:t,contextProperty:a[a.length-1]}),s.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(s),n.set(e,s),t[s.contextProperty]=s.router}return s}function p(){for(const e of n.values())e.precomputed=c(e)}function d(){const e=new Map;for(const[t,s]of n)e.set(t,{name:t,original:s.original,originalHash:s.originalHash,sdkEntrypoint:s.router,currentEntrypoint:s.context[s.contextProperty],hookedByMods:a(s.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(s.precomputed.patchesSources)});return e}const h=new Map;function m(e){h.get(e.name)!==e&&s(`Failed to unload mod '${e.name}': Not registered`),h.delete(e.name),e.loaded=!1,p()}function g(e,t){e&&"object"==typeof e||s("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||s("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let i=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||s(`Failed to register mod ${i}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),i=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&s(`Failed to register mod ${i}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&s(`Failed to register mod ${i}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||s(`Failed to register mod ${i}: Expected options to be undefined or object, got ${typeof t}`);const a=!0===t.allowReplace,n=h.get(e.name);n&&(n.allowReplace&&a||s(`Refusing to load mod ${i}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),m(n));const o=e=>{let t=d.patching.get(e.name);return t||(t={hooks:[],patches:new Map},d.patching.set(e.name,t)),t},l=(e,t)=>(...r)=>{var a,n;const o=null===(n=(a=y.errorReporterHooks).apiEndpointEnter)||void 0===n?void 0:n.call(a,e,d.name);d.loaded||s(`Mod ${i} attempted to call SDK function after being unloaded`);const l=t(...r);return null==o||o(),l},c={unload:l("unload",(()=>m(d))),hookFunction:l("hookFunction",((e,t,r)=>{"string"==typeof e&&e||s(`Mod ${i} failed to patch a function: Expected function name string, got ${typeof e}`);const a=u(e),n=o(a);"number"!=typeof t&&s(`Mod ${i} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof r&&s(`Mod ${i} failed to hook function '${e}': Expected hook function, got ${typeof r}`);const l={mod:d.name,priority:t,hook:r};return n.hooks.push(l),p(),()=>{const e=n.hooks.indexOf(l);e>=0&&(n.hooks.splice(e,1),p())}})),patchFunction:l("patchFunction",((e,t)=>{"string"==typeof e&&e||s(`Mod ${i} failed to patch a function: Expected function name string, got ${typeof e}`);const a=u(e),n=o(a);r(t)||s(`Mod ${i} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[r,a]of Object.entries(t))"string"==typeof a?n.patches.set(r,a):null===a?n.patches.delete(r):s(`Mod ${i} failed to patch function '${e}': Invalid format of patch '${r}'`);p()})),removePatches:l("removePatches",(e=>{"string"==typeof e&&e||s(`Mod ${i} failed to patch a function: Expected function name string, got ${typeof e}`);const t=u(e);o(t).patches.clear(),p()})),callOriginal:l("callOriginal",((e,t,r)=>{"string"==typeof e&&e||s(`Mod ${i} failed to call a function: Expected function name string, got ${typeof e}`);const a=u(e);return Array.isArray(t)||s(`Mod ${i} failed to call a function: Expected args array, got ${typeof t}`),a.original.apply(null!=r?r:globalThis,t)})),getOriginalHash:l("getOriginalHash",(e=>("string"==typeof e&&e||s(`Mod ${i} failed to get hash: Expected function name string, got ${typeof e}`),u(e).originalHash)))},d={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:a,api:c,loaded:!0,patching:new Map};return h.set(e.name,d),Object.freeze(c)}function f(){const e=[];for(const t of h.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let y;const _=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:g,getModsInfo:f,getPatchingInfo:d,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return y=e,Object.freeze(e)}():(r(window.bcModSdk)||s("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&s(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=_}()}(Gt);var kt=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Gt);let Ot,Rt=class{constructor(e){this.hookMng=e,this.workList=[]}run(e,t){let s,i=!1;for(const r of this.workList)if("inject"===r.value)r.work(e,t);else if("next"===r.value)s=t(e),i=!0;else if("override"===r.value)s=r.work(e,t),i=!0;else if("flag"===r.value){if(!r.flag)break;r.once&&(r.flag=!1)}else if("check"===r.value&&!r.work(e,t))break;return i?s:t(e)}next(){return this.workList.push({value:"next"}),this}inject(e){return this.workList.push({value:"inject",work:e}),this}inside(e,{once:t=!1,priority:s=1}={}){const i={value:"flag",flag:!1,once:t};return this.hookMng.hookFunction(e,s,((e,t)=>{i.flag=!0;const s=t(e);return i.flag=!1,s})),this.workList.push(i),this}when(e){return this.workList.push({value:"check",work:e}),this}override(e){return this.workList.push({value:"override",work:e}),this}},Ft=class{static info(e){Ot?.info(e)}static warn(e){Ot?.warn(e)}static error(e){Ot?.error(e)}},$t=class{constructor(e=!1){this.done=e,this.list=[]}run(){for(this.done=!0;this.list.length>0;)this.list.shift()()}push(e){this.done?e():this.list.push(e)}};const Tt=new $t,xt=new $t,zt=new $t,jt=new $t;function Vt(){return null!=globalThis.Player&&"number"==typeof globalThis.Player.MemberNumber}const Ut=new class{constructor(){this.mMod=void 0}get mod(){return this.mMod}push(e,t){e.push(t)}init(e){this.mMod=kt.registerMod(e),jt.run(),xt.run();const t=()=>zt.run();Vt()?t():this.mod.hookFunction("LoginResponse",0,((e,s)=>{s(e),Vt()&&t()})),Tt.run()}initWithMod(e){this.mMod=e,jt.run(),xt.run();const t=()=>zt.run();Vt()?t():this.mod.hookFunction("LoginResponse",0,((e,s)=>{s(e),Vt()&&t()}))}afterInit(e){this.push(Tt,e)}afterPlayerLogin(e){this.push(zt,e)}patchFunction(e,t){this.push(jt,(()=>this.mod.patchFunction(e,t)))}invokeOriginal(e,...t){return this.mod?this.mod.callOriginal(e,t):globalThis[e]?.(...t)}hookFunction(e,t,s){this.push(xt,(()=>this.mod.hookFunction(e,t,s)))}progressiveHook(e,t=1){const s=new Rt(this);return this.hookFunction(e,t,((e,t)=>s.run(e,t))),s}insideFlag(e,t=1){const s={inside:!1};return this.hookFunction(e,t,((e,t)=>{s.inside=!0;const i=t(e);return s.inside=!1,i})),s}hookPlayerFunction(e,t,s){var i;i=()=>this.mod.hookFunction(e,t,s),Vt()?zt.push(i):i()}globalFunction(e,t){"function"!=typeof t&&Ft.warn("globalFunction: param is not a function"),null==globalThis[e]?globalThis[e]=t:globalThis[e]!=t&&Ft.warn(`globalFunction: ${e} is already defined`)}randomGlobalFunction(e,t){const s=e=>e+Math.random().toString(16).substring(2);let i=s(e);for(;null!=globalThis[i];)i=s(e);return globalThis[i]=t,i}setLogger(e){!function(e){Ot=e}(e)}};var Ht;Ut.init({name:"ABCL",fullName:"ABCL",version:"2.2.2",repository:"https://github.com/zoe-64/ABCL"}),function(e){e[e.OBSERVE=0]="OBSERVE",e[e.ADD_BEHAVIOR=1]="ADD_BEHAVIOR",e[e.MODIFY_BEHAVIOR=5]="MODIFY_BEHAVIOR",e[e.OVERRIDE_BEHAVIOR=10]="OVERRIDE_BEHAVIOR",e[e.TOP=100]="TOP"}(Ht||(Ht={}));const Wt=(e,t=[],s,i=!0)=>{if(!ServerPlayerIsInChatRoom())return;const r=document.createElement("div");r.innerHTML=(i?"(local) ":"")+e.split("\n").map((e=>e.trim())).join("<br/>"),r.classList.add("ABCLLocalMessage","ChatMessage",...t),s&&(r.style.cssText=s),document.querySelector("#TextAreaChatLog")?.appendChild(r),ElementScrollToEnd("TextAreaChatLog")};const Xt=async(e,t={})=>new Promise(((s,i)=>{const r=document.querySelector(e);if(r)return void s(r);const a=new MutationObserver((()=>{const i=document.querySelector(e);i&&(!t.childCheck||i.childElementCount>0)&&(a.disconnect(),clearTimeout(n),s(i))}));a.observe(document.body,{childList:!0,subtree:!0});const n=setTimeout((()=>{a.disconnect(),console.warn(`Element with selector "${e}" not found within timeout`)}),t.timeout||1e4)})),Yt=e=>`${e=e||"ABCL"}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;class qt{constructor(e){this.lastCallTime=0,this.allowedCallInterval=e}check(){return Date.now()-this.lastCallTime>this.allowedCallInterval&&(this.lastCallTime=Date.now(),!0)}reset(){this.lastCallTime=0}isReady(){return Date.now()-this.lastCallTime>this.allowedCallInterval}}const Zt=e=>"Default"!==e&&"string"==typeof e,Kt=(t,s)=>("string"==typeof t&&"Default"!==t&&e.warn(`Unknown color: ${t}`),t&&"Default"!==t?Array.isArray(t)?t.map((e=>"Default"===e?"#FFFFFF":e)):[t]:[...s.DefaultColor.map((e=>"Default"===e?"#FFFFFF":e))]),Jt=(e,t)=>{const s=e.querySelector(t);if(s)return s;throw new Error(`Element with selector "${t}" not found`)},Qt={state:0,memberNumber:0,setState:e=>{Qt.state=e(Qt.state)},setMemberNumber:e=>{Qt.setMemberNumber(e)},update:()=>{Qt.setState((e=>e+1))}};class es{constructor(e,t=!1){this.newX=0,this.newY=0,this.oldX=0,this.oldY=0,this.isDragging=!1,this.isResizing=!1,this.resizeDirection=null,this.edgeThreshold=10,this.resizable=!0,this.element=e,this.resizable=t,this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMouseMoveForCursor=this.onMouseMoveForCursor.bind(this),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mousemove",this.onMouseMoveForCursor),this.element.style.position="fixed",this.resizable&&(this.element.style.resize="none",this.element.addEventListener("mouseenter",this.onMouseEnter),this.element.addEventListener("mouseleave",this.onMouseLeave))}onMouseEnter(e){this.element.addEventListener("mousemove",this.onMouseMoveForCursor)}onMouseLeave(e){this.element.removeEventListener("mousemove",this.onMouseMoveForCursor),this.element.style.cursor="default"}onMouseMoveForCursor(e){const{offsetX:t,offsetY:s}=e,{offsetWidth:i,offsetHeight:r}=this.element;this.resizable&&(t<this.edgeThreshold||t>i-this.edgeThreshold?this.element.style.cursor="ew-resize":s<this.edgeThreshold||s>r-this.edgeThreshold?this.element.style.cursor="ns-resize":this.element.style.cursor="default")}onMouseDown(e){const{offsetX:t,offsetY:s}=e,{offsetWidth:i,offsetHeight:r}=this.element;this.resizable?t<this.edgeThreshold?(this.isResizing=!0,this.resizeDirection="left"):t>i-this.edgeThreshold?(this.isResizing=!0,this.resizeDirection="right"):s<this.edgeThreshold?(this.isResizing=!0,this.resizeDirection="top"):s>r-this.edgeThreshold?(this.isResizing=!0,this.resizeDirection="bottom"):this.isDragging=!0:this.isDragging=!0,(this.isDragging||this.isResizing)&&(e.preventDefault(),this.oldX=e.clientX,this.oldY=e.clientY,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}onMouseMove(e){if(this.isDragging)this.newX=this.oldX-e.clientX,this.newY=this.oldY-e.clientY,this.oldX=e.clientX,this.oldY=e.clientY,this.element.style.top=this.element.offsetTop-this.newY+"px",this.element.style.left=this.element.offsetLeft-this.newX+"px";else if(this.isResizing){const t=e.clientX-this.oldX,s=e.clientY-this.oldY,i=getComputedStyle(this.element),r=parseInt(i.left,10),a=parseInt(i.top,10),n=parseInt(i.width,10),o=parseInt(i.height,10);switch(this.resizeDirection){case"left":this.element.style.width=n-t+"px",this.element.style.left=`${r+t/2}px`;break;case"right":this.element.style.width=`${n+t}px`,this.element.style.left=`${r+t/2}px`;break;case"top":this.element.style.height=o-s+"px",this.element.style.top=`${a+s/2}px`;break;case"bottom":this.element.style.height=`${o+s}px`,this.element.style.top=`${a+s/2}px`}this.oldX=e.clientX,this.oldY=e.clientY}}onMouseUp(e){e.preventDefault(),this.isDragging=!1,this.isResizing=!1,this.resizeDirection=null,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}class ts{constructor(e,t,s,i=-1){this.prompt=document.createElement("div"),new es(this.prompt),this.id=Yt(),this.message=e,this.onAccept=t,this.onDeny=s,this.show(),-1!==i&&setTimeout((()=>{this.prompt.remove()}),i)}show(){this.prompt.classList.add("ABCLPrompt","no-resize"),this.prompt.id=this.id,this.prompt.innerHTML=`<p>${this.message}</p><button class="ABCLPromptNo ABCLButton">Deny</button><button class="ABCLPromptYes ABCLButton">Accept</button>`,ss.appendChild(this.prompt),this.prompt.querySelector(`#${this.id} .ABCLPromptYes`)?.addEventListener("click",(()=>{this.onAccept(),this.prompt.remove()})),this.prompt.querySelector(`#${this.id} .ABCLPromptNo`)?.addEventListener("click",(()=>{this.onDeny(),this.prompt.remove()}))}}const ss=document.createElement("div");ss.id="ABCL-overlay";const is=()=>{ElementPositionFixed(ss.id,0,0,2e3,1e3),ElementPositionFixed("ABCL-stats-panel",1700,0,300,1e3);const e=document.querySelectorAll(".ABCL-exit-button");for(let t=0;t<e.length;t++){const s=e[t];s.id=s.id||Yt(),ElementPositionFixed(s.id,1815,75,90,90)}};window.addEventListener("resize",is),ss.classList.add("ABCL-overlay");const rs=e=>{if(!e)return;if("object"==typeof e)return e;return ChatRoomCharacter.filter((t=>{const s=t.Name.toLowerCase(),i=t.Nickname?.toLowerCase(),r=`${e}`.toLowerCase();return t.MemberNumber==e||s===r||i===r||s.startsWith(r)||i?.startsWith(r)}))[0]},as=e=>{const t=e.join(" "),s=rs(t);if(s)return s},ns=(e,t,s=Player.ABCL.Version)=>Boolean(e?.ABCL&&(!t||e.ABCL.Version===s));function os(e){if(!e)return"Unknown";const t=rs(e);return t?t.Nickname?t.Nickname:t.Name:"Unknown"}function ls(e,t=null,s=""){let i=e,r="He/Him"===CharacterPronounDescription(Player),a=r?"His":"Her",n=r?"Him":"Her",o=r?"He":"She",l="He/Him"===(t?CharacterPronounDescription(t):"They/Them"),c=t?.IsPlayer()?l?"himself":"herself":t?CharacterNickname(t):s,u=l?"His":"Her",p=t==Player?l?"Himself":"Herself":l?"Him":"Her",d=l?"He":"She";return i.replaceAll("%NAME%",CharacterNickname(Player)).replaceAll("%POSSESSIVE%",a.toLocaleLowerCase()).replaceAll("%PRONOUN%",o.toLocaleLowerCase()).replaceAll("%INTENSIVE%",n.toLocaleLowerCase()).replaceAll("%CAP_POSSESSIVE%",a).replaceAll("%CAP_PRONOUN%",o).replaceAll("%CAP_INTENSIVE%",n).replaceAll("%OPP_NAME%",c).replaceAll("%OPP_PRONOUN%",d.toLocaleLowerCase()).replaceAll("%OPP_POSSESSIVE%",u.toLocaleLowerCase()).replaceAll("%OPP_INTENSIVE%",p.toLocaleLowerCase()).replaceAll("%CAP_OPP_PRONOUN%",d).replaceAll("%CAP_OPP_POSSESSIVE%",u).replaceAll("%CAP_OPP_INTENSIVE%",p)}const cs=(e,t,s=!1)=>{if(0===t)return;if(s&&(t*=100),t=Number(t.toPrecision(2)),void 0===Player.ABCL.Settings.StatusMessages[e])return;if(!Player.ABCL.Settings.StatusMessages[e])return;const i=Player.ABCL.Settings.StatusMessages[e],r=`[${t>0?"+":"-"}${Math.abs(t)}${s?"%":""} ${{Bladder:"PEE",Bowel:"POO",Incontinence:"INCON",MentalRegression:"REG",Soiliness:"MESS",Wetness:"WET",PuddleSize:"PUDL"}[e]}]`;i?Wt(r,["ChatMessageAction","ChatMessageNonDialogue"],"--label-color:#ff4949"):Fi("onABCLMessage",{message:`${os(Player.MemberNumber)}: ${r}`,local:i})};function us(e,t=null,s,i){let r=ls(e,t);const a=!Player.ABCL.Settings.VisibleMessages[s];Wt(r,["ChatMessageAction","ChatMessageNonDialogue"],"--label-color:#ff4949",a),a?i&&i.MemberNumber!==Player.MemberNumber&&Fi("onABCLMessage",{message:r,local:a},i.MemberNumber):Fi("onABCLMessage",{message:r,local:a})}Ut.hookFunction("TextLoad",5,((e,t)=>"WetMinigame"===CurrentScreen||"MessMinigame"===CurrentScreen?void 0:t(e)));function ps(e){var t=e.name;console.log("Registering minigame: "+t),window[t+"Run"]=()=>e.Run(),window[t+"Click"]=()=>e.Click(),window[t+"Load"]=()=>e.Load(),window[t+"Unload"]=()=>e.Unload(),window[t+"Resize"]=()=>e.Resize(),window[t+"KeyDown"]=()=>e.KeyDown(),window[t+"Exit"]=()=>e.Exit(),window[t+"End"]=t=>e.End(t)}class ds{constructor(){this.name=""}Load(){}Unload(){}Resize(){}KeyDown(){}Exit(){}End(e){}}class hs extends ds{constructor(){super(...arguments),this.startText="",this.hintText="",this.failText="",this.successText="",this.tintColor=[{r:0,g:0,b:0,a:0}],this.GameStartTime=0,this.GameEndTime=0,this.StartDelay=4e3,this.AccidentVelocity=0,this.AccidentPosition=0,this.AccidentAcceleration=0,this.AccidentMaxPosition=100,this.AccidentGameDuration=5e3,this.AccidentNextTick=0,this.AccidentText="",this.AccidentChallenge=0,this.BaseGameLength=6e3}End(e){CommonSetScreen("Online","ChatRoom"),MiniGameVictory=e,MiniGameEnded=!0,MiniGameTimer=CommonTime(),this.GameEndTime=MiniGameTimer}get IsStartDelay(){return CommonTime()<this.GameStartTime}Load(){if(DrawFlashScreen("#000000",750,1e3),this.GameStartTime=CommonTime()+this.StartDelay,this.AccidentVelocity=0,this.AccidentAcceleration=0,"number"!=typeof MiniGameDifficulty)MiniGameTimer=CommonTime()+this.BaseGameLength,this.AccidentChallenge=5;else{var e=.25*(MiniGameDifficulty-8);this.AccidentGameDuration=this.BaseGameLength+1e3*e,MiniGameTimer=this.GameStartTime+this.AccidentGameDuration,this.AccidentChallenge=MiniGameDifficulty}this.AccidentMaxPosition=400,this.AccidentPosition=this.AccidentMaxPosition,console.info("Accident minigame started: difficulty - "+this.AccidentChallenge+" time - "+this.AccidentGameDuration),CharacterSetFacialExpression(Player,"Eyes","Daydream",10),this.AccidentChallenge>25?CharacterSetFacialExpression(Player,"Blush","ShortBreath",10):CharacterSetFacialExpression(Player,"Blush","Low",10)}get IsGameActive(){return CommonTime()<MiniGameTimer&&!MiniGameEnded&&!this.GameFailed}get IsGameTimeout(){return CommonTime()>=MiniGameTimer&&!MiniGameEnded}get IsEndGameReport(){return CommonTime()<this.GameEndTime+5e3}get GameFailed(){return this.AccidentPosition<=0}RunGame(e){var t=(this.AccidentGameDuration+CommonTime()-MiniGameTimer)/1e3;CommonTime()>this.AccidentNextTick&&(this.AccidentNextTick=CommonTime()+400,this.AccidentAcceleration=-1.25*this.AccidentChallenge-t*Math.random()),this.AccidentVelocity=Math.min(this.AccidentVelocity,this.AccidentVelocity+.25*this.AccidentAcceleration),this.AccidentPosition>=this.AccidentMaxPosition&&(this.AccidentVelocity=Math.min(0,this.AccidentVelocity)),this.AccidentPosition>0&&(this.AccidentPosition+=this.AccidentVelocity/1e3*e*3.5),this.AccidentPosition=Math.max(0,Math.min(this.AccidentPosition,this.AccidentMaxPosition)),DrawProgressBar(500-this.AccidentMaxPosition,800,2*this.AccidentMaxPosition,50,this.AccidentPosition/this.AccidentMaxPosition*100),DrawText(this.hintText,500,875,"white","black")}Run(){ChatRoomRun(CommonTime()),this.IsStartDelay?DrawText(this.startText,500,500,"white","black"):this.IsGameActive?this.RunGame(TimerRunInterval):!this.IsGameTimeout&&!this.GameFailed||MiniGameEnded||(this.End(this.AccidentPosition>0),MiniGameEnd())}Click(){var e;this.IsGameActive&&(this.AccidentVelocity=Math.max(this.AccidentVelocity+(e=11,Math.floor(Math.random()*e)+5),20))}}class ms extends hs{constructor(){super(...arguments),this.startText="A sudden pressure builds within you...",this.hintText="Click to maintain control. Keep it together!",this.failText="Oops! You've had an accident!",this.successText="Crisis averted! You stayed composed!",this.name="MessMinigame"}End(e){if(super.End(e),e)return Ls.stats.Incontinence-=Us(Ls.stats.Incontinence)/2,void Wt("You managed to keep it together!");Ls.soil(),Ls.onAccident()}}class gs extends hs{constructor(){super(...arguments),this.startText="You feel a trickle starting...",this.hintText="Click to squeeze tight. Don't let it get away!",this.failText="Oh no! You lost control!",this.successText="You held it in! Phew!",this.name="WetMinigame"}End(e){if(super.End(e),e)return Ls.stats.Incontinence-=Us(Ls.stats.Incontinence)/2,Wt("You managed to hold it in!"),void CharacterSetFacialExpression(Player,"Mouth","Happy",20);CharacterSetFacialExpression(Player,"Blush","Low",10),CharacterSetFacialExpression(Player,"Eyes","Surprised",9),Ls.wet(),Ls.onAccident()}}const fs="2.2.2",ys="ABCL",_s=1002,As=()=>{CharacterRefresh(Player,!0)},bs=new qt(72e5),vs=new qt(72e5),Cs=new qt(3e5),Ls={onAccident:()=>{Ls.stats.MentalRegression+=Hs()},update:()=>{Player.ABCL.Settings.PauseStats||(bs.allowedCallInterval=12e4/Math.max(.1,o[Player.ABCL.Settings.PoopMetabolism]),vs.allowedCallInterval=12e4/Math.max(.1,o[Player.ABCL.Settings.PeeMetabolism]),Cs.check()&&(Ls.stats.MentalRegression+=Vs()),vs.check()&&"Disabled"!==Player.ABCL.Settings.PeeMetabolism&&(Ls.stats.BladderValue+=Ls.stats.WaterIntake*o[Player.ABCL.Settings.PeeMetabolism],Ls.attemptWetting()),bs.check()&&"Disabled"!==Player.ABCL.Settings.PoopMetabolism&&(Ls.stats.BowelValue+=Ls.stats.FoodIntake*o[Player.ABCL.Settings.PoopMetabolism],Ls.attemptSoiling()),Ps.save())},wetClothing:()=>{if(Player.ABCL.Settings.DisableWettingLeaks)return;if(Wt("You've had a wet accident in your clothes!"),Ls.stats.PuddleSize+=Ls.stats.BladderValue,Ls.stats.BladderValue=0,Is()?us("%NAME%'s diaper leaks and wet %POSSESSIVE% clothes causing a puddle to form.",void 0,"wetClothing"):us("%NAME%'s wets %POSSESSIVE% clothes and leaks onto the floor.",void 0,"wetClothing"),$i(),Player.ABCL.Settings.DisableClothingStains)return;const e="#96936C",s=InventoryGet(Player,"Panties");if(s&&!Ns(s)){const t=Kt(s.Color||s.Asset.DefaultColor,s.Asset);for(let s=0;s<t.length;s++)Zt(t[s])&&(t[s]=ws(t[s],e,.3));s.Color=t}for(const s of Player.Appearance)if(t.ItemDefinitions.Pants.some((e=>e===s.Asset.DynamicGroupName+s.Asset.Name))){const t=Kt(s.Color||s.Asset.DefaultColor,s.Asset);for(let s=0;s<t.length;s++)Zt(t[s])&&(t[s]=ws(t[s],e,.3));s.Color=t}As()},soilClothing:()=>{if(Player.ABCL.Settings.DisableSoilingLeaks)return;if(Ls.stats.BowelValue=0,Is()?us("%NAME%'s diaper leaks and soils %POSSESSIVE% clothes.",void 0,"soilClothing"):us("%NAME% soils %POSSESSIVE% clothes.",void 0,"soilClothing"),$i(),Player.ABCL.Settings.DisableClothingStains)return;const e="#261a16",s=InventoryGet(Player,"Panties");if(s&&!Ns(s)){const t=Kt(s.Color||s.Asset.DefaultColor,s.Asset);for(let s=0;s<t.length;s++)Zt(t[s])&&(t[s]=ws(t[s],e,.3));s.Color=t}for(const s of Player.Appearance)if(t.ItemDefinitions.Pants.some((e=>e===s.Asset.DynamicGroupName+s.Asset.Name))){const t=Kt(s.Color||s.Asset.DefaultColor,s.Asset);for(let s=0;s<t.length;s++)Zt(t[s])&&(t[s]=ws(t[s],e,.3));s.Color=t}As()},wetDiaper:()=>{const e=Fs(),t=Math.min(Ls.stats.BladderValue,Math.max(0,e-Ls.stats.WetnessValue));us("%NAME% wets %POSSESSIVE% diaper.",void 0,"wetDiaper"),Ls.stats.BladderValue-=t,Ls.stats.WetnessValue+=t,Ls.stats.WetnessValue>=e&&Ls.wetClothing()},soilDiaper:()=>{const e=Fs(),t=Math.min(Ls.stats.BowelValue,Math.max(0,e-Ls.stats.SoilinessValue));us("%NAME% soils %POSSESSIVE% diaper.",void 0,"soilDiaper"),Ls.stats.BowelValue-=t,Ls.stats.SoilinessValue+=t,Ls.stats.SoilinessValue>=e&&Ls.soilClothing()},attemptWetting:()=>{const e=xs(Ls.stats.Incontinence),t=zs(Ls.stats.Incontinence,Ls.stats.BladderFullness);if((Math.random()<t||Ls.stats.BladderFullness>e)&&Es.check())return window?.LITTLISH_CLUB&&window.LITTLISH_CLUB.isRuleActive(Player,_s)?(new gs).End(!1):void MiniGameStart("WetMinigame",30*t,"CommonNoop")},attemptSoiling:()=>{const e=xs(Ls.stats.Incontinence),t=zs(Ls.stats.Incontinence,Ls.stats.BowelFullness);if((Math.random()<t||Ls.stats.BowelFullness>e)&&Es.check())return window?.LITTLISH_CLUB&&window.LITTLISH_CLUB.isRuleActive(Player,_s)?(new ms).End(!1):void MiniGameStart("MessMinigame",30*t,"CommonNoop")},wet:(e=!1)=>{const t=.3*Ls.stats.Incontinence,s=Ls.stats.BladderFullness<.3-t,i=!s,r=Ls.stats.BladderFullness>.6-t;s&&e?Wt("You try to pee, but it doesn't seem to be working."):(i&&(Is()?Ls.wetDiaper():Ls.wetClothing()),r&&e?Ls.stats.Incontinence-=Us(Ls.stats.Incontinence):Ls.stats.Incontinence+=Us(Ls.stats.Incontinence))},soil:(e=!1)=>{const t=.3*Ls.stats.Incontinence,s=Ls.stats.BowelFullness<.3-t,i=!s,r=Ls.stats.BowelFullness>.6-t;s&&e?Wt("You try to let go, but nothing seems to happen."):(i&&(Is()?Ls.soilDiaper():Ls.soilClothing()),r&&e?Ls.stats.Incontinence-=.01:Ls.stats.Incontinence+=.02)},stats:{set PuddleSize(e){e<0&&(e=0),e>250&&(e=250);const t=e-Player.ABCL.Stats.PuddleSize.value;cs("PuddleSize",t),Player.ABCL.Stats.PuddleSize.value=e},get PuddleSize(){return Player.ABCL.Stats.PuddleSize.value},get MentalRegressionModifier(){return o[Player.ABCL.Settings.MentalRegressionModifier]},set MentalRegression(e){e<0&&(e=0),e>1&&(e=1);const t=e-Player.ABCL.Stats.MentalRegression.value;cs("MentalRegression",t,!0),Player.ABCL.Stats.MentalRegression.value=e,Qt.update()},get MentalRegression(){return Player.ABCL.Stats.MentalRegression.value},set Incontinence(e){e<0&&(e=0),e>1&&(e=1);const t=e-Player.ABCL.Stats.Incontinence.value;cs("Incontinence",t,!0),Player.ABCL.Stats.Incontinence.value=e,Qt.update()},get Incontinence(){return Player.ABCL.Stats.Incontinence.value},set WaterIntake(e){e<0&&(e=0),Player.ABCL.Stats.WaterIntake.value=e},get WaterIntake(){return Player.ABCL.Stats.WaterIntake.value},set FoodIntake(e){e<0&&(e=0),Player.ABCL.Stats.FoodIntake.value=e},get FoodIntake(){return Player.ABCL.Stats.FoodIntake.value},set BladderValue(e){e<0&&(e=0);const t=e/this.BladderSize-this.BladderFullness;cs("Bladder",t,!0),Player.ABCL.Stats.Bladder.value=e,Qt.update()},get BladderValue(){return Player.ABCL.Stats.Bladder.value},set BladderSize(e){e<0&&(e=0),Player.ABCL.Stats.Bladder.size=e,Qt.update()},get BladderSize(){return Player.ABCL.Stats.Bladder.size},set WetnessValue(e){e<0&&(e=0);const t=e/Fs()-this.WetnessPercentage;cs("Wetness",t,!0),Player.ABCL.Stats.Wetness.value=e,Rs(),Qt.update()},get WetnessValue(){return Player.ABCL.Stats.Wetness.value},set BladderFullness(e){e<0&&(e=0),this.BladderValue=e*this.BladderSize,Qt.update()},get BladderFullness(){return this.BladderValue/this.BladderSize},set BowelValue(e){e<0&&(e=0);const t=e/this.BowelSize-this.BowelFullness;cs("Bowel",t,!0),Player.ABCL.Stats.Bowel.value=e,Qt.update()},get BowelValue(){return Player.ABCL.Stats.Bowel.value},set BowelSize(e){e<0&&(e=0),Player.ABCL.Stats.Bowel.size=e,Qt.update()},get BowelSize(){return Player.ABCL.Stats.Bowel.size},set SoilinessValue(e){e<0&&(e=0);const t=e/Fs()-this.SoilinessPercentage;cs("Soiliness",t,!0),Player.ABCL.Stats.Soiliness.value=e,Rs(),Qt.update()},get SoilinessValue(){return Player.ABCL.Stats.Soiliness.value},set BowelFullness(e){e<0&&(e=0),this.BowelValue=e*this.BowelSize,Qt.update()},get BowelFullness(){return this.BowelValue/this.BowelSize},get SoilinessPercentage(){return 0==Fs()?0:this.SoilinessValue/Fs()},set SoilinessPercentage(e){e<0&&(e=0),this.SoilinessValue=e*Fs()},get WetnessPercentage(){return 0==Fs()?0:this.WetnessValue/Fs()},set WetnessPercentage(e){e<0&&(e=0),this.WetnessValue=e*Fs()}}},Ps=new class{constructor(e){this.lastSaveTime=0,this.allowedSaveInterval=e}save(){Date.now()-this.lastSaveTime>this.allowedSaveInterval&&(wt(),this.lastSaveTime=Date.now())}}(12e4),Es=new qt(12e4);window.abclPlayer=Ls;const Ds=(e="any")=>{const t=Fs();return"pee"===e?Ls.stats.PuddleSize>0:"poop"===e?Ls.stats.SoilinessValue>=t:Ls.stats.SoilinessValue>=t||Ls.stats.WetnessValue>=t},Ss=()=>{const e=Fs();return Ls.stats.SoilinessValue+Ls.stats.WetnessValue>=e/2},Ns=e=>e.Asset.DynamicGroupName+e.Asset.Name in t.Diapers;function Is(e=Player){if(!e)return!1;const t=InventoryGet(e,"ItemPelvis"),s=InventoryGet(e,"Panties"),i=InventoryGet(e,"Panties_笨笨蛋Luzi");return Boolean(t&&Ns(t)||s&&Ns(s)||i&&Ns(i))}const Bs=()=>Player.Appearance.some((e=>t.ItemDefinitions.BabyItems.includes(e.Asset.DynamicGroupName+e.Asset.Name)));function ws(e,t,s=.5){let i=DrawHexToRGB(e),r=DrawHexToRGB(t),a={r:Math.round(i.r*s+r.r*(1-s)),g:Math.round(i.g*s+r.g*(1-s)),b:Math.round(i.b*s+r.b*(1-s))};return DrawRGBToHex([a.r,a.g,a.b])}function Ms(e,t,s,i){return e>.75?e>.9?t:ws(t,s,e-.75):ws(s,i,e)}const Gs=(e=Player)=>{if(!Is())return!1;const t=InventoryGet(e,"ItemPelvis");return Boolean(t&&Ns(t)&&(Player.MemberNumber===e.MemberNumber?t.Property?.LockedBy:!(t.Property?.LockMemberNumber===e.MemberNumber||"ExclusivePadlock"===t.Property?.LockedBy)))},ks=(e,t)=>t.Layer.findIndex((t=>t.ColorIndex===e)),Os=(e,s,i=Player)=>{if(Player.ABCL.Settings.DisableDiaperStains)return;const r=InventoryGet(i,e);if(r&&Ns(r)){const e=r.Color&&"string"!=typeof r.Color?[...r.Color]:[...r.Asset.DefaultColor],i=t.Diapers[r.Asset.DynamicGroupName+r.Asset.Name],a=Math.min(Ls.stats.SoilinessValue+Ls.stats.WetnessValue/Fs(),1);if("indicator"in i)for(const s of i.indicator)e[s]=ws(t.DiaperColors.indicatorAccident,r.Asset.DefaultColor[s],a);if("gradients"in i)for(const t of i.gradients){r.Property??={},"number"==typeof r.Property.Opacity&&(r.Property.Opacity=void 0);const i=ks(t,r.Asset);r.Property.Opacity??=r.Asset.Layer.map((e=>e.Opacity)),r.Property.Opacity[i]=a,e[t]=s}r.Color=e}},Rs=()=>{const e=Ls.stats.SoilinessValue/Fs(),s=Ls.stats.WetnessValue/Fs(),i=ws(Ms(e,t.DiaperColors.maximummess,t.DiaperColors.middlemess,t.DiaperColors.clean),Ms(s,t.DiaperColors.maximumwet,t.DiaperColors.middlewet,t.DiaperColors.clean),Math.max(Math.min((e+(1-s))/2,2),0));Os("ItemPelvis",i,Player),Os("Panties",i,Player),Os("Panties_笨笨蛋Luzi",i,Player),As()};function Fs(e=Player){const t=InventoryGet(e,"ItemPelvis"),s=InventoryGet(e,"Panties"),i=InventoryGet(e,"Panties_笨笨蛋Luzi");let r=50;return t&&Ns(t)&&(r+=$s(t)),s&&Ns(s)&&(r+=$s(s)),i&&Ns(i)&&(r+=$s(i)),r}function $s(e){return"PoofyDiaper"===e.Asset.Name&&1===e.Property?.TypeRecord?.typed?t.DiaperSizeScale.heavy_adult:t.DiaperSizeScale[t.Diapers[e.Asset.DynamicGroupName+e.Asset.Name].size]}const Ts=()=>{const e=InventoryGet(Player,"ItemPelvis"),t=InventoryGet(Player,"Panties"),s=InventoryGet(player,"Panties_笨笨蛋Luzi");let i={ItemPelvis:null,Panties:null,"Panties_笨笨蛋Luzi":null};return e&&Ns(e)&&(i.ItemPelvis=e),t&&Ns(t)&&(i.Panties=t),s&&Ns(s)&&(i["Panties_笨笨蛋Luzi"]=s),i},xs=e=>.9-.5*e;function zs(e,t){const s=.6*Math.pow(e,2)+.8*Math.pow(t,3);return Math.min(Math.max(s,0),1)}const js=()=>{const e=Player.Appearance.filter((e=>e.Asset.DynamicGroupName+e.Asset.Name in t.ItemDefinitions.BabyItems));return Math.min(.25*e.length,1)},Vs=()=>{let e=js();Bs()&&(e+=1),Ss()&&(e+=1),Ds()&&(e+=1);const t=e/4,s=.0025,i=Ls.stats.MentalRegression;return Ls.stats.MentalRegression<t?Math.round(s*e*(1+i/3)*5*Ls.stats.MentalRegressionModifier*100)/100:Math.round(-s/Math.max(1,e)/(1+i)*3*5*Ls.stats.MentalRegressionModifier*100)/100},Us=e=>{const t=[{increase:.01,start:0,end:.25},{increase:.005,start:.25,end:.5},{increase:.0025,start:.5,end:.75},{increase:.001,start:.75,end:1}];for(const{increase:s,start:i,end:r}of t)if(e>=i&&e<r)return s;return 0},Hs=()=>{const e=1+js()*Ls.stats.MentalRegressionModifier;return Ls.stats.MentalRegression<.25||.25>Ls.stats.MentalRegression&&Ls.stats.MentalRegression<.5&&Ss()?e/500:.5>Ls.stats.MentalRegression&&Ls.stats.MentalRegression<.75&&Ds()?e/1e3:.75>Ls.stats.MentalRegression&&Ls.stats.MentalRegression<1&&Ds()?e/1500:0},Ws=e=>{if(!Is(e))return"";const t=Fs(e),s=e.ABCL.Stats.Soiliness.value/t>.5,i=e.ABCL.Stats.Wetness.value/t>.5,r=e.ABCL.Stats.Wetness.value/t>.8,a=e.ABCL.Stats.Soiliness.value/t>.8;return r&&a?"soggy and stinky":a?"stinky":r?"soggy":i?"wet":s?"messy":"dry"},Xs=(e,t)=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("changeDiaper-pending",{force:t},e.MemberNumber);Ys(e)},Ys=e=>{us(ls(e.MemberNumber===Player.MemberNumber?"%NAME% changes %POSSESSIVE% diaper.":"%OPP_NAME% changes %NAME%'s diaper.",e),void 0,"changeDiaper",e),Ls.stats.WetnessValue=0,Ls.stats.SoilinessValue=0,Rs()},qs={activity:{ID:"change-diaper",Name:"Change Diaper",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/changeDiaper.svg",Target:["ItemPelvis"],OnClick:(e,t)=>Xs(e),Criteria:e=>Is(e)&&ns(e)&&!Player.IsRestrained()&&!Gs()},command:{Tag:"change-diaper",Action:(e,t,s)=>{const i=as(s)??Player;if(!qs.activity.Criteria(i))return Wt("Is either not diapered or not an ABCL player or you are restrained or diaper is locked.");Xs(i)},Description:" [MemberNumber|Name|Nickname]: Changes someone's diaper."},listeners:{"changeDiaper-accepted":({Sender:e})=>Wt(`${os(e)} accepted your change diaper request.`),"changeDiaper-rejected":({Sender:e})=>Wt(`${os(e)} rejected your change diaper request.`),"changeDiaper-pending":({Sender:e},{force:t})=>{if(t)return Ys(rs(e)??Player);switch(Player.ABCL.Settings.OnDiaperChange){case a:new ts(`${os(e)} wants to change your diaper.`,(()=>{Ys(rs(e)??Player),Fi("changeDiaper-accepted",void 0,e)}),(()=>Fi("changeDiaper-rejected",void 0,e)),1e4);break;case n:Ys(rs(e)??Player),Fi("changeDiaper-accepted",void 0,e);break;case r:Fi("changeDiaper-rejected",void 0,e)}}}},Zs=e=>{const t=e.MemberNumber===Player.MemberNumber;if(Qt.setMemberNumber(e.MemberNumber),Jt(document.body,"#ABCL-stats").classList.remove("ABCL-hidden"),setTimeout((()=>{is()}),250),!(Math.random()<.75))return Is(e)?us(ls(t?"%NAME% checks %POSSESSIVE% diaper.":"%NAME% checks %OPP_NAME%'s diaper.",e),void 0,"checkDiaper",e):us(ls(t?"%NAME% checks %POSSESSIVE% clothes for any accidents.":"%NAME% checks %OPP_NAME%'s clothes for any accidents.",e),void 0,"checkDiaper",e)},Ks={activity:{ID:"check-diaper",Name:"Check Diaper",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperCheck.png",OnClick:(e,t)=>Zs(e),Target:["ItemPelvis"],Criteria:e=>ns(e)&&!Player.IsRestrained()},command:{Tag:"check-diaper",Description:" [MemberNumber|Name|Nickname]: Checks someone's diaper.",Action:(e,t,s)=>{const i=as(s)??Player;if(!Ks.activity.Criteria(i))return Wt("Is not an ABCL player or you are restrained.");Zs(i)}}},Js=e=>{us(ls("%OPP_NAME% rubs %OPP_POSSESSIVE% diaper against %NAME%'s face.",e),void 0,"playerActivity",e),ActivityEffectFlat(e,Player,8,"ItemVulva",1),CharacterSetFacialExpression(Player,"Blush","Medium",5),CharacterSetFacialExpression(Player,"Eyebrows","Soft",10),CharacterSetFacialExpression(Player,"Eyes","Dizzy",10),Ls.stats.MentalRegression+=.02*Ls.stats.MentalRegressionModifier},Qs={activity:{ID:"diaper-face-rub",Name:"Rub Diaper Against Face",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperFaceRub.png",Target:["ItemNose"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return ActivityEffectFlat(Player,Player,12,"ItemVulva",1),Fi("diaper-face-rub",void 0,e.MemberNumber);Js(e)})(e),Criteria:e=>Is(e)&&ns(e)&&!Player.IsRestrained()&&e.MemberNumber!==Player.MemberNumber},listeners:{"diaper-face-rub":({Sender:e})=>Js(rs(e)??Player)}},ei=e=>{us(ls("%OPP_NAME% sits with her diapered butt on %NAME%'s face.",e),void 0,"playerActivity",e),Ls.stats.MentalRegression+=.03*Ls.stats.MentalRegressionModifier,ActivityEffectFlat(Player,Player,8,"ItemNose",1),CharacterSetFacialExpression(Player,"Blush","ShortBreath",30),CharacterSetFacialExpression(Player,"Eyebrows","Soft",30),CharacterSetFacialExpression(Player,"Eyes","Dizzy",30)},ti={activity:{ID:"diaper-face-sit",Name:"Sits with Diaper on Face",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperFaceSit.png",Target:["ItemNose"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return ActivityEffectFlat(Player,Player,5,"ItemButt",1),Fi("diaper-face-sit",void 0,e.MemberNumber);ei(e)})(e),Criteria:e=>Is(Player)&&ns(e)&&!Player.IsRestrained()&&e.MemberNumber!==Player.MemberNumber},listeners:{"diaper-face-sit":({Sender:e})=>ei(rs(e)??Player)}},si=e=>{const t=Ws(Player),s="dry"===t?"crinkles":"sloshes",i="dry"===t?"crinkle":"slosh",r=e.MemberNumber===Player.MemberNumber,a=`%NAME% playfully pats %POSSESSIVE% ${t} diapered butt, enjoying the soft ${s} it makes.`,n=`%OPP_NAME% gives %NAME%'s diapered butt a playful pat, as the ${t} diaper ${i} softly.`;ActivityEffectFlat(Player,Player,1,"ItemButt",1),us(ls(r?a:n,e),void 0,"playerActivity",e)},ii={activity:{ID:"diaper-pat-back",Name:"Diaper Pat Bottom",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperPatBack.png",Target:["ItemButt"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-pat-back",void 0,e.MemberNumber);si(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-pat-back":({Sender:e})=>si(rs(e)??Player)}},ri=e=>{const t=Ws(Player),s="dry"===t?"crinkles":"sloshes";us(ls(e.MemberNumber===Player.MemberNumber?`%NAME% pats the front of %POSSESSIVE% ${t} diaper playfully, smiling at the soft ${s}.`:`%OPP_NAME% playfully pats the front of %NAME%'s ${t} diaper, as the padding ${s} softly.`,e),void 0,"playerActivity",e),ActivityEffectFlat(Player,Player,1,"ItemVulva",1)},ai={activity:{ID:"diaper-pat-front",Name:"Diaper Pat Crotch",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperPatFront.png",Target:["ItemVulva"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-pat-front",void 0,e.MemberNumber);ri(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-pat-front":({Sender:e})=>ri(rs(e)??Player)}},ni=(e,t)=>{us(ls("%OPP_NAME% tugs %NAME%'s diaper waistband and pees inside.",e),void 0,"playerActivity",e),CharacterSetFacialExpression(Player,"Blush","Low",8),CharacterSetFacialExpression(Player,"Eyebrows","Soft",8),CharacterSetFacialExpression(Player,"Eyes","Surprised",5),Ls.stats.WetnessValue+=t??0},oi={activity:{ID:"pee-in-diaper",Name:"Pees in Diaper",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperPeeOthersDiaper.png",Target:["ItemPelvis"],OnClick:(e,t)=>((e,t)=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-pee-others-diaper",{volume:t},e.MemberNumber);Ls.stats.BladderValue=0,ni(e,t)})(e,Ls.stats.BladderValue),Criteria:e=>ns(e)&&Is(e)&&Ls.stats.BladderValue>0&&e!==Player&&!Player.IsRestrained()},listeners:{"diaper-pee-others-diaper":({Sender:e},{volume:t})=>ni(rs(e)??Player,t)}},li=e=>{us(ls(e.MemberNumber===Player.MemberNumber?"%NAME% pours water in %POSSESSIVE% diaper.":"%OPP_NAME% pours water in %NAME%'s diaper.",e),void 0,"playerActivity",e),Ls.stats.WetnessValue+=500,CharacterSetFacialExpression(Player,"Blush","Low",8),CharacterSetFacialExpression(Player,"Eyebrows","Soft",8),CharacterSetFacialExpression(Player,"Eyes","Surprised",5),CharacterSetFacialExpression(Player,"Eyes","Daydream",2)},ci={activity:{ID:"diaper-pour",Name:"Pour Water in Diaper",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperPour.png",Target:["ItemPelvis"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-pour",void 0,e.MemberNumber);li(e)})(e),Criteria:e=>Is(e)&&ns(e)&&!Player.IsRestrained()},listeners:{"diaper-pour":({Sender:e})=>li(rs(e)??Player)}},ui=e=>{const t=Ws(Player),s="dry"===t?"crinkles":"sloshes";us(ls(e.MemberNumber===Player.MemberNumber?`%NAME% blushes as %PRONOUN% rubs %POSSESSIVE% ${t} diapered butt with both hands, breath hitching at the soft ${s} under %POSSESSIVE% hands.`:`%OPP_NAME% runs %OPP_POSSESSIVE% hand over %NAME%'s ${t} diapered butt, rubbing affectionate circles into the ${t} padding.`,e),void 0,"playerActivity",e),ActivityEffectFlat(Player,Player,5,"ItemButt",1),Ls.stats.Incontinence>Math.random()&&Ls.attemptSoiling()},pi={activity:{ID:"diaper-rub-back",Name:"Diaper Rub Bottom",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperRubBack.png",Target:["ItemButt"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-rub-back",void 0,e.MemberNumber);ui(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-rub-back":({Sender:e})=>ui(rs(e)??Player)}},di=e=>{const t=Ws(Player);us(ls(e.MemberNumber===Player.MemberNumber?`%NAME% blushes as %PRONOUN% rubs circles over the front of %POSSESSIVE% ${t} diaper, biting %POSSESSIVE% lip as %PRONOUN% grinds down into %POSSESSIVE% own hand.`:`%OPP_NAME% rubs up and down %NAME%'s ${t} diaper, %OPP_POSSESSIVE% fingers pressing into the ${t} padding over the front and between %POSSESSIVE% legs.`,e),void 0,"playerActivity",e),ActivityEffectFlat(Player,Player,10,"ItemVulva",1),Ls.stats.Incontinence>Math.random()&&Ls.attemptWetting()},hi={activity:{ID:"diaper-rub-front",Name:"Diaper Rub",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperRubFront.png",Target:["ItemVulva"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-rub-front",void 0,e.MemberNumber);di(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-rub-front":({Sender:e})=>di(rs(e)??Player)}},mi=e=>{const t=Ws(Player);us(ls(e.MemberNumber===Player.MemberNumber?`%NAME% gives %POSSESSIVE% ${t} diapered butt a squeeze, blushing a little as it squishes under %POSSESSIVE% hand.`:`%OPP_NAME% gives %NAME%'s ${t} diapered butt a teasing squeeze, smiling as %OPP_PRONOUN% squishes and kneads the ${t} padding.`,e),void 0,"playerActivity",e)},gi={activity:{ID:"diaper-squish-back",Name:"Diaper Squish Bottom",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperSquishBack.png",Target:["ItemButt"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-squish-back",void 0,e.MemberNumber);mi(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-squish-back":({Sender:e})=>mi(rs(e)??Player)}},fi=e=>{const t=Ws(Player);us(ls(e.MemberNumber===Player.MemberNumber?`%NAME% presses into the front of %POSSESSIVE% ${t} diaper, blushing as %PRONOUN% squishes %POSSESSIVE% ${t} padding.`:`%OPP_NAME% presses her hand into %NAME%'s ${t} diaper, giggling as %OPP_PRONOUN% squishes the ${t} padding between %POSSESSIVE% legs.`,e),void 0,"playerActivity",e)},yi={activity:{ID:"diaper-squish-front",Name:"Diaper Squish Crotch",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/diaperSquishFront.png",Target:["ItemVulva"],OnClick:(e,t)=>(e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("diaper-squish-front",void 0,e.MemberNumber);fi(e)})(e),Criteria:e=>ns(e)&&Is(e)&&!Player.IsRestrained()},listeners:{"diaper-squish-front":({Sender:e})=>fi(rs(e)??Player)}},_i=e=>{if(!(e.MemberNumber===Player.MemberNumber))return Fi("lick-puddle",void 0,e.MemberNumber);Ai(Player)},Ai=e=>{us(ls(e.MemberNumber===Player.MemberNumber?"%NAME% licks %POSSESSIVE% puddle of pee.":"%OPP_NAME% licks %NAME%'s puddle of pee.",e),void 0,"lickPuddle",e),CharacterSetFacialExpression(Player,"Fluids","DroolLow",20),$i(),As(),Ls.stats.PuddleSize-=50},bi={activity:{ID:"lick-puddle",Name:"Lick Puddle",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/lickPuddle.png",Target:["ItemBoots"],OnClick:(e,t)=>_i(e),Criteria:e=>ns(e)&&e.ABCL.Stats.PuddleSize.value>0},command:{Tag:"lick-puddle",Action:(e,t,s)=>{const i=as(s)??Player;if(!bi.activity.Criteria(i))return Wt("Is either not an ABCL player or has no puddle.");_i(i)},Description:" [MemberNumber|Name|Nickname]: Licks a puddle of pee."},listeners:{"lick-puddle":({Sender:e})=>Ai(rs(e)??Player)}},vi={listeners:{onABCLMessage:({Sender:e},{message:t,local:s})=>{Wt(t,void 0,"background: #FFA9A93B",s)}}},Ci=()=>{const e=Player.ABCL.Settings.PauseStats;us(e?"%NAME% resumed their ABCL stats.":"%NAME% paused their ABCL stats.",Player,"pauseStats"),Player.ABCL.Settings.PauseStats=!e},Li={activity:{ID:"pauseStats",Name:"Pause Stats",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/pauseStats.png",TargetSelf:["ItemPelvis"],OnClick:(e,t)=>Ci(),Criteria:e=>!0},command:{Tag:"pause-stats",Action:(e,t,s)=>Ci(),Description:" Pauses the ABCL stats."}},Pi={listeners:{sync:({Sender:t},s)=>{if(!t)return;console.log("sync:ABCL"),e.debug({message:"Received updated data",data:s});const i=rs(t);i&&(i.ABCL={Stats:s.stats,Version:s.version,Settings:s.settings})},init:({Sender:t})=>{console.log("init"),e.debug("Received request for data"),$i(t)}}},Ei={activity:{ID:"pee",Name:"Pee",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/wetDiaper.svg",OnClick:(e,t)=>Ls.wet(!0),TargetSelf:["ItemPelvis"]},command:{Tag:"pee",Action:(e,t,s)=>Ls.wet(!0),Description:" Lets go of your bladder."}},Di={activity:{ID:"poop",Name:"Poop",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/soilDiaper.svg",OnClick:(e,t)=>Ls.soil(!0),TargetSelf:["ItemPelvis"]},command:{Tag:"poop",Action:()=>Ls.soil(!0),Description:" Relaxes your bowels."}},Si=()=>{const e=.3*Ls.stats.Incontinence,t=Ls.stats.BladderFullness>.6||Ls.stats.BowelFullness>.6,s=Ls.stats.BladderFullness<.3-e&&Ls.stats.BowelFullness<.3-e,i=Ls.stats.MentalRegression>.9,r=Ls.stats.MentalRegression<.3;if(s)return void us("%NAME% tries to use the potty but can't seem to get anything out.",void 0,"usePotty");Ls.stats.BowelFullness=0,Ls.stats.BladderFullness=0;let a="";r&&(a="and feels embarrased",CharacterSetFacialExpression(Player,"Blush","Low",10),Ls.stats.MentalRegression+=.04*Ls.stats.MentalRegressionModifier),t&&!i&&(a+=r?" but is releaved":"and feels releaved",Ls.stats.Incontinence+=-.01,Ls.stats.MentalRegression-=.02*Ls.stats.MentalRegressionModifier,CharacterSetFacialExpression(Player,"Mouth","Happy",8)),us("%NAME% sits down uses the potty "+a+".",void 0,"usePotty")},Ni={activity:{ID:"potty",Name:"Sit and Use Potty",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/potty-temp.png",OnClick:(e,t)=>Si(),TargetSelf:["ItemButt"],Criteria:e=>!(Is(e)&&Gs()||Player.IsRestrained())},command:{Tag:"use-potty",Action:(e,t,s)=>{if(!Ni.activity?.Criteria(Player))return Wt("You are restrained or diaper is locked.");Si()},Description:" Sit down and use the potty."}},Ii=()=>{const e=.3*Ls.stats.Incontinence,t=Ls.stats.BladderFullness<.3&&Ls.stats.BowelFullness<.3,s=Ls.stats.BladderFullness>.6-e||Ls.stats.BowelFullness>.6-e;if(t)return Wt("You try to use the toilet but you can't seem to get anything out.");let i="";s&&(i="and feels releaved",Ls.stats.MentalRegression-=.02*Ls.stats.MentalRegressionModifier,Ls.stats.Incontinence+=-.01),Ls.stats.BladderFullness=0,Ls.stats.BowelFullness=0,us("%NAME% goes to the bathroom uses the toilet "+i+".",void 0,"useToilet")},Bi={activity:{ID:"toilet",Name:"Sit and Use Toilet",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/activity/toilet-temp.png",OnClick:(e,t)=>Ii(),Criteria:e=>Ls.stats.MentalRegression<.3&&!(Is(e)&&Gs())&&!Player.IsRestrained(),TargetSelf:["ItemButt"]},command:{Tag:"use-toilet",Action:()=>Ls.stats.MentalRegression<.3?(CharacterSetFacialExpression(Player,"Eyes","Dizzy",8),Wt("You feel uncomfortable, the toilet is cold and hard almost like ice. You can't use it.")):Is()&&(Player.IsRestrained()||Gs())?Wt("You can't use the toilet while your diaper is locked."):void Ii(),Description:" Sit down and use the toilet."}},wi=e=>{if(e.MemberNumber!==Player.MemberNumber)return Fi("wipe-puddle",void 0,e.MemberNumber);Mi(Player)},Mi=e=>{if(Ls.stats.PuddleSize=0,$i(),As(),e.MemberNumber!==Player.MemberNumber)return us(ls("%OPP_NAME% wipes %NAME%'s puddle of pee.",e),void 0,"wipePuddle",e);us(ls("%NAME% wipes %POSSESSIVE% puddle of pee.",e),void 0,"wipePuddle",e)},Gi={activity:{ID:"wipe-puddle",Name:"Wipe Puddle",Image:"./Assets/Female3DCG/ItemHandheld/Preview/Towel.png",Target:["ItemBoots"],OnClick:(e,t)=>wi(e),Criteria:e=>ns(e)&&e.ABCL.Stats.PuddleSize.value>0&&!Player.IsRestrained()},command:{Tag:"wipe-puddle",Action:(e,t,s)=>{const i=rs(s[0])??Player;if(!Gi.activity.Criteria(i))return Wt("Is either not an ABCL player or has no puddle. Or you are restrained.");wi(i)},Description:" [MemberNumber|Name|Nickname]: Wipes a puddle of pee."},listeners:{"wipe-puddle":({Sender:e})=>{Mi(rs(e)??Player)}}};class ki{constructor(e,t,s,i,r,a,n){this.id=e,this.name=t,this.image=s,this.onClick=i,this.target=r,this.targetSelf=a,this.criteria=n}fitsCriteria(e,t){return Boolean((!this.criteria||this.criteria(e))&&(this.target?.includes(t)||this.targetSelf?.includes(t)&&Player.MemberNumber===e?.MemberNumber))}createButton(){const e=document.createElement("button");return e.id=this.id,e.name=`ABCL_${this.name}`,e.dataset.group="ItemArms",e.className="blank-button button button-styling HideOnPopup dialog-grid-button",e.innerHTML=`<img decoding="async" loading="lazy" src="${this.image}" class="button-image"><span class="button-label button-label-bottom">${this.name}</span>`,e.addEventListener("click",(e=>{const t=CurrentCharacter?.FocusGroup?CurrentCharacter:Player,s=t?.FocusGroup?.Name;this.onClick&&s&&(this.onClick(t,s),DialogLeave())})),e}static isInserted(e){return Boolean(document.getElementById(e))}}const Oi=[qs,Ks,Ei,Di,Ni,Bi,Pi,bi,Gi,vi,Qs,ti,ii,ai,oi,ci,hi,pi,gi,yi,Li],Ri=Oi.reduce(((e,{command:t})=>t?[...e,t]:e),[]);Oi.reduce(((e,{activity:t})=>t?[...e,t]:e),[]);const Fi=(e,t,s)=>{const i={Type:"Hidden",Content:`${ys}Msg`,Sender:Player.MemberNumber,Target:s,Dictionary:[{type:e,data:t}]};ServerSend("ChatRoomChat",i),console.log("sendDataToAction",e,t,s)},$i=t=>{console.log("sendUpdateMyData target",t),Fi("sync",{settings:Player[ys].Settings,stats:Player[ys].Stats,version:fs},t),e.debug({message:`Sending updated data to ${t??"everyone"}`})},Ti=async()=>{await async function(e,t=(()=>!1)){for(;!e();){if(t())return!1;await new Promise((e=>setTimeout(e,10)))}return!0}((()=>ServerSocket&&ServerIsConnected)),Ut.hookFunction("DrawCharacter",1,((e,t)=>{const[s,i,r,a]=e;if(ns(s)&&s.ABCL.Stats.PuddleSize.value>0){const e=s.ABCL.Stats.PuddleSize.value/300,t=512*e,n=235*e;DrawImageResize("https://zoe-64.github.io/ABCL/versions/unstable/assets/puddle.png",i+(250*a-t/2),r+(940*a-n/2),t,n)}return t(e)})),Ut.hookFunction("ChatRoomSync",1,((e,t)=>($i(),t(e)))),Ut.hookFunction("ChatRoomMessage",1,((t,s)=>"ServerEnter"===t[0].Content&&t[0].Sender===Player.MemberNumber?(Fi("init",1),void e.debug("Requesting data from others.")):((e=>{if("ABCLMsg"!==e?.Content)return;if(!e.Sender||!e.Dictionary)return;if(e.Sender===Player.MemberNumber)return;if("Hidden"!==e.Type)return;if(!e.Dictionary[0]?.type)return;const t=e.Dictionary[0]?.type,s=e.Dictionary[0]?.data;for(const i of Oi){const r=i.listeners?.[t];r&&r(e,s)}console.log("receivePacket",t,s,e.Sender)})(t[0]),s(t)))),Ut.hookFunction("CharacterAppearanceSetItem",1,((e,t)=>{let[s,i,r]=e;const a=t(e);return"ItemPelvis"===i&&r&&Ns({Asset:r})&&Rs(),a})),Ut.hookFunction("ActivityRun",1,((e,t)=>{const i=t(e),[r,a,n,o,...l]=e,c=o?.Activity;if(Player.ABCL.Settings.AccidentsByActivities&&a.MemberNumber===Player.MemberNumber&&c.Name in s){const e=s[c.Name];"Disabled"!==Player.ABCL.Settings.PeeMetabolism&&e.wetting&&Math.random()<e.wetting*(1+2*Ls.stats.Incontinence)&&Ls.attemptWetting(),"Disabled"!==Player.ABCL.Settings.PoopMetabolism&&e.messing&&Math.random()<e.messing*(1+2*Ls.stats.Incontinence)&&Ls.attemptSoiling()}return i})),Ut.hookFunction("PreferenceSubscreenChatClick",1,((t,s)=>{if(MouseIn(1815,75,90,90)){const t=Player.ChatSettings?.ColorTheme??"Light";t.startsWith("Light")&&ss&&!ss.classList.contains("sl-theme-light")&&(ss.classList.remove("sl-theme-dark"),ss.classList.add("sl-theme-light"),ss.style.color="black",e.info("SL theme switching: Light")),t.startsWith("Dark")&&ss&&!ss.classList.contains("sl-theme-dark")&&(ss.classList.remove("sl-theme-light"),ss.classList.add("sl-theme-dark"),ss.style.color="white",e.info("SL theme switching: Dark"))}return s(t)}))},xi=[],zi=["Refusing to load mod"];window.addEventListener("error",(async e=>{if(console.error(e.filename),!e.filename.toLowerCase().includes("abcl")||zi.some((t=>e.message.toLowerCase().includes(t.toLowerCase()))))return;const t=`${e.message} at ${e.filename} ${e.lineno}`;if(xi.includes(t))return;xi.push(t);const s={username:`${Player.Name} ${""===Player.Nickname?"":`aka ${Player.Nickname}`} (${Player.MemberNumber})`,thread_name:`${ys} ${fs} Error ${e.message}`.slice(0,100),content:`\n    error: ${t}\n\`\`\`\n${e.error.stack}\n\`\`\`\nmods: ${kt.getModsInfo().map((e=>e.name)).join(", ")}`};await fetch("https://discord.com/api/webhooks/1340000414506029162/aqt7qruFnzDMM5BN_kLtv9gCcallIF-JeRVYl9k23uSIlxrHRvcFMy5mtPUPGDpWZhHX",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}));var ji,Vi,Ui,Hi,Wi,Xi,Yi,qi,Zi,Ki,Ji,Qi={},er=[],tr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,sr=Array.isArray;function ir(e,t){for(var s in t)e[s]=t[s];return e}function rr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ar(e,t,s,i,r){var a={type:e,props:t,key:s,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++Ui:r,__i:-1,__u:0};return null==r&&null!=Vi.vnode&&Vi.vnode(a),a}function nr(e){return e.children}function or(e,t){this.props=e,this.context=t}function lr(e,t){if(null==t)return e.__?lr(e.__,e.__i+1):null;for(var s;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e)return s.__e;return"function"==typeof e.type?lr(e):null}function cr(e){var t,s;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e){e.__e=e.__c.base=s.__e;break}return cr(e)}}function ur(e){(!e.__d&&(e.__d=!0)&&Hi.push(e)&&!pr.__r++||Wi!==Vi.debounceRendering)&&((Wi=Vi.debounceRendering)||Xi)(pr)}function pr(){for(var e,t,s,i,r,a,n,o=1;Hi.length;)Hi.length>o&&Hi.sort(Yi),e=Hi.shift(),o=Hi.length,e.__d&&(s=void 0,r=(i=(t=e).__v).__e,a=[],n=[],t.__P&&((s=ir({},i)).__v=i.__v+1,Vi.vnode&&Vi.vnode(s),_r(t.__P,s,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,a,null==r?lr(i):r,!!(32&i.__u),n),s.__v=i.__v,s.__.__k[s.__i]=s,Ar(a,s,n),s.__e!=r&&cr(s)));pr.__r=0}function dr(e,t,s,i,r,a,n,o,l,c,u){var p,d,h,m,g,f,y=i&&i.__k||er,_=t.length;for(l=function(e,t,s,i,r){var a,n,o,l,c,u=s.length,p=u,d=0;for(e.__k=new Array(r),a=0;a<r;a++)null!=(n=t[a])&&"boolean"!=typeof n&&"function"!=typeof n?(l=a+d,(n=e.__k[a]="string"==typeof n||"number"==typeof n||"bigint"==typeof n||n.constructor==String?ar(null,n,null,null,null):sr(n)?ar(nr,{children:n},null,null,null):void 0===n.constructor&&n.__b>0?ar(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n).__=e,n.__b=e.__b+1,o=null,-1!==(c=n.__i=mr(n,s,l,p))&&(p--,(o=s[c])&&(o.__u|=2)),null==o||null===o.__v?(-1==c&&(r>u?d--:r<u&&d++),"function"!=typeof n.type&&(n.__u|=4)):c!=l&&(c==l-1?d--:c==l+1?d++:(c>l?d--:d++,n.__u|=4))):e.__k[a]=null;if(p)for(a=0;a<u;a++)null!=(o=s[a])&&!(2&o.__u)&&(o.__e==i&&(i=lr(o)),Cr(o,o));return i}(s,t,y,l,_),p=0;p<_;p++)null!=(h=s.__k[p])&&(d=-1===h.__i?Qi:y[h.__i]||Qi,h.__i=p,f=_r(e,h,d,r,a,n,o,l,c,u),m=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&vr(d.ref,null,h),u.push(h.ref,h.__c||m,h)),null==g&&null!=m&&(g=m),4&h.__u||d.__k===h.__k?l=hr(h,l,e):"function"==typeof h.type&&void 0!==f?l=f:m&&(l=m.nextSibling),h.__u&=-7);return s.__e=g,l}function hr(e,t,s){var i,r;if("function"==typeof e.type){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=hr(i[r],t,s));return t}e.__e!=t&&(t&&e.type&&!s.contains(t)&&(t=lr(e)),s.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function mr(e,t,s,i){var r,a,n=e.key,o=e.type,l=t[s];if(null===l&&null==e.key||l&&n==l.key&&o===l.type&&!(2&l.__u))return s;if(i>(null==l||2&l.__u?0:1))for(r=s-1,a=s+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&n==l.key&&o===l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&n==l.key&&o===l.type)return a;a++}}return-1}function gr(e,t,s){"-"==t[0]?e.setProperty(t,null==s?"":s):e[t]=null==s?"":"number"!=typeof s||tr.test(t)?s:s+"px"}function fr(e,t,s,i,r){var a;e:if("style"==t)if("string"==typeof s)e.style.cssText=s;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)s&&t in s||gr(e.style,t,"");if(s)for(t in s)i&&s[t]===i[t]||gr(e.style,t,s[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(qi,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=s,s?i?s.t=i.t:(s.t=Zi,e.addEventListener(t,a?Ji:Ki,a)):e.removeEventListener(t,a?Ji:Ki,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==s?"":s;break e}catch(e){}"function"==typeof s||(null==s||!1===s&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==s?"":s))}}function yr(e){return function(t){if(this.l){var s=this.l[t.type+e];if(null==t.u)t.u=Zi++;else if(t.u<s.t)return;return s(Vi.event?Vi.event(t):t)}}}function _r(e,t,s,i,r,a,n,o,l,c){var u,p,d,h,m,g,f,y,_,A,b,v,C,L,P,E,D,S=t.type;if(void 0!==t.constructor)return null;128&s.__u&&(l=!!(32&s.__u),a=[o=t.__e=s.__e]),(u=Vi.__b)&&u(t);e:if("function"==typeof S)try{if(y=t.props,_="prototype"in S&&S.prototype.render,A=(u=S.contextType)&&i[u.__c],b=u?A?A.props.value:u.__:i,s.__c?f=(p=t.__c=s.__c).__=p.__E:(_?t.__c=p=new S(y,b):(t.__c=p=new or(y,b),p.constructor=S,p.render=Lr),A&&A.sub(p),p.props=y,p.state||(p.state={}),p.context=b,p.__n=i,d=p.__d=!0,p.__h=[],p._sb=[]),_&&null==p.__s&&(p.__s=p.state),_&&null!=S.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=ir({},p.__s)),ir(p.__s,S.getDerivedStateFromProps(y,p.__s))),h=p.props,m=p.state,p.__v=t,d)_&&null==S.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),_&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(_&&null==S.getDerivedStateFromProps&&y!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(y,b),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(y,p.__s,b)||t.__v==s.__v)){for(t.__v!=s.__v&&(p.props=y,p.state=p.__s,p.__d=!1),t.__e=s.__e,t.__k=s.__k,t.__k.some((function(e){e&&(e.__=t)})),v=0;v<p._sb.length;v++)p.__h.push(p._sb[v]);p._sb=[],p.__h.length&&n.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(y,p.__s,b),_&&null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(h,m,g)}))}if(p.context=b,p.props=y,p.__P=e,p.__e=!1,C=Vi.__r,L=0,_){for(p.state=p.__s,p.__d=!1,C&&C(t),u=p.render(p.props,p.state,p.context),P=0;P<p._sb.length;P++)p.__h.push(p._sb[P]);p._sb=[]}else do{p.__d=!1,C&&C(t),u=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++L<25);p.state=p.__s,null!=p.getChildContext&&(i=ir(ir({},i),p.getChildContext())),_&&!d&&null!=p.getSnapshotBeforeUpdate&&(g=p.getSnapshotBeforeUpdate(h,m)),E=u,null!=u&&u.type===nr&&null==u.key&&(E=br(u.props.children)),o=dr(e,sr(E)?E:[E],t,s,i,r,a,n,o,l,c),p.base=t.__e,t.__u&=-161,p.__h.length&&n.push(p),f&&(p.__E=p.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;o&&8==o.nodeType&&o.nextSibling;)o=o.nextSibling;a[a.indexOf(o)]=null,t.__e=o}else for(D=a.length;D--;)rr(a[D]);else t.__e=s.__e,t.__k=s.__k;Vi.__e(e,t,s)}else null==a&&t.__v==s.__v?(t.__k=s.__k,t.__e=s.__e):o=t.__e=function(e,t,s,i,r,a,n,o,l){var c,u,p,d,h,m,g,f=s.props,y=t.props,_=t.type;if("svg"==_?r="http://www.w3.org/2000/svg":"math"==_?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((h=a[c])&&"setAttribute"in h==!!_&&(_?h.localName==_:3==h.nodeType)){e=h,a[c]=null;break}if(null==e){if(null==_)return document.createTextNode(y);e=document.createElementNS(r,_,y.is&&y),o&&(Vi.__m&&Vi.__m(t,a),o=!1),a=null}if(null===_)f===y||o&&e.data===y||(e.data=y);else{if(a=a&&ji.call(e.childNodes),f=s.props||Qi,!o&&null!=a)for(f={},c=0;c<e.attributes.length;c++)f[(h=e.attributes[c]).name]=h.value;for(c in f)if(h=f[c],"children"==c);else if("dangerouslySetInnerHTML"==c)p=h;else if(!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;fr(e,c,null,h,r)}for(c in y)h=y[c],"children"==c?d=h:"dangerouslySetInnerHTML"==c?u=h:"value"==c?m=h:"checked"==c?g=h:o&&"function"!=typeof h||f[c]===h||fr(e,c,h,f[c],r);if(u)o||p&&(u.__html===p.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(p&&(e.innerHTML=""),dr("template"===t.type?e.content:e,sr(d)?d:[d],t,s,i,"foreignObject"==_?"http://www.w3.org/1999/xhtml":r,a,n,a?a[0]:s.__k&&lr(s,0),o,l),null!=a)for(c=a.length;c--;)rr(a[c]);o||(c="value","progress"==_&&null==m?e.removeAttribute("value"):void 0!==m&&(m!==e[c]||"progress"==_&&!m||"option"==_&&m!==f[c])&&fr(e,c,m,f[c],r),c="checked",void 0!==g&&g!==e[c]&&fr(e,c,g,f[c],r))}return e}(s.__e,t,s,i,r,a,n,l,c);return(u=Vi.diffed)&&u(t),128&t.__u?void 0:o}function Ar(e,t,s){for(var i=0;i<s.length;i++)vr(s[i],s[++i],s[++i]);Vi.__c&&Vi.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Vi.__e(e,t.__v)}}))}function br(e){return"object"!=typeof e||null==e?e:sr(e)?e.map(br):ir({},e)}function vr(e,t,s){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){Vi.__e(e,s)}}function Cr(e,t,s){var i,r;if(Vi.unmount&&Vi.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||vr(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){Vi.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Cr(i[r],t,s||"function"!=typeof e.type);s||rr(e.__e),e.__c=e.__=e.__e=void 0}function Lr(e,t,s){return this.constructor(e,s)}function Pr(e,t,s){var i,r,a,n;t==document&&(t=document.documentElement),Vi.__&&Vi.__(e,t),r=(i="function"==typeof s)?null:s&&s.__k||t.__k,a=[],n=[],_r(t,e=(!i&&s||t).__k=function(e,t,s){var i,r,a,n={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:n[a]=t[a];if(arguments.length>2&&(n.children=arguments.length>3?ji.call(arguments,2):s),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===n[a]&&(n[a]=e.defaultProps[a]);return ar(e,n,i,r,null)}(nr,null,[e]),r||Qi,Qi,t.namespaceURI,!i&&s?[s]:r?null:t.firstChild?ji.call(t.childNodes):null,a,!i&&s?s:r?r.__e:t.firstChild,i,n),Ar(a,e,n)}ji=er.slice,Vi={__e:function(e,t,s,i){for(var r,a,n;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),n=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),n=r.__d),n)return r.__E=r}catch(t){e=t}throw e}},Ui=0,or.prototype.setState=function(e,t){var s;s=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=ir({},this.state),"function"==typeof e&&(e=e(ir({},s),this.props)),e&&ir(s,e),null!=e&&this.__v&&(t&&this._sb.push(t),ur(this))},or.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ur(this))},or.prototype.render=nr,Hi=[],Xi="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Yi=function(e,t){return e.__v.__b-t.__v.__b},pr.__r=0,qi=/(PointerCapture)$|Capture$/i,Zi=0,Ki=yr(!1),Ji=yr(!0);var Er=0;function Dr(e,t,s,i,r,a){t||(t={});var n,o,l=t;if("ref"in l)for(o in l={},t)"ref"==o?n=t[o]:l[o]=t[o];var c={type:e,props:l,key:s,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Er,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(n=e.defaultProps))for(o in n)void 0===l[o]&&(l[o]=n[o]);return Vi.vnode&&Vi.vnode(c),c}function Sr(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===s&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Sr(".ABCL-settings-page{height:79%;margin:5% 10dvw 0dvh 5dvw;overflow-y:auto}.ABCL-settings-title{margin-top:0;text-align:center;width:fit-content}.ABCL-divider{margin:1% 0}.ABCL-checkbox-group{display:flex;flex-wrap:wrap;font-size:.8em;gap:1.5vw}.ABCL-settings-section{margin-bottom:.7%;margin-top:2.1%}.ABCL-page-list{display:flex;flex-direction:column;gap:.5em;margin:1%;>*{border:1px solid #000;flex:1 1 auto;padding:10px;text-align:left}}.ABCL-contact-info{display:flex;flex-direction:column;gap:.5em;padding:1%;width:fit-content}.ABCL-settings-menu{display:flex;flex-direction:row;justify-content:space-between;width:56%;>section{display:flex;flex-direction:column;gap:.2em;padding:1%;>div>*{width:100%}}}.ABCL-button{background-color:#fff;border:1px solid #000;cursor:pointer;padding:.3em;white-space:nowrap;width:fit-content;&:hover{background-color:cyan}}");var Nr,Ir,Br,wr,Mr=0,Gr=[],kr=Vi,Or=kr.__b,Rr=kr.__r,Fr=kr.diffed,$r=kr.__c,Tr=kr.unmount,xr=kr.__;function zr(e,t){kr.__h&&kr.__h(Ir,e,Mr||t),Mr=0;var s=Ir.__H||(Ir.__H={__:[],__h:[]});return e>=s.__.length&&s.__.push({}),s.__[e]}function jr(e){return Mr=1,function(e,t,s){var i=zr(Nr++,2);if(i.t=e,!i.__c&&(i.__=[s?s(t):qr(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],s=i.t(t,e);t!==s&&(i.__N=[s,i.__[1]],i.__c.setState({}))}],i.__c=Ir,!Ir.__f)){var r=function(e,t,s){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,s);var n=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(n=!0)}})),a&&a.call(this,e,t,s)||n};Ir.__f=!0;var a=Ir.shouldComponentUpdate,n=Ir.componentWillUpdate;Ir.componentWillUpdate=function(e,t,s){if(this.__e){var i=a;a=void 0,r(e,t,s),a=i}n&&n.call(this,e,t,s)},Ir.shouldComponentUpdate=r}return i.__N||i.__}(qr,e)}function Vr(e,t){var s=zr(Nr++,3);!kr.__s&&function(e,t){return!e||e.length!==t.length||t.some((function(t,s){return t!==e[s]}))}(s.__H,t)&&(s.__=e,s.u=t,Ir.__H.__h.push(s))}function Ur(){for(var e;e=Gr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Xr),e.__H.__h.forEach(Yr),e.__H.__h=[]}catch(t){e.__H.__h=[],kr.__e(t,e.__v)}}kr.__b=function(e){Ir=null,Or&&Or(e)},kr.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),xr&&xr(e,t)},kr.__r=function(e){Rr&&Rr(e),Nr=0;var t=(Ir=e.__c).__H;t&&(Br===Ir?(t.__h=[],Ir.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(Xr),t.__h.forEach(Yr),t.__h=[],Nr=0)),Br=Ir},kr.diffed=function(e){Fr&&Fr(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Gr.push(t)&&wr===kr.requestAnimationFrame||((wr=kr.requestAnimationFrame)||Wr)(Ur)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),Br=Ir=null},kr.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Xr),e.__h=e.__h.filter((function(e){return!e.__||Yr(e)}))}catch(s){t.some((function(e){e.__h&&(e.__h=[])})),t=[],kr.__e(s,e.__v)}})),$r&&$r(e,t)},kr.unmount=function(e){Tr&&Tr(e);var t,s=e.__c;s&&s.__H&&(s.__H.__.forEach((function(e){try{Xr(e)}catch(e){t=e}})),s.__H=void 0,t&&kr.__e(t,s.__v))};var Hr="function"==typeof requestAnimationFrame;function Wr(e){var t,s=function(){clearTimeout(i),Hr&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(s,100);Hr&&(t=requestAnimationFrame(s))}function Xr(e){var t=Ir,s=e.__c;"function"==typeof s&&(e.__c=void 0,s()),Ir=t}function Yr(e){var t=Ir;e.__c=e.__(),Ir=t}function qr(e,t){return"function"==typeof t?t(e):t}function Zr({options:e,value:t,setValue:s,label:i}){return Dr("div",{className:"ABCL-group",children:[Dr("p",{children:i}),e.map(((e,i)=>Dr("button",{className:`ABCL-group-button ${t===e&&"ABCL-group-button-selected"}`,onClick:()=>s(e),children:e},i)))]})}Sr(".ABCL-group-button{background-color:var(--tmd-element,#919191);border:1px solid var(--tmd-element,#262626);color:var(--tmd-text,#fff);cursor:pointer;padding:5px}.ABCL-group-button-selected{background-color:var(--tmd-accent,#000)}.ABCL-group{align-items:center;display:flex;padding:5px 0;width:fit-content}.ABCL-group p{margin-right:10px}");function Kr({checked:e,setChecked:t,label:s}){return Dr("div",{className:"ABCL-checkbox",children:[Dr("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked)}),Dr("p",{style:{marginLeft:"5px"},children:s})]})}function Jr({setPage:e}){const[t,s]=jr(Player.ABCL.Settings.PeeMetabolism),[i,r]=jr(Player.ABCL.Settings.PoopMetabolism),[a,n]=jr(Player.ABCL.Settings.MentalRegressionModifier),[o,l]=jr(Player.ABCL.Settings.OnDiaperChange);return Dr("div",{className:"ABCL-settings-section",children:[Dr("h2",{children:"Wet and Soiling"}),Dr("button",{onClick:()=>e("menu"),className:"ABCL-exit-button"}),Dr("div",{children:Dr("div",{className:"ABCL-checkbox-group",children:[Dr(Kr,{checked:Player.ABCL.Settings.PauseStats,setChecked:e=>Player.ABCL.Settings.PauseStats=e,label:"Pause Stats"}),Dr(Kr,{checked:Player.ABCL.Settings.DisableWettingLeaks,setChecked:e=>Player.ABCL.Settings.DisableWettingLeaks=e,label:"Disable Wetting Leaks / Puddles"}),Dr(Kr,{checked:Player.ABCL.Settings.DisableSoilingLeaks,setChecked:e=>Player.ABCL.Settings.DisableSoilingLeaks=e,label:"Disable Messy Leaks"}),Dr(Kr,{checked:Player.ABCL.Settings.DisableClothingStains,setChecked:e=>Player.ABCL.Settings.DisableClothingStains=e,label:"Disable Clothing Stains"}),Dr(Kr,{checked:Player.ABCL.Settings.DisableDiaperStains,setChecked:e=>Player.ABCL.Settings.DisableDiaperStains=e,label:"Disable Diaper Stains"}),Dr(Kr,{checked:Player.ABCL.Settings.AccidentsByActivities,setChecked:e=>Player.ABCL.Settings.AccidentsByActivities=e,label:"Accidents by Activities (Experimental)"})]})}),Dr(Zr,{options:["Disabled","Slow","Normal","Fast","Faster","Fastest"],value:t,setValue:e=>{s(e),Player.ABCL.Settings.PeeMetabolism=e},label:"Pee Metabolism"}),Dr(Zr,{options:["Disabled","Slow","Normal","Fast","Faster","Fastest"],value:i,setValue:e=>{r(e),Player.ABCL.Settings.PoopMetabolism=e},label:"Poop Metabolism"}),Dr(Zr,{options:["Disabled","Slow","Normal","Fast","Faster","Fastest"],value:a,setValue:e=>{n(e),Player.ABCL.Settings.MentalRegressionModifier=e},label:"Regression Speed"}),Dr(Zr,{options:["Deny","Ask","Allow"],value:o,setValue:e=>{l(e),Player.ABCL.Settings.OnDiaperChange=e},label:"On Diaper Prompt"})]})}function Qr({setPage:e}){return Dr("div",{children:[Dr("button",{onClick:()=>e("menu"),className:"ABCL-exit-button"}),Dr("div",{children:[Dr("h2",{children:"Visible Messages to Players"}),Dr("div",{className:"ABCL-checkbox-group",children:[Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.wetDiaper,setChecked:e=>Player.ABCL.Settings.VisibleMessages.wetDiaper=e,label:"Wetting Diapers"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.wetClothing,setChecked:e=>Player.ABCL.Settings.VisibleMessages.wetClothing=e,label:"Wetting Clothes"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.soilDiaper,setChecked:e=>Player.ABCL.Settings.VisibleMessages.soilDiaper=e,label:"Soiling Diapers"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.soilClothing,setChecked:e=>Player.ABCL.Settings.VisibleMessages.soilClothing=e,label:"Soiling Clothes"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.changeDiaper,setChecked:e=>Player.ABCL.Settings.VisibleMessages.changeDiaper=e,label:"Changing Diapers"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.checkDiaper,setChecked:e=>Player.ABCL.Settings.VisibleMessages.checkDiaper=e,label:"Checking Diapers"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.lickPuddle,setChecked:e=>Player.ABCL.Settings.VisibleMessages.lickPuddle=e,label:"Licking Puddles"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.wipePuddle,setChecked:e=>Player.ABCL.Settings.VisibleMessages.wipePuddle=e,label:"Wiping Puddle"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.usePotty,setChecked:e=>Player.ABCL.Settings.VisibleMessages.usePotty=e,label:"Using Potty"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.useToilet,setChecked:e=>Player.ABCL.Settings.VisibleMessages.useToilet=e,label:"Using Toilet"}),Dr(Kr,{checked:Player.ABCL.Settings.VisibleMessages.statusMessages,setChecked:e=>Player.ABCL.Settings.VisibleMessages.statusMessages=e,label:"Show Status Messages"})]})]}),Dr("div",{children:[Dr("h2",{children:"Visible Status Messages to Yourself"}),Dr("div",{className:"ABCL-checkbox-group",children:[Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.Wetness??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.Wetness=e,label:"Show wetness status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.Soiliness??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.Soiliness=e,label:"Show soiliness status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.Bladder??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.Bladder=e,label:"Show bladder status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.Bowel??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.Bowel=e,label:"Show bowel status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.Incontinence??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.Incontinence=e,label:"Show incontinence status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.MentalRegression??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.MentalRegression=e,label:"Show mental regression status message"}),Dr(Kr,{checked:Player.ABCL.Settings.StatusMessages.PuddleSize??!1,setChecked:e=>Player.ABCL.Settings.StatusMessages.PuddleSize=e,label:"Show puddle size status message"})]})]})]})}Sr(".ABCL-checkbox{align-items:center;display:flex;padding:.7%;white-space:nowrap;width:fit-content}.ABCL-checkbox input{aspect-ratio:1/1;height:100%;width:auto}.ABCL-checkbox p{margin:.35%}");function ea({setPage:e}){return Dr("div",{children:[Dr("button",{onClick:()=>e("menu"),className:"ABCL-exit-button"}),Dr("div",{children:[Dr("h1",{children:["ABCL ","2.2.2"]}),Dr("p",{children:["An addon for"," ",Dr("a",{target:"_blank",href:"https://www.bondageprojects.com/club_game/",children:"Bondage Club"})," ","that adds ABDL features to the game."]}),Dr("p",{children:["Made by"," ",Dr("a",{target:"_blank",href:"https://github.com/zoe-64",children:"Zoe"})," ","and"," ",Dr("a",{target:"_blank",href:"https://github.com/kjbro",children:"En (mama)"}),"."]}),Dr("p",{children:["Thanks to",Dr("div",{className:"ABCL-thanks-list",children:[Dr("p",{children:[Dr("a",{target:"_blank",children:Dr("span",{children:"Firefly"})})," ","- ",Dr("span",{"data-reason":!0,children:"for the original idea"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/mochamaple",children:[Dr("span",{"data-name":!0}),"Maple"]})," ","- ",Dr("span",{"data-reason":!0,children:"for the mod plugin template"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/FurryZoi",children:[Dr("span",{"data-name":!0}),"Zoi"]})," ","- ",Dr("span",{"data-reason":!0,children:"for helping get themed to work"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/minimar",children:[Dr("span",{"data-name":!0}),"minimar"]})," ","- ",Dr("span",{"data-reason":!0,children:"for helping with typos"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/dDeepLb",children:[Dr("span",{"data-name":!0}),"Deep (papa)"]})," ","- ",Dr("span",{"data-reason":!0,children:"for helping with code review and testing"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/dynilath",children:[Dr("span",{"data-name":!0}),"Da'Inihlus"]})," ","- ",Dr("span",{"data-reason":!0,children:"for mod items architecture"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/tetris245",children:[Dr("span",{"data-name":!0}),"Nemesea"]})," ","- ",Dr("span",{"data-reason":!0,children:"for getting me started with modding in bc"})]}),Dr("p",{children:[Dr("a",{target:"_blank",href:"https://github.com/littlesera",children:[Dr("span",{"data-name":!0}),"Sera"]})," ","- ",Dr("span",{"data-reason":!0,children:"for helping during the development process"})]})]})]}),Dr("p",{children:["Source code available on"," ",Dr("a",{target:"_blank",href:"https://github.com/zoe-64/ABCL",children:"GitHub"}),"."]})]})]})}function ta(){const[e,t]=jr("menu");return Vr((()=>{is()}),[e]),Dr("div",{id:"ABCL-settings-page",className:"ABCL-hidden ABCL-settings-page",children:[Dr("button",{onClick:()=>PreferenceSubscreenExtensionsExit(),className:"ABCL-exit-button"}),Dr("div",{children:Dr("h1",{className:"ABCL-settings-title",children:" ABCL Settings "})}),{menu:Dr("div",{className:"ABCL-settings-menu",children:[Dr("section",{children:[Dr("h2",{children:"Menu"}),Dr("div",{className:"ABCL-page-list ABCL-settings-section",children:[Dr("button",{onClick:()=>t("messages"),className:"ABCL-button",children:"Messages"}),Dr("button",{onClick:()=>t("stats"),className:"ABCL-button",children:"Stats"}),Dr("button",{onClick:()=>t("about"),className:"ABCL-button",children:["About ABCL ","2.2.2"]})]})]}),Dr("section",{children:[Dr("h2",{children:"Support"}),Dr("div",{className:"ABCL-contact-info ABCL-settings-section",id:"ABCL-contact-info",children:[Dr("button",{onClick:()=>window.open("https://discord.gg/ENYGwmgDmQ","_blank"),className:"ABCL-button",children:"Join our Discord"}),Dr("button",{onClick:()=>window.open("https://docs.google.com/forms/d/e/1FAIpQLSdOMGAEmOlFTpbcdkdn8b380p50WAE8qPux-45WvFM3qhf9_w/viewform","_blank"),className:"ABCL-button",children:"Give Feedback"})]})]})]}),messages:Dr(Qr,{setPage:t}),stats:Dr(Jr,{setPage:t}),about:Dr(ea,{setPage:t})}[e]]})}Sr(".ABCL-thanks-list{display:flex;flex-direction:column}");function sa({value:e,label:t,color:s="#FFFFFF",foreground:i="#000000",format:r=(e=>(100*e).toFixed(0))}){return Dr("div",{class:"value-bar no-resize",children:[Dr("div",{style:{background:i,width:"100%",height:"10px"},children:Dr("div",{style:{background:s,width:100*e+"%",height:"100%"}})}),Dr("p",{class:"value-bar-label",children:t}),Dr("p",{class:"value-bar-value",children:[r(e),"%"]})]})}Sr("");function ia(){const[e,t]=jr((()=>ChatRoomCharacter.filter((e=>ns(e))))),[s,i]=jr(0);Vr((()=>(Qt.setState=()=>{},Qt.setMemberNumber=i,()=>{Qt.setState=()=>{},Qt.setMemberNumber=()=>{}})),[]);const r=rs(s),a=r&&ns(r),n=a?r.ABCL.Stats.MentalRegression.value:0,o=a?r.ABCL.Stats.Incontinence.value:0,l=a?r.ABCL.Stats.Soiliness.value/Fs(r):0,c=a?r.ABCL.Stats.Wetness.value/Fs(r):0,u=a?r.ABCL.Stats.Bowel.value/r.ABCL.Stats.Bowel.size:0,p=a?r.ABCL.Stats.Bladder.value/r.ABCL.Stats.Bladder.size:0,d=!!a&&r.ABCL.Settings.PauseStats;return Vr((()=>{is()}),[s]),Dr("div",{className:"ABCL-hidden",id:"ABCL-stats",children:[Dr("div",{className:"ABCL-stats-overlay",onClick:()=>document.getElementById("ABCL-stats")?.classList.add("ABCL-hidden")}),Dr("div",{className:"ABCL-stats-panel",id:"ABCL-stats-panel",children:[Dr("select",{class:"ABCL-stats-select",onClick:()=>{t(ChatRoomCharacter.filter((e=>ns(e))))},value:s,onChange:e=>{i(parseInt(e.target.value))},children:e.map((e=>Dr("option",{value:e.MemberNumber,children:os(e.MemberNumber)},e.MemberNumber)))}),Dr("div",{className:"ABCL-stats-container",children:[Dr(sa,{value:o,label:"Incontinence",color:"#cb5b5bff",foreground:"#eeacacff"}),Dr(sa,{value:n,label:"Mental Regression",color:"#ad74beff",foreground:"#e6bff1ff"}),Dr(sa,{value:l,label:"Soiliness",color:"#ab674aff",foreground:"#d1aa98ff"}),Dr(sa,{value:c,label:"Wetness",color:"#e7c463ff",foreground:"#f3e1aeff"}),Dr(sa,{value:u,label:"Bowel Fullness",color:"#7c4c36ff",foreground:"#b7795cff"}),Dr(sa,{value:p,label:"Bladder Fullness",color:"#cba01eff",foreground:"#eacd73ff"}),Dr("p",{children:[Dr("span",{children:"Stats: "}),Dr("span",{children:d?"Paused":"Active"})]}),Dr("button",{onClick:()=>is(),children:"Refresh"})]})]})]})}Sr(".ABCL-stats-overlay{height:100%;left:0;position:absolute;top:0;width:100%}.ABCL-stats-panel{background-color:var(--tmd-element,#fff)}.ABCL-stats-select{background-color:#f9f9f9;border:1px solid #ccc;border-radius:.35%;color:#333;margin:8%;padding:.7%;width:84%}.ABCL-stats-container{display:flex;flex-direction:column;font-size:.5em;gap:1em;padding:8%}");function ra(){return Dr(nr,{children:[Dr(ia,{}),Dr(ta,{})]})}Sr(".ABCL-hidden{display:none!important}.ABCL-overlay{pointer-events:none;z-index:1}.ABCL-overlay *{pointer-events:fill}.ABCL-exit-button{background-color:#fff;background-image:url(Icons/Exit.png);background-position:50%;background-repeat:no-repeat;background-size:contain;border:1px solid #000;cursor:pointer;:hover{background-color:cyan}}#fusam-addon-manager-container{position:absolute;top:0}");const aa=async()=>{Pr(Dr(ra,{}),ss),PreferenceRegisterExtensionSetting({Identifier:"ABCL",ButtonText:"ABCL Settings",Image:"https://zoe-64.github.io/ABCL/versions/unstable/assets/abcl.png",run:()=>{},click:()=>{},exit:()=>(Jt(document.body,"#ABCL-settings-page").classList.add("ABCL-hidden"),wt(),!0),load:()=>{Jt(document.body,"#ABCL-settings-page").classList.remove("ABCL-hidden"),is()}})};const na=new Set(["ItemTorso","ItemTorso2"]),oa={ItemTorso:na,ItemTorso2:na},la={},ca={};function ua(e){return(oa[e]&&Array.from(oa[e])||[e]).map((e=>pa(e)))}function pa(e){return{name:e,group:AssetGroupGet("Female3DCG",e)}}function da(e){return la[e]}class ha{static add(e){for(const[t,s]of Object.entries(e))for(const[e,i]of Object.entries(s))ua(t).forEach((({name:t})=>{AssetFemale3DCGExtended[t]||(AssetFemale3DCGExtended[t]={}),AssetFemale3DCGExtended[t][e]||(AssetFemale3DCGExtended[t][e]=i)}))}static get value(){return AssetFemale3DCGExtended}}const ma={};class ga{static add(e,t){return 0===Object.keys(ma).length&&AssetFemale3DCG.forEach((e=>{ma[e.Group]||(ma[e.Group]={});for(const t of e.Asset){const s=fa(t);ma[e.Group][s.Name]=s}})),ma[e]||(ma[e]={}),ma[e][t.Name]=t,ma}static get value(){return ma}}function fa(e){return"string"==typeof e?{Name:e}:e}function ya(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _a,Aa,ba,va;function Ca(){if(Aa)return _a;Aa=1;const e="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return _a=e}function La(){if(va)return ba;va=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return ba={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var Pa,Ea,Da,Sa,Na,Ia,Ba,wa,Ma,Ga,ka,Oa={exports:{}};function Ra(){if(Ba)return Ia;Ba=1;const e=Ca(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:s}=La(),{safeRe:i,safeSrc:r,t:a}=(Pa||(Pa=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=La(),a=Ca(),n=(t=e.exports={}).re=[],o=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],u=t.t={};let p=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],m=(e,t,s)=>{const i=(e=>{for(const[t,s]of h)e=e.split(`${t}*`).join(`${t}{0,${s}}`).split(`${t}+`).join(`${t}{1,${s}}`);return e})(t),r=p++;a(e,r,t),u[e]=r,l[r]=t,c[r]=i,n[r]=new RegExp(t,s?"g":void 0),o[r]=new RegExp(i,s?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),m("FULL",`^${l[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),m("LOOSE",`^${l[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),m("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),m("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?`+`(?:${l[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[u.COERCE],!0),m("COERCERTLFULL",l[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Oa,Oa.exports)),Oa.exports),n=function(){if(Da)return Ea;Da=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Ea=s=>s?"object"!=typeof s?e:s:t}(),{compareIdentifiers:o}=function(){if(Na)return Sa;Na=1;const e=/^[0-9]+$/,t=(t,s)=>{const i=e.test(t),r=e.test(s);return i&&r&&(t=+t,s=+s),t===s?0:i&&!r?-1:r&&!i?1:t<s?-1:1};return Sa={compareIdentifiers:t,rcompareIdentifiers:(e,s)=>t(s,e)},Sa}();class l{constructor(r,o){if(o=n(o),r instanceof l){if(r.loose===!!o.loose&&r.includePrerelease===!!o.includePrerelease)return r;r=r.version}else if("string"!=typeof r)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",r,o),this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease;const c=r.trim().match(o.loose?i[a.LOOSE]:i[a.FULL]);if(!c)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof l)){if("string"==typeof t&&t===this.version)return 0;t=new l(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)}comparePre(t){if(t instanceof l||(t=new l(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let s=0;do{const i=this.prerelease[s],r=t.prerelease[s];if(e("prerelease compare",s,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return o(i,r)}while(++s)}compareBuild(t){t instanceof l||(t=new l(t,this.options));let s=0;do{const i=this.build[s],r=t.build[s];if(e("build compare",s,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return o(i,r)}while(++s)}inc(e,t,s){if(e.startsWith("pre")){if(!t&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),s=`-${t}`.match(e);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(s)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===s&&(i=[t]),0===o(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Ia=l}var Fa,$a,Ta,xa,za=function(){if(ka)return Ga;ka=1;const e=function(){if(Ma)return wa;Ma=1;const e=Ra();return wa=(t,s,i=!1)=>{if(t instanceof e)return t;try{return new e(t,s)}catch(e){if(!i)return null;throw e}}}();return Ga=(t,s)=>{const i=e(t,s);return i?i.version:null},Ga}(),ja=ya(za),Va=function(){if(xa)return Ta;xa=1;const e=function(){if($a)return Fa;$a=1;const e=Ra();return Fa=(t,s,i)=>new e(t,i).compare(new e(s,i)),Fa}();return Ta=(t,s,i)=>e(t,s,i)<0,Ta}(),Ua=ya(Va);function Ha(e){return globalThis[e]}let Wa=class e{static _initStorage(){var e,t;Ha(this._namespace)||(e=this._namespace,t={},globalThis[e]=t)}static get(e,t){this._initStorage();const s=Ha(this._namespace);return e in s||(s[e]=t()),s[e]}static getMayOverride(e,t){this._initStorage();const s=Ha(this._namespace);return s[e]=t(s[e]),s[e]}static getByVersion(e,t,s,i){if(this._initStorage(),!ja(t))throw new Error(`Invalid version for ${e}: ${t}`);const r=Ha(this._namespace),a=`${e}.__Version`,n=r[e],o=r[a];return n?o&&!Ua(o,t)||(r[e]=i(o,n),r[a]=t):(r[e]=s(n),r[a]=t),r[e]}static set(e,t){this._initStorage(),Ha(this._namespace)[e]=t}static has(e){return this._initStorage(),e in Ha(this._namespace)}static delete(e){this._initStorage();const t=Ha(this._namespace);return e in t&&delete t[e]}static setImplementation(t){const s=["get","set","has","delete"];for(const i of s){if("function"!=typeof t[i])throw new Error(`Implementation must provide a '${i}' function`);e[i]=t[i]}}static createNamespace(t){return{get:(s,i)=>e.get(`${t}.${s}`,i),getMayOverride:(s,i)=>e.getMayOverride(`${t}.${s}`,i),set:(s,i)=>e.set(`${t}.${s}`,i),has:s=>e.has(`${t}.${s}`),delete:s=>e.delete(`${t}.${s}`)}}};Wa._namespace="__BC_LUZI_GLOBALS__",Wa.createNamespace("OnceFlag");let Xa=class{get globalFuncName(){return this._globalFuncName}constructor(e,t){this.functions=[],this._globalFuncName=`${e}_${Math.random().toString(16).substring(2)}`,this.functions.push(((e,...s)=>t(...s))),globalThis[this._globalFuncName]=(...e)=>this.run(...e)}register(e){return this.functions.push(e),this}run(...e){let t;for(const s of this.functions)t=s(t,...e);return t}};function Ya(e,t,s){return Wa.get(e,(()=>{const i=new Xa(e,t);return s?.(i),i}))}class qa{constructor(e,t){this.fulfilled=e,this.value=t}then(e,t){void 0!==this.value?e(this.value):t?t(this.value):console.error("Promise rejected without handler",this.value)}static resolve(e){return new qa(!0,e)}static reject(e){return new qa(!1,e)}}const Za={},Ka={},Ja=[],Qa=(e,t)=>Ka[e]?.[t];function en(){return Ka}function tn(e){return!!(e&&e.Asset&&Qa(e.Asset.Group.Name,e.Asset.Name))}function sn(e,t){const s="TW"!==TranslationLanguage?TranslationLanguage:"CN";let i=e(s);return void 0!==i?i:(i="CN"===s?e("CN"):e("EN")||e("CN"),void 0!==i?i:t)}function rn(e,t){return sn((t=>e[t]),t)}function an(e,t,s){return sn((s=>e[s]?.[t]),s)}const nn={};function on(e){for(const[t,s]of Object.entries(e)){nn[t]||(nn[t]={});for(const[e,i]of Object.entries(s))nn[t][e]=i,e.includes("ItemTorso2")?nn[t][e.replace("ItemTorso2","ItemTorso")]=i:e.includes("ItemTorso")&&(nn[t][e.replace("ItemTorso","ItemTorso2")]=i)}}let ln=!1;function cn(e){return rn(e,e.CN)}function un(e,t){return e?e.CN?e:{...e,CN:t}:{CN:t}}function pn(e,t,s){const i={};for(const[r,a]of Object.entries(s))a[e]?.[t]&&(i[r]=a[e][t]);return i}function dn(e,t,s){const i={};for(const[r,a]of Object.entries(s))a[e]?.[t]&&(i[r]=a[e][t]);return i}const hn={},mn={};class gn{static setAsset(e,t,s){Object.entries(s).forEach((([s,i])=>{const r=s;hn[r]||(hn[r]={}),hn[r][e]||(hn[r][e]={}),hn[r][e][t]=i}))}static setGroup(e,t){Object.entries(t).forEach((([t,s])=>{const i=t;mn[i]||(mn[i]={}),mn[i][e]=s}))}}function fn(e,t){e.Description=t}function yn(){Object.values(Za).forEach((e=>fn(e,function(e){return an(mn,e,e.replace(/_.*?Luzi$/,""))}(e.Name)))),Object.values(en()).map((e=>Object.values(e))).flat().forEach((e=>fn(e,function(e,t){return s=hn,i=e,r=t,sn((e=>s[e]?.[i]?.[r]),t.replace(/_.*?Luzi$/,""));var s,i,r}(e.Group.Name,e.Name)))),Object.entries(en()).map((([e,t])=>({group:da(e),asset:t}))).filter((({group:e})=>!!e)).map((({group:e,asset:t})=>Object.entries(t).map((([t,s])=>({asset:s,fromAsset:AssetGet("Female3DCG",e,t)}))))).flat().filter((({fromAsset:e})=>!!e)).forEach((({asset:e,fromAsset:t})=>fn(e,t.Description)));const e=TextAllScreenCache.get(AssetStringsPath),t=e=>{const t=ca,s=new Set,i=AssetGroup.map((e=>e.Name)).sort(((e,t)=>t.length-e.length));Object.entries(e.cache).forEach((([r,a])=>{if(s.has(r))return;const n=i.find((e=>r.startsWith(e)));if(!n)return;s.add(r);const o=t[n];if(!o)return;const l=r.slice(n.length);o.forEach((t=>{const s=t+l;e.cache[s]||(e.cache[s]=a)}))}))};e&&(e.loaded?t(e):e.rebuildListeners.push((e=>e&&t(e))))}let _n=!1;const An=new Map,bn=new Map;let vn,Cn,Ln;function Pn(e,t,s,i=!1){i&&An.has(e)||An.set(e,{desc:t,fallback:s,noOverride:i})}function En(e,t,s,i=!1){i&&bn.has(e)||bn.set(e,{desc:t,fallback:s,noOverride:i})}function Dn(e){const t={};for(const[s,i]of Object.entries(e))for(const[e,r]of Object.entries(i))t[e]||(t[e]={}),t[e][s]=r;return Object.entries(t).reduce(((e,[t,s])=>(e.push({key:t,value:s}),e)),[])}function Sn(e,t,{entries:s,noOverride:i}={}){const r=function(e){if(!e)return e=>({CN:e});const t={};for(const[s,i]of Object.entries(e))for(const[e,r]of Object.entries(i))t[e]||(t[e]={}),t[e][s]=r;return e=>t[e]||{CN:e}}(s),a=new Set;t.Layer?.filter((e=>!e.CopyLayerColor&&(e.AllowColorize??!0)&&!e.HideColoring)).forEach((({Name:s,ColorGroup:n})=>{s?Pn(`${e}${t.Name}${s}`,r(s),s,!!i):Pn(`${e}${t.Name}`,{CN:t.Name.replace(/_.*?Luzi$/,"")},t.Name,!!i),n&&a.add(n)})),a.forEach((s=>En(`${e}${t.Name}${s}`,r(s),s,!!i)))}class Nn{static info(e){Ln?.info(e)}static warn(e){Ln?.warn(e)}static error(e){Ln?.error(e)}}let In=!1;const Bn=[];function wn(e){In?e():Bn.push(e)}const Mn={},Gn={};function kn(e,t){const s=AssetGroupGet("Female3DCG",e);In&&s?t(s):(Gn[e]||(Gn[e]=[]),Gn[e].push(t))}let On=!1;const Rn=[];function Fn(e){On?e():Rn.push(e)}const $n=new Set;function Tn(e,t,{extendedConfig:s,translation:i,dynamicName:r,preimage:a,noMirror:n,layerNames:o,assetStrings:l}={}){!function(e,t){const s=AssetGroupGet("Female3DCG",e);In&&s?t(s):(Mn[e]||(Mn[e]=[]),Mn[e].push(t))}(e,(e=>{ga.add(e.Name,t),s&&ha.add(s)}));const c=e;!function(e,t,s){const i=s=>{const r=t?[pa(e)]:ua(e),a=r.find((({group:e})=>!e));if(a)return $n.has(a.name)?void console.error(`[AssetManager] Required group "${a.name}" not found`):($n.add(a.name),void kn(a.name,(()=>i(s))));r.forEach((({group:e})=>s(e)))};In?i(s):kn(e,(()=>i(s)))}(e,!!n,(e=>{const s=e.Name,n=fa(t),u=AssetResolveCopyConfig.AssetDefinition(n,s,ga.value);if(!u)return;const p=un(i,u.Name.replace(/_.*?Luzi$/,""));void 0!==en()[s]?.[n.Name]&&console.warn(`[AssetManager] Asset {${s}:${n.Name}} already existed!`),function(...[e,t,s]){Ut.invokeOriginal("AssetAdd",e,t,s);const i=e.Name,r=t.Name;Ka[i]||(Ka[i]={});const a=AssetGet("Female3DCG",i,r);return a?(Ka[i][r]=a,qa.resolve(a)):qa.reject(`Asset ${i}:${r} not found`)}(e,u,ha.value).then((e=>{if(e.DynamicGroupName===e.Group.Name&&(e.DynamicGroupName=r||c),a){const t=AssetGet("Female3DCG",a.Name,u.Name);t&&(e.Description=t.Description,e.DynamicGroupName=t.DynamicGroupName,["ScriptDraw","BeforeDraw","AfterDraw"].filter((e=>t[`Dynamic${e}`])).forEach((e=>function(e,t,s,i){const r=`Assets${t}${s.Name}${i}`,a=`Assets${e}${s.Name}${i}`;globalThis[r]&&(globalThis[a]=globalThis[r])}(s,a.Name,u,e))))}else e.Description=cn(p),function(e,t){Ja.push({name:e,asset:t})}(u.Name,e),Sn(e.DynamicGroupName,u,{entries:o,noOverride:!o});l&&function(e,t,s){for(const[i,r]of Object.entries(s)){nn[i]||(nn[i]={});for(const[s,a]of Object.entries(r))nn[i][`${e}${t}${s}`]=a}}(e.Group.Name,e.Name,l)})),gn.setAsset(s,u.Name,p)}))}const xn={},zn={};function jn(e,{translation:t,dynamicName:s,preimage:i}={}){wn((()=>{const r=un(t,e.Group.replace(/_.*?Luzi$/,""));(function(...[e,t]){const s=Ut.invokeOriginal("AssetGroupAdd",e,t);return Za[s.Name]=s,qa.resolve(s)})("Female3DCG",e).then((t=>{t.Description=cn(r),s&&(t.DynamicGroupName=s);const a=(()=>{if(!i)return;const t=AssetFemale3DCGExtended[i.Name];if(!t)return;const s={};for(const[e,r]of Object.entries(t))s[e]={Archetype:r.Archetype,CopyConfig:{GroupName:i.Name,AssetName:e}};return{[e.Group]:s}})();e.Asset.forEach((t=>{const r=fa(t);if(a&&i){const t=zn[i.Name]?.[r.Name];t&&Fn((()=>{const s=AssetGet("Female3DCG",e.Group,r.Name);s&&AssetBuildExtended(s,t,a,null,!1)}))}Tn(e.Group,r,{dynamicName:s,preimage:i,extendedConfig:a})}))})),gn.setGroup(e.Group,r)}))}wn((()=>{let e=!1;Ut.hookFunction("AssetBuildExtended",0,((t,s)=>{if(e){const[e,s]=t;return zn[e.Group.Name]??={},zn[e.Group.Name][e.Name]=s,null}return s(t)})),e=!0,Ut.invokeOriginal("ExtendedItemManualRegister"),e=!1}));const Vn=new Set;function Un(e,t,s){const i=()=>{const r=AssetFemale3DCG.find((e=>e.Group===t)),a=AssetGroupGet("Female3DCG",t),n=AssetFemale3DCGExtended[t];if(!r||!a)return Vn.has(t)?void console.error(`[AssetManager] Group ${t} not found`):(Vn.add(t),void wn(i));var o,l;l=e,oa[o=t]||(oa[o]=new Set([o])),oa[o].add(l),ca[o]||(ca[o]=new Set),ca[o].add(l),la[l]=o;const c=un(s,e.replace(/_.*?Luzi$/,""));jn({...r,Group:e,Default:!1,Random:!1},{translation:c,dynamicName:r.DynamicGroupName||r.Group,preimage:a}),AssetFemale3DCGExtended[e]=n};wn(i)}let Hn,Wn=!1;var Xn,Yn,qn,Zn;function Kn(){if(Yn)return Xn;Yn=1;const e="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return Xn=e}function Jn(){if(Zn)return qn;Zn=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return qn={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var Qn,eo,to,so,io,ro,ao,no,oo,lo,co,uo={exports:{}};var po=function(){if(co)return lo;co=1;const e=function(){if(oo)return no;oo=1;const e=function(){if(ao)return ro;ao=1;const e=Kn(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:s}=Jn(),{safeRe:i,safeSrc:r,t:a}=(Qn||(Qn=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Jn(),a=Kn(),n=(t=e.exports={}).re=[],o=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],u=t.t={};let p=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],m=(e,t,s)=>{const i=(e=>{for(const[t,s]of h)e=e.split(`${t}*`).join(`${t}{0,${s}}`).split(`${t}+`).join(`${t}{1,${s}}`);return e})(t),r=p++;a(e,r,t),u[e]=r,l[r]=t,c[r]=i,n[r]=new RegExp(t,s?"g":void 0),o[r]=new RegExp(i,s?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),m("FULL",`^${l[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),m("LOOSE",`^${l[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),m("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),m("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?`+`(?:${l[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[u.COERCE],!0),m("COERCERTLFULL",l[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(uo,uo.exports)),uo.exports),n=function(){if(to)return eo;to=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return eo=s=>s?"object"!=typeof s?e:s:t}(),{compareIdentifiers:o}=function(){if(io)return so;io=1;const e=/^[0-9]+$/,t=(t,s)=>{const i=e.test(t),r=e.test(s);return i&&r&&(t=+t,s=+s),t===s?0:i&&!r?-1:r&&!i?1:t<s?-1:1};return so={compareIdentifiers:t,rcompareIdentifiers:(e,s)=>t(s,e)},so}();class l{constructor(r,o){if(o=n(o),r instanceof l){if(r.loose===!!o.loose&&r.includePrerelease===!!o.includePrerelease)return r;r=r.version}else if("string"!=typeof r)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",r,o),this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease;const c=r.trim().match(o.loose?i[a.LOOSE]:i[a.FULL]);if(!c)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof l)){if("string"==typeof t&&t===this.version)return 0;t=new l(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)}comparePre(t){if(t instanceof l||(t=new l(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let s=0;do{const i=this.prerelease[s],r=t.prerelease[s];if(e("prerelease compare",s,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return o(i,r)}while(++s)}compareBuild(t){t instanceof l||(t=new l(t,this.options));let s=0;do{const i=this.build[s],r=t.build[s];if(e("build compare",s,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return o(i,r)}while(++s)}inc(e,t,s){if(e.startsWith("pre")){if(!t&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),s=`-${t}`.match(e);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(s)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===s&&(i=[t]),0===o(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ro=l}();return no=(t,s,i=!1)=>{if(t instanceof e)return t;try{return new e(t,s)}catch(e){if(!i)return null;throw e}},no}();return lo=(t,s)=>{const i=e(t,s);return i?i.version:null},lo}(),ho=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(po);function mo(e){return globalThis[e]}class go{static _initStorage(){var e,t;mo(this._namespace)||(e=this._namespace,t={},globalThis[e]=t)}static get(e,t){this._initStorage();const s=mo(this._namespace);return e in s||(s[e]=t()),s[e]}static getMayOverride(e,t){this._initStorage();const s=mo(this._namespace);return s[e]=t(s[e]),s[e]}static getByVersion(e,t,s,i){if(this._initStorage(),!ho(t))throw new Error(`Invalid version for ${e}: ${t}`);const r=mo(this._namespace),a=`${e}.__Version`,n=r[e],o=r[a];return n?o&&!Ua(o,t)||(r[e]=i(o,n),r[a]=t):(r[e]=s(n),r[a]=t),r[e]}static set(e,t){this._initStorage(),mo(this._namespace)[e]=t}static has(e){return this._initStorage(),e in mo(this._namespace)}static delete(e){this._initStorage();const t=mo(this._namespace);return e in t&&delete t[e]}static setImplementation(e){const t=["get","set","has","delete"];for(const s of t){if("function"!=typeof e[s])throw new Error(`Implementation must provide a '${s}' function`);go[s]=e[s]}}static createNamespace(e){return{get:(t,s)=>go.get(`${e}.${t}`,s),getMayOverride:(t,s)=>go.getMayOverride(`${e}.${t}`,s),set:(t,s)=>go.set(`${e}.${t}`,s),has:t=>go.has(`${e}.${t}`),delete:t=>go.delete(`${e}.${t}`)}}}go._namespace="__BC_LUZI_GLOBALS__";const fo=go.createNamespace("OnceFlag");function yo(e){return new Promise((t=>setTimeout(t,e)))}class _o{static get emptyImage(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAADUlEQVQI12P4//8/AwAI/AL+XJ/P2gAAAABJRU5ErkJggg=="}static assetPreviewIconPath(e){const t="Asset"in e?e.Asset:e;return`${AssetGetPreviewPath(t)}/${t.Name}.png`}static activityPreviewIconPath(e){return`Assets/Female3DCG/Activity/${("Activity"in e?e.Activity:e).Name}.png`}}function Ao(e,t){const s=new Set;let i=e;for(;t[i];){if(s.has(i))return console.warn(`Circular dependency detected during resolution: ${i}`),"";s.add(i),i=t[i]}return i}function bo(e){const t={};for(const s of Object.keys(e)){const i=Ao(s,e);if(!i)return console.warn(`Circular dependency detected during optimization: ${s}`),null;t[s]=i}return t}const vo=new class{constructor(){this.basic={},this.custom={},this.customSrc={}}addImgMapping(e){const t={...this.customSrc,...e},s=bo(t);s?(this.customSrc=t,this.custom=s):console.warn("Failed to add mappings due to circular dependencies.")}rebuildCustomMapping(){const e=bo(this.customSrc);e?this.custom=e:console.warn("Failed to rebuild mappings due to circular dependencies.")}migrateTo(e){e.customSrc={...e.customSrc,...this.customSrc},e.basic={...e.basic,...this.basic},e.rebuildCustomMapping(),this.customSrc=e.customSrc,this.basic=e.basic,this.custom=e.custom}setBasicImgMapping(e){this.basic={...e,...this.basic}}mapImgSrc(e){if("string"!=typeof e)return e;if(!e.endsWith(".png"))return e;if(e.startsWith("data:image"))return e;if(e.startsWith("http"))return e;const t=e.startsWith("./")?e.slice(2):e;let s=t;return this.custom[s]&&(s=this.custom[s]),this.basic[s]&&(s=this.basic[s]),s!==t?s:e}mapImg(e,t){let s=e;s.startsWith("data:image")||s.startsWith("http")||(this.custom[s]&&(s=this.custom[s]),this.basic[s]&&(s=this.basic[s]),s!==e&&t(s))}};class Co{constructor(){!function(e){fo.get(e,(()=>!1))||(fo.set(e,!0),Ut.patchFunction("GLDrawLoadImage",{"Img.src = url;":'Img.crossOrigin = "Anonymous";\n\t\tImg.src = url;'}))}("ImgMappingOnce.GLDrawLoadImage.crossOrigin"),["DrawImageEx","DrawImageResize","GLDrawImage","DrawGetImage"].forEach((e=>{Ut.hookFunction(e,0,((e,t)=>(e[0]=vo.mapImgSrc(e[0]),t(e))))})),"R114"!==GameVersion&&Ut.hookFunction("GLDrawLoadTextureAlphaMask",0,((e,t)=>(Array.isArray(e[5])&&(e[5]=e[5].map((e=>({...e,Url:vo.mapImgSrc(e.Url)})))),t(e)))),(async()=>{await function(e,t=100){return(async()=>{for(;!e();)await yo(t)})()}((()=>void 0!==globalThis.ElementButton)),Ut.hookFunction("ElementButton.CreateForAsset",0,((e,t)=>(vo.mapImg(_o.assetPreviewIconPath(e[1]),(t=>{e[4]={...e[4],image:t}})),t(e)))),Ut.hookFunction("ElementButton.CreateForActivity",0,((e,t)=>{const s=e[1],i=e[4]?.image??(s.Item?_o.assetPreviewIconPath(s.Item.Asset):`Assets/Female3DCG/Activity/${s.Activity.Name}.png`);return vo.mapImg(i,(t=>{e[4]={...e[4],image:t}})),t(e)})),Ut.hookFunction("ElementButton.Create",0,((e,t)=>{if(e[0]?.startsWith("dialog-inventory")){const t=e[2];t?.icons&&(t.icons=t.icons.map((e=>{if("string"==typeof e&&e.endsWith("Padlock")){const t=`Assets/Female3DCG/ItemMisc/Preview/${e}.png`,s=vo.mapImgSrc(t);if(s!==t)return{name:e,iconSrc:s,tooltipText:InterfaceTextGet("PreviewIconPadlock").replace("AssetName",AssetGet("Female3DCG","ItemMisc",e)?.Description??e)}}return e})))}if(e[0]?.startsWith("dialog-expression-button-grid-Emoticon")){const t=e[2];t?.image&&(t.image=vo.mapImgSrc(t.image))}return t(e)}))})()}get storage(){return vo}addImgMapping(e){vo.addImgMapping(e)}setBasicImgMapping(e){vo.setBasicImgMapping(e)}}const Lo=go.get("ImageMapping@1.1.2",(()=>new Co)),Po=new class{addAsset(e,t,s,i,r=!1){Tn(e,t,s?{extendedConfig:{[e]:{[t.Name]:s}},translation:i,noMirror:r}:{translation:i,noMirror:r})}addAssetWithConfig(e,t,s){Tn(e,t,{translation:s.translation,noMirror:s.noMirror,layerNames:s.layerNames,...s.extended?{extendedConfig:{[e]:{[t.Name]:s.extended}}}:{},assetStrings:s.assetStrings??s.assetDialogs})}addGroupedAssetsWithConfig(e,t,s){for(const[i,r]of Object.entries(e))for(const e of r){const r=i;Tn(r,e,{translation:dn(r,e.Name,t),layerNames:pn(r,e.Name,s)})}}addGroupedAssets(e,t,s){for(const[i,r]of Object.entries(e))for(const e of r){const r=i,a=t&&dn(r,e.Name,t);Tn(r,e,{extendedConfig:s&&s[r]?.[e.Name]&&{[r]:{[e.Name]:s[r][e.Name]}},translation:a})}}addGroupedConfig(e){!function(e){e&&ha.add(e)}(e)}modifyAsset(e,t,s){!function(e,t,s){"string"==typeof e&&(e=[e]);for(const i of e){const e=r=>{const a=AssetGet("Female3DCG",r.Name,t);if(a)s(r,a);else{if(xn[i]||(xn[i]=new Set),xn[i].has(t))return void console.error(`[AssetManager] Asset ${i}:${t} not found`);xn[i].add(t),kn(i,e)}};kn(i,e)}}(e,t,s)}modifyAssetLayers(e,t){!function(e,t){Fn((()=>{Asset.filter(e).forEach((e=>{e.Layer.forEach((s=>t(e,s)))}))}))}(e,t)}modifyGroup(e,t){!function(e,t){kn(e,(e=>t(e)))}(e,t)}addCustomAssetString(e){on(e)}addCustomDialog(e){on(e)}addImageMapping(e){Lo.addImgMapping(e)}get imageMapping(){return Lo}addGroup(e,t){jn(e,{translation:t})}addCopyGroup(e,t,s){Un(e,t,s)}addLayerNames(e,t,s){Sn(e,t,{entries:s})}addLayerNamesRaw(e,t,s){!function(e,t,s){for(const{key:i,value:r}of Dn(s))Pn(`${e}${t}${i}`,r,i)}(e,t,s)}addColorGroupNamesRaw(e,t,s){!function(e,t,s){for(const{key:i,value:r}of Dn(s))En(`${e}${t}${i}`,r,i)}(e,t,s)}assetIsCustomed(e){return void 0!==en()[e.Group.Name]?.[e.Name]}assetNameIsStrictCustomed(e){return void 0!==(t=e,Ja.find((e=>e.name===t))?.asset);var t}afterLoad(e){Fn(e)}init(e){!function(){if(ln)return;ln=!0;const e=e=>an(nn,e);Ut.progressiveHook("AssetTextGet").override(((t,s)=>e(t[0])||s(t))),Ut.progressiveHook("ChatRoomPublishCustomAction").inject((t=>{const[s,i,r]=t,a=e(s);a&&r.push({Tag:`MISSING TEXT IN "Interface.csv": ${s}`,Text:a})})).next()}(),function(){if(_n)return;_n=!0;const e=TextAllScreenCache.get(AssetStringsPath);e&&e.loaded&&("EN"===TranslationLanguage||"Bloated"!==e.get("Bloated"))&&yn(),Ut.progressiveHook("AssetBuildDescription").next().inject(yn),Ut.progressiveHook("TranslationAssetProcess").next().inject(yn),Ya("CustomDialogInject",(()=>{}),(e=>Ut.patchFunction("ChatRoomPublishAction",{"\t\tdictionary.focusGroup(C.FocusGroup.Name);\n\t}":`\t\tdictionary.focusGroup(C.FocusGroup.Name);\n\t}\n\t${e.globalFuncName}(dictionary, PrevItem, NextItem);\n`}))).register(((e,t,s,i)=>{for(const[e,r]of[["PrevAsset",s],["NextAsset",i]])tn(r)&&t.text(e,r.Craft?`${r.Craft.Name} (${r.Asset.Description})`:r.Asset.Description)}))}(),Ya("LayerNameInject",(()=>{}),(e=>Ut.patchFunction("ItemColorLoad",{"ItemColorGroupNames = new TextCache(`Assets/${c.AssetFamily}/ColorGroups.csv`);":`ItemColorGroupNames = new TextCache(\`Assets/\${c.AssetFamily}/ColorGroups.csv\`);${e.globalFuncName}(()=>ItemColorLayerNames, ()=>ItemColorGroupNames);`}))).register(((e,t,s)=>{vn=t,Cn=s})),Ut.hookFunction("ItemColorLoad",0,((e,t)=>{const s=t(e),i=vn?.();var r;i&&i.cache&&(r=i,An.forEach(((e,t)=>{r.cache[t]&&e.noOverride||(r.cache[t]=rn(e.desc,e.fallback))})));const a=Cn?.();return a&&a.cache&&function(e){bn.forEach(((t,s)=>{e.cache[s]&&t.noOverride||(e.cache[s]=rn(t.desc,t.fallback))}))}(a),s})),function(){let e=!1;Ut.progressiveHook("DialogInventoryBuild").inject((t=>{t[2]||(e=!0)})),Ut.progressiveHook("DialogInventoryAdd").next().inject((t=>{if(!e)return;e=!1;const s=t[1].Asset.Group.Name,i=new Set(DialogInventory.map((e=>e.Asset.Name)));Ka[s]&&Object.entries(Ka[s]).filter((([e,t])=>!t.NotVisibleOnScreen?.includes("LuziScreen")&&!i.has(e))).forEach((([e,s])=>DialogInventoryAdd(t[0],{Asset:s},!1)))}));const t=(...[e,t])=>{const[s,i,r]=e;return!!Qa(r,i)||t(e)};if(Ut.progressiveHook("InventoryAvailable").inside("CharacterAppearanceValidate").override(t),Ut.progressiveHook("InventoryAvailable").inside("CraftingItemListBuild").override(t),Ut.progressiveHook("InventoryAvailable").inside("WardrobeFastLoad").override(t),"R114"===GameVersion){Ut.progressiveHook("CraftingValidate").inject((e=>{const t=e[0]?.Item;if(!t)return;const s=CraftingAssets[t]?.[0];s&&function(e,t){const s=Qa(e,t);return!!s&&!s.NotVisibleOnScreen?.includes("LuziScreen")}(s.Group.Name,s.Name)&&(e[3]=!1)}));const e=e=>Object.values(e).map((e=>Object.values(e))).flat().map((e=>({Asset:e})));Ya("CraftingInventory",(()=>Player.Inventory),(e=>Ut.patchFunction("CraftingRun",{"for (let Item of Player.Inventory) {":`for (let Item of ${e.globalFuncName}()) {`}))).register((t=>[...t,...e(Ka).flat()]))}else Ut.progressiveHook("InventoryAvailable").inside("CraftingValidate").override(t)}(),e(),function(e={start:"Start loading",end:"Loading completed, time usage: "}){const t=async()=>{Nn.info(e.start);const t=Date.now();for(function(){for(;Bn.length>0;)Bn.shift()()}(),In=!0,AssetGroup.forEach((e=>function(e){if(Mn[e.Name])for(;Mn[e.Name].length>0;)Mn[e.Name].shift()(e)}(e))),AssetGroup.forEach((e=>function(e){if(Gn[e.Name])for(;Gn[e.Name].length>0;)Gn[e.Name].shift()(e)}(e))),CraftingAssets=CraftingAssetsPopulate(),On=!0;Rn.length>0;)Rn.shift()();const s=Date.now();Nn.info(`${e.end} ${s-t}ms`)};AssetGroup.length>50?t():Ut.progressiveHook("AssetLoadAll",1).next().inject((()=>t()))}()}enableValidation(e){!function(e){Hn=e,Wn||(Wn=!0,Ut.hookFunction("ValidationResolveRemoveDiff",1,((e,t)=>{const[s,i]=e;return!i.fromModUser&&Qa(s.Asset.Group.Name,s.Asset.Name)?{item:s,valid:!1}:t(e)})),Ut.hookFunction("ValidationResolveSwapDiff",1,((e,t)=>{const[s,i,r]=e;return!r.fromModUser&&Qa(s.Asset.Group.Name,s.Asset.Name)?{item:s,valid:!1}:t(e)})),Ut.hookFunction("ValidationResolveAppearanceDiff",1,((e,t)=>(Hn&&(e[3].fromModUser=Hn(e[3])),t(e)))))}(e)}setLogger(e){!function(e){Ln=e}(e)}typeBodyGroupNames(){return this}},Eo={Name:"Stroller",Random:!1,Left:0,Top:0,Priority:40,Fetish:["ABDL"],Category:["ABDL"],DefaultColor:["#676285"],SetPose:[...PoseAllKneeling],AllowActivePose:[...PoseAllKneeling],Difficulty:8,RemoveTime:15,AllowLock:!0,AllowTighten:!0,Effect:[E.Freeze,E.Leash],AllowEffect:[E.Leash,E.IsLeashed],OverrideHeight:{Height:-100,Priority:51,HeightRatioProportion:0},ParentGroup:{},Layer:[{Priority:3,Name:"Outline"}]},Do={EN:"Stroller (DO NOT USE PLZZZ)",RU:"Стрелка",CN:"婴儿推车"};const So={AllowColorize:!0,AllowTypes:null,Alpha:[],BlendingMode:"source-over",ColorSuffix:{},CreateLayerTypes:[],ColorGroup:null,CopyLayerColor:null,FixedPosition:!1,MirrorExpression:void 0,HasImage:!0,HideAs:void 0,HideColoring:!1,HideForAttribute:null,InheritColor:null,LockLayer:!1,ShowForAttribute:null,TextureMask:void 0,Visibility:null,ParentGroup:{},PoseMapping:{},Priority:24,Opacity:0,MaxOpacity:1,MinOpacity:0,Name:null,Asset:void 0,DrawingLeft:{"":0},DrawingTop:{"":0},ColorIndex:0};const No={AllowColorize:!0,AllowTypes:null,Alpha:[],BlendingMode:"source-over",ColorSuffix:{},CreateLayerTypes:[],ColorGroup:null,CopyLayerColor:null,FixedPosition:!1,MirrorExpression:void 0,HasImage:!0,HideAs:void 0,HideColoring:!1,HideForAttribute:null,InheritColor:null,LockLayer:!1,ShowForAttribute:null,TextureMask:void 0,Visibility:null,ParentGroup:{},PoseMapping:{},Priority:24,Opacity:0,MaxOpacity:1,MinOpacity:0,Name:null,Asset:void 0,DrawingLeft:{"":0},DrawingTop:{"":0},ColorIndex:0};function Io(){const e=Boolean(globalThis?.__BC_LUZI_GLOBALS__?.["OnceFlag.服装拓展"]);Po.addImageMapping({"Assets/Female3DCG/Panties/Diapers1_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}/small.png`,"Assets/Female3DCG/Panties/Diapers1_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers1_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers1_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers2_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers2_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers2_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers2_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers3_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers3_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers3_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers3_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers4_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers4_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers4_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers4_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/LatexDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/small.png","Assets/Female3DCG/Panties/LatexDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/normal.png","Assets/Female3DCG/Panties/LatexDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/large.png","Assets/Female3DCG/Panties/LatexDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/xlarge.png","Assets/Female3DCG/Panties/BulkyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/back.png","Assets/Female3DCG/Panties/BulkyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/small.png","Assets/Female3DCG/Panties/BulkyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/normal.png","Assets/Female3DCG/Panties/BulkyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/large.png","Assets/Female3DCG/Panties/BulkyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/xlarge.png","Assets/Female3DCG/Panties/PoofyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/back.png","Assets/Female3DCG/Panties/PoofyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/small.png","Assets/Female3DCG/Panties/PoofyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/normal.png","Assets/Female3DCG/Panties/PoofyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/large.png","Assets/Female3DCG/Panties/PoofyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/small.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/normal.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/large.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/back.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/small.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/normal.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/large.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/back.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/small.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/normal.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/large.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/xlarge.png"}),Po.addLayerNamesRaw("Panties","Diapers1",{EN:{"":"Diaper",Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","Diapers3",{EN:{"":"Diaper",Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","Diapers2",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","Diapers4",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","LatexDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","BulkyDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties","PoofyDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("ItemPelvis","LatexDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("ItemPelvis","BulkyDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("ItemPelvis","PoofyDiaper",{EN:{Gradient:"Wet stains"}}),Po.modifyAsset("Panties","Diapers1",((e,t)=>{t.DefaultColor=["#817884","#a88800"],t.ColorableLayerCount=2,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:1,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties","Diapers1")})})),Po.modifyAsset("Panties","Diapers2",((e,t)=>{t.DefaultColor=["#817884","#808080","#a88800"],t.ColorableLayerCount=3,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:2,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties","Diapers2")})})),Po.modifyAsset("Panties","Diapers3",((e,t)=>{t.DefaultColor=["#89798C","#7E6E28"],t.ColorableLayerCount=2,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:1,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties","Diapers3")})})),Po.modifyAsset("Panties","Diapers4",((e,t)=>{t.DefaultColor=["#847786","#787C8A","#F56363","#a88800"],t.ColorableLayerCount=4,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:3,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties","Diapers4")})})),Po.modifyAsset("Panties","LatexDiaper",((e,t)=>{t.DefaultColor=["#9763A6","#658AA6","#a88800"],t.ColorableLayerCount=3,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:2,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","Panties","LatexDiaper")})})),Po.modifyAsset("ItemPelvis","LatexDiaper",((e,t)=>{t.DefaultColor=["#9763A6","#658AA6","#a88800"],t.ColorableLayerCount=3,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:2,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","ItemPelvis","LatexDiaper")})})),Po.modifyAsset("Panties","BulkyDiaper",((e,t)=>{t.DefaultColor=["#688599","#808080","#8c7384","#BF3F97","#a88800"],t.ColorableLayerCount=5,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:4,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","Panties","BulkyDiaper")})})),Po.modifyAsset("ItemPelvis","BulkyDiaper",((e,t)=>{t.DefaultColor=["#688599","#808080","#8c7384","#BF3F97","#a88800"],t.ColorableLayerCount=5,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:4,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","ItemPelvis","BulkyDiaper")})})),Po.modifyAsset("Panties","PoofyDiaper",((e,t)=>{t.DefaultColor=["#9763A6","#658AA6","#997391","#a916cc","#a88800"],t.ColorableLayerCount=5,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:4,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","Panties","PoofyDiaper")})})),Po.modifyAsset("ItemPelvis","PoofyDiaper",((e,t)=>{t.DefaultColor=["#9763A6","#658AA6","#997391","#a916cc","#a88800"],t.ColorableLayerCount=5,t.EditOpacity=!0,t.Layer.push({...No,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:4,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","ItemPelvis","PoofyDiaper")})})),e&&(Po.addImageMapping({"Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers1_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo/small.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers1_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//normal.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers1_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//large.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers1_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//xlarge.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers2_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//small.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers2_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//normal.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers2_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//large.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers2_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1_echo//xlarge.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers3_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3_echo//small.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers3_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3_echo//normal.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers3_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3_echo//large.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers3_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3_echo//xlarge.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers4_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4_echo//small.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers4_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4_echo//normal.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers4_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4_echo//large.png","Assets/Female3DCG/Panties_笨笨蛋Luzi/Diapers4_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4_echo//xlarge.png"}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","Diapers1",{EN:{"":"Diaper",Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","Diapers3",{EN:{"":"Diaper",Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","Diapers2",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","Diapers4",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","LatexDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","BulkyDiaper",{EN:{Gradient:"Wet stains"}}),Po.addLayerNamesRaw("Panties_笨笨蛋Luzi","PoofyDiaper",{EN:{Gradient:"Wet stains"}}),Po.modifyAsset("Panties_笨笨蛋Luzi","Diapers1",((e,t)=>{t.DefaultColor=["#817884","#a88800"],t.ColorableLayerCount=2,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:1,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","Diapers1")})})),Po.modifyAsset("Panties_笨笨蛋Luzi","Diapers2",((e,t)=>{t.DefaultColor=["#817884","#808080","#a88800"],t.ColorableLayerCount=3,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:2,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","Diapers2")})})),Po.modifyAsset("Panties_笨笨蛋Luzi","Diapers3",((e,t)=>{t.DefaultColor=["#89798C","#7E6E28"],t.ColorableLayerCount=2,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:1,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","Diapers3")})})),Po.modifyAsset("Panties_笨笨蛋Luzi","Diapers4",((e,t)=>{t.DefaultColor=["#847786","#787C8A","#F56363","#a88800"],t.ColorableLayerCount=4,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:24,Opacity:0,Name:"Gradient",ColorIndex:3,DrawingLeft:{"":150},DrawingTop:{"":395},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","Diapers4")})})),Po.modifyAsset("Panties_笨笨蛋Luzi","LatexDiaper",((e,t)=>{t.DefaultColor=["#9763A6","#658AA6","#a88800"],t.ColorableLayerCount=3,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:2,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","LatexDiaper")})})),Po.modifyAsset("Panties_笨笨蛋Luzi","BulkyDiaper",((e,t)=>{t.DefaultColor=["#688599","#808080","#8c7384","#BF3F97","#a88800"],t.ColorableLayerCount=5,t.EditOpacity=!0,t.Layer.push({...So,ParentGroup:{"":"BodyLower"},Priority:26,Opacity:0,Name:"Gradient",ColorIndex:4,DrawingLeft:{"":49},DrawingTop:{"":360},Asset:AssetGet("Female3DCG","Panties_笨笨蛋Luzi","BulkyDiaper")})})))}Ut.afterPlayerLogin((()=>{const e=Boolean(globalThis?.__BC_LUZI_GLOBALS__?.["OnceFlag.服装拓展"]);Po.addImageMapping({"Assets/Female3DCG/Panties/Diapers1_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}/small.png`,"Assets/Female3DCG/Panties/Diapers1_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers1_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers1_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers2_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers2_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers2_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers2_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers1${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers3_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers3_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers3_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers3_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers3${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/Diapers4_Small_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//small.png`,"Assets/Female3DCG/Panties/Diapers4_Normal_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//normal.png`,"Assets/Female3DCG/Panties/Diapers4_Large_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//large.png`,"Assets/Female3DCG/Panties/Diapers4_XLarge_Gradient.png":`https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/Diapers4${e?"_echo":""}//xlarge.png`,"Assets/Female3DCG/Panties/LatexDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/small.png","Assets/Female3DCG/Panties/LatexDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/normal.png","Assets/Female3DCG/Panties/LatexDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/large.png","Assets/Female3DCG/Panties/LatexDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/xlarge.png","Assets/Female3DCG/Panties/BulkyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/back.png","Assets/Female3DCG/Panties/BulkyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/small.png","Assets/Female3DCG/Panties/BulkyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/normal.png","Assets/Female3DCG/Panties/BulkyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/large.png","Assets/Female3DCG/Panties/BulkyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/xlarge.png","Assets/Female3DCG/Panties/PoofyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/back.png","Assets/Female3DCG/Panties/PoofyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/small.png","Assets/Female3DCG/Panties/PoofyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/normal.png","Assets/Female3DCG/Panties/PoofyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/large.png","Assets/Female3DCG/Panties/PoofyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/small.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/normal.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/large.png","Assets/Female3DCG/ItemPelvis/LatexDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/LatexDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/back.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/small.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/normal.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/large.png","Assets/Female3DCG/ItemPelvis/BulkyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/BulkyDiaper/xlarge.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Back_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/back.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Small_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/small.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Normal_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/normal.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_Large_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/large.png","Assets/Female3DCG/ItemPelvis/PoofyDiaper_XLarge_Gradient.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/diaper/PoofyDiaper/xlarge.png"})}));Po.init((()=>{Io(),Po.addImageMapping({"Assets/Female3DCG/ItemDevices/Stroller_Outline.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/other/stroller/Stroller_Outline.png","Assets/Female3DCG/ItemDevices/Preview/Stroller.png":"https://zoe-64.github.io/ABCL/versions/unstable/assets/items/other/stroller/Stroller_Outline.png"}),Po.addAsset("ItemDevices",Eo,void 0,Do)}));const Bo=()=>{"ChatRoom"===CurrentScreen&&Ls.update()};Ut.afterPlayerLogin((async()=>{console.log("init"),(async()=>{const t=LZString.decompressFromBase64(Player.ExtensionSettings.ABCL),s=t?JSON.parse(t):{Settings:{},Stats:{}};if("2.0.0"===s.ModVersion){const e=s.Settings.Metabolism,t=s.Settings.DisableWetting;s.Settings={...Object.fromEntries(Object.entries(s.Settings).filter((([e])=>!["DisableWetting","DisableSoiling","Metabolism","CaregiverIDs"].includes(e))).map((([e,{value:t}])=>[e,t]))),PeeMetabolism:t?"Disabled":e,PoopMetabolism:t?"Disabled":e},s.ModVersion=void 0,s.Version="2.0.1"}const i=Dt({Settings:St,Stats:Nt,Version:"2.2.2"},s);e.debug({message:"Merged settings object",modStorageObject:i}),Player.ABCL=i})(),aa(),Ut.hookFunction("DialogMenuMapping.activities.GetClickStatus",1,((e,t)=>{const[s,i,r]=e;return i?t(e):null})),Ut.hookFunction("DialogChangeMode",1,(async(e,t)=>{const[s]=e;if(t(e),"activities"!==s)return;const i=CurrentCharacter?.FocusGroup?CurrentCharacter:Player,r=await Xt("#dialog-activity-grid"),a=i.FocusGroup?.Name;if(a)for(const{activity:e}of Oi){if(!e)continue;const t=new ki(e.ID,e.Name,e.Image,e.OnClick,e.Target,e.TargetSelf,e.Criteria);t.fitsCriteria(i,a)&&(ki.isInserted(e.ID)||r.appendChild(t.createButton()))}})),CommandCombine(Ri),Ti(),ps(new ms),ps(new gs),document.body.appendChild(ss),Xt("#chat-room-div",{childCheck:!0,timeout:1e22}).then((()=>{Xt(".ABCL-overlay",{timeout:1e22}).then((()=>{document.removeChild(ss),setTimeout((()=>{document.appendChild(ss)}),1e3)}))})),window.ABCL={version:"2.2.2",inModSubscreen:()=>Boolean(ss.querySelector(".ABCLSettingPage")?.classList.contains("ABCL-hidden")),isABCLPlayer:ns,wet:Ls.wet,attemptWetting:Ls.attemptWetting,soil:Ls.soil,attemptSoiling:Ls.attemptSoiling,settings:Player.ABCL.Settings,stats:Ls.stats,actions:{changeDiaper:Xs,checkDiaper:Zs,diaperFaceRub:()=>Fi("diaperFaceRub",void 0,Player.MemberNumber),diaperFaceSit:()=>Fi("diaperFaceSit",void 0,Player.MemberNumber),diaperPatBack:()=>Fi("diaperPatBack",void 0,Player.MemberNumber),diaperPatFront:()=>Fi("diaperPatFront",void 0,Player.MemberNumber),diaperPeeOthersDiaper:()=>Fi("diaperPeeOthersDiaper",void 0,Player.MemberNumber),diaperPour:()=>Fi("diaperPour",void 0,Player.MemberNumber),diaperRubBack:()=>Fi("diaperRubBack",void 0,Player.MemberNumber),diaperRubFront:()=>Fi("diaperRubFront",void 0,Player.MemberNumber),diaperSquishBack:()=>Fi("diaperSquishBack",void 0,Player.MemberNumber),diaperSquishFront:()=>Fi("diaperSquishFront",void 0,Player.MemberNumber),wipePuddle:()=>Fi("wipePuddle",void 0,Player.MemberNumber),lickPuddle:()=>Fi("lickPuddle",void 0,Player.MemberNumber),sendABCLmessage:(e,t)=>Fi("onABCLMessage",{message:e,local:t},Player.MemberNumber),useToilet:()=>Ii(),usePotty:()=>Si(),get canUseToilet(){return Bi.activity?.Criteria?.(Player)},get canUsePotty(){return Ni.activity?.Criteria?.(Player)},get canChangeDiaper(){return qs.activity?.Criteria?.(Player)},get canCheckDiaper(){return Ks.activity?.Criteria?.(Player)}},raw:{updatePlayerClothes:As,sendUpdateMyData:$i,sendDataToAction:Fi,mentalRegressionBonus:js,mentalRegressionOvertime:Vs,mentalRegressionOnAccident:Hs,incontinenceOnAccident:Us,incontinenceChanceFormula:zs,incontinenceLimitFormula:xs,updateDiaperColor:Rs,getPlayerDiaperSize:Fs,getPlayerDiaper:Ts,getDiaperVerb:Ws,setDiaperColor:Os,isDiaperLocked:Gs,isDiaperDirty:Ss,isDiaper:Ns,isABCLPlayer:ns,isLeaking:Ds,isWearingBabyClothes:Bs,hasDiaper:Is,utility:{getCharacter:rs},clearData:Mt,updateData:Bt}},setInterval(Bo,6e4),e.info("Ready.")}))}();
//# sourceMappingURL=abcl.js.map
